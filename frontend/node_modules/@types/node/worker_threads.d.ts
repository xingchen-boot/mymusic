/**
***REMOVED*******REMOVED***The***REMOVED***`node:worker_threads`***REMOVED***module***REMOVED***enables***REMOVED***the***REMOVED***use***REMOVED***of***REMOVED***threads***REMOVED***that***REMOVED***execute
***REMOVED*******REMOVED***JavaScript***REMOVED***in***REMOVED***parallel.***REMOVED***To***REMOVED***access***REMOVED***it:
***REMOVED****
***REMOVED*******REMOVED***```js
***REMOVED*******REMOVED***import***REMOVED***worker***REMOVED***from***REMOVED***'node:worker_threads';
***REMOVED*******REMOVED***```
***REMOVED****
***REMOVED*******REMOVED***Workers***REMOVED***(threads)***REMOVED***are***REMOVED***useful***REMOVED***for***REMOVED***performing***REMOVED***CPU-intensive***REMOVED***JavaScript***REMOVED***operations.
***REMOVED*******REMOVED***They***REMOVED***do***REMOVED***not***REMOVED***help***REMOVED***much***REMOVED***with***REMOVED***I/O-intensive***REMOVED***work.***REMOVED***The***REMOVED***Node.js***REMOVED***built-in
***REMOVED*******REMOVED***asynchronous***REMOVED***I/O***REMOVED***operations***REMOVED***are***REMOVED***more***REMOVED***efficient***REMOVED***than***REMOVED***Workers***REMOVED***can***REMOVED***be.
***REMOVED****
***REMOVED*******REMOVED***Unlike***REMOVED***`child_process`***REMOVED***or***REMOVED***`cluster`,***REMOVED***`worker_threads`***REMOVED***can***REMOVED***share***REMOVED***memory.***REMOVED***They***REMOVED***do
***REMOVED*******REMOVED***so***REMOVED***by***REMOVED***transferring***REMOVED***`ArrayBuffer`***REMOVED***instances***REMOVED***or***REMOVED***sharing***REMOVED***`SharedArrayBuffer`***REMOVED***instances.
***REMOVED****
***REMOVED*******REMOVED***```js
***REMOVED*******REMOVED***import***REMOVED***{
***REMOVED*******REMOVED******REMOVED******REMOVED***Worker,***REMOVED***isMainThread,***REMOVED***parentPort,***REMOVED***workerData,
***REMOVED*******REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads';
***REMOVED*******REMOVED***import***REMOVED***{***REMOVED***parse***REMOVED***}***REMOVED***=***REMOVED***from***REMOVED***'some-js-parsing-library';
***REMOVED****
***REMOVED*******REMOVED***if***REMOVED***(isMainThread)***REMOVED***{
***REMOVED*******REMOVED******REMOVED******REMOVED***module.exports***REMOVED***=***REMOVED***function***REMOVED***parseJSAsync(script)***REMOVED***{
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***new***REMOVED***Promise((resolve,***REMOVED***reject)***REMOVED***=>***REMOVED***{
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***worker***REMOVED***=***REMOVED***new***REMOVED***Worker(__filename,***REMOVED***{
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***workerData:***REMOVED***script,
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***worker.on('message',***REMOVED***resolve);
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***worker.on('error',***REMOVED***reject);
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***worker.on('exit',***REMOVED***(code)***REMOVED***=>***REMOVED***{
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(code***REMOVED***!==***REMOVED***0)
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***reject(new***REMOVED***Error(`Worker***REMOVED***stopped***REMOVED***with***REMOVED***exit***REMOVED***code***REMOVED***${code}`));
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED*******REMOVED******REMOVED******REMOVED***};
***REMOVED*******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED*******REMOVED******REMOVED******REMOVED***const***REMOVED***script***REMOVED***=***REMOVED***workerData;
***REMOVED*******REMOVED******REMOVED******REMOVED***parentPort.postMessage(parse(script));
***REMOVED*******REMOVED***}
***REMOVED*******REMOVED***```
***REMOVED****
***REMOVED*******REMOVED***The***REMOVED***above***REMOVED***example***REMOVED***spawns***REMOVED***a***REMOVED***Worker***REMOVED***thread***REMOVED***for***REMOVED***each***REMOVED***`parseJSAsync()`***REMOVED***call.***REMOVED***In
***REMOVED*******REMOVED***practice,***REMOVED***use***REMOVED***a***REMOVED***pool***REMOVED***of***REMOVED***Workers***REMOVED***for***REMOVED***these***REMOVED***kinds***REMOVED***of***REMOVED***tasks.***REMOVED***Otherwise,***REMOVED***the
***REMOVED*******REMOVED***overhead***REMOVED***of***REMOVED***creating***REMOVED***Workers***REMOVED***would***REMOVED***likely***REMOVED***exceed***REMOVED***their***REMOVED***benefit.
***REMOVED****
***REMOVED*******REMOVED***When***REMOVED***implementing***REMOVED***a***REMOVED***worker***REMOVED***pool,***REMOVED***use***REMOVED***the***REMOVED***`AsyncResource`***REMOVED***API***REMOVED***to***REMOVED***inform
***REMOVED*******REMOVED***diagnostic***REMOVED***tools***REMOVED***(e.g.***REMOVED***to***REMOVED***provide***REMOVED***asynchronous***REMOVED***stack***REMOVED***traces)***REMOVED***about***REMOVED***the
***REMOVED*******REMOVED***correlation***REMOVED***between***REMOVED***tasks***REMOVED***and***REMOVED***their***REMOVED***outcomes.***REMOVED***See***REMOVED***`"Using***REMOVED***AsyncResource***REMOVED***for***REMOVED***a***REMOVED***Worker***REMOVED***thread***REMOVED***pool"`***REMOVED***in***REMOVED***the***REMOVED***`async_hooks`***REMOVED***documentation***REMOVED***for***REMOVED***an***REMOVED***example***REMOVED***implementation.
***REMOVED****
***REMOVED*******REMOVED***Worker***REMOVED***threads***REMOVED***inherit***REMOVED***non-process-specific***REMOVED***options***REMOVED***by***REMOVED***default.***REMOVED***Refer***REMOVED***to***REMOVED***`Worker***REMOVED***constructor***REMOVED***options`***REMOVED***to***REMOVED***know***REMOVED***how***REMOVED***to***REMOVED***customize***REMOVED***worker***REMOVED***thread***REMOVED***options,
***REMOVED*******REMOVED***specifically***REMOVED***`argv`***REMOVED***and***REMOVED***`execArgv`***REMOVED***options.
***REMOVED*******REMOVED***@see***REMOVED***[source](https://github.com/nodejs/node/blob/v20.13.1/lib/worker_threads.js)
***REMOVED****/
declare***REMOVED***module***REMOVED***"worker_threads"***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***import***REMOVED***{***REMOVED***Context***REMOVED***}***REMOVED***from***REMOVED***"node:vm";
***REMOVED******REMOVED******REMOVED******REMOVED***import***REMOVED***{***REMOVED***EventEmitter***REMOVED***}***REMOVED***from***REMOVED***"node:events";
***REMOVED******REMOVED******REMOVED******REMOVED***import***REMOVED***{***REMOVED***EventLoopUtilityFunction***REMOVED***}***REMOVED***from***REMOVED***"node:perf_hooks";
***REMOVED******REMOVED******REMOVED******REMOVED***import***REMOVED***{***REMOVED***FileHandle***REMOVED***}***REMOVED***from***REMOVED***"node:fs/promises";
***REMOVED******REMOVED******REMOVED******REMOVED***import***REMOVED***{***REMOVED***Readable,***REMOVED***Writable***REMOVED***}***REMOVED***from***REMOVED***"node:stream";
***REMOVED******REMOVED******REMOVED******REMOVED***import***REMOVED***{***REMOVED***ReadableStream,***REMOVED***TransformStream,***REMOVED***WritableStream***REMOVED***}***REMOVED***from***REMOVED***"node:stream/web";
***REMOVED******REMOVED******REMOVED******REMOVED***import***REMOVED***{***REMOVED***URL***REMOVED***}***REMOVED***from***REMOVED***"node:url";
***REMOVED******REMOVED******REMOVED******REMOVED***import***REMOVED***{***REMOVED***MessageEvent***REMOVED***}***REMOVED***from***REMOVED***"undici-types";
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isMainThread:***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***parentPort:***REMOVED***null***REMOVED***|***REMOVED***MessagePort;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***resourceLimits:***REMOVED***ResourceLimits;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***SHARE_ENV:***REMOVED***unique***REMOVED***symbol;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***threadId:***REMOVED***number;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***workerData:***REMOVED***any;
***REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Instances***REMOVED***of***REMOVED***the***REMOVED***`worker.MessageChannel`***REMOVED***class***REMOVED***represent***REMOVED***an***REMOVED***asynchronous,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***two-way***REMOVED***communications***REMOVED***channel.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***The***REMOVED***`MessageChannel`***REMOVED***has***REMOVED***no***REMOVED***methods***REMOVED***of***REMOVED***its***REMOVED***own.***REMOVED***`new***REMOVED***MessageChannel()`***REMOVED***yields***REMOVED***an***REMOVED***object***REMOVED***with***REMOVED***`port1`***REMOVED***and***REMOVED***`port2`***REMOVED***properties,***REMOVED***which***REMOVED***refer***REMOVED***to***REMOVED***linked***REMOVED***`MessagePort`***REMOVED***instances.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```js
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***import***REMOVED***{***REMOVED***MessageChannel***REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***{***REMOVED***port1,***REMOVED***port2***REMOVED***}***REMOVED***=***REMOVED***new***REMOVED***MessageChannel();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port1.on('message',***REMOVED***(message)***REMOVED***=>***REMOVED***console.log('received',***REMOVED***message));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port2.postMessage({***REMOVED***foo:***REMOVED***'bar'***REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***Prints:***REMOVED***received***REMOVED***{***REMOVED***foo:***REMOVED***'bar'***REMOVED***}***REMOVED***from***REMOVED***the***REMOVED***`port1.on('message')`***REMOVED***listener
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***class***REMOVED***MessageChannel***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***readonly***REMOVED***port1:***REMOVED***MessagePort;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***readonly***REMOVED***port2:***REMOVED***MessagePort;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***interface***REMOVED***WorkerPerformance***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***eventLoopUtilization:***REMOVED***EventLoopUtilityFunction;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***type***REMOVED***Transferable***REMOVED***=
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***ArrayBuffer
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***MessagePort
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***AbortSignal
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***FileHandle
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***ReadableStream
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***WritableStream
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***TransformStream;
***REMOVED******REMOVED******REMOVED******REMOVED***/*****REMOVED***@deprecated***REMOVED***Use***REMOVED***`import***REMOVED***{***REMOVED***Transferable***REMOVED***}***REMOVED***from***REMOVED***"node:worker_threads"`***REMOVED***instead.***REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***type***REMOVED***TransferListItem***REMOVED***=***REMOVED***Transferable;
***REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Instances***REMOVED***of***REMOVED***the***REMOVED***`worker.MessagePort`***REMOVED***class***REMOVED***represent***REMOVED***one***REMOVED***end***REMOVED***of***REMOVED***an
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***asynchronous,***REMOVED***two-way***REMOVED***communications***REMOVED***channel.***REMOVED***It***REMOVED***can***REMOVED***be***REMOVED***used***REMOVED***to***REMOVED***transfer
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***structured***REMOVED***data,***REMOVED***memory***REMOVED***regions***REMOVED***and***REMOVED***other***REMOVED***`MessagePort`s***REMOVED***between***REMOVED***different***REMOVED***`Worker`s.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***This***REMOVED***implementation***REMOVED***matches***REMOVED***[browser***REMOVED***`MessagePort`](https://developer.mozilla.org/en-US/docs/Web/API/MessagePort)***REMOVED***s.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***class***REMOVED***MessagePort***REMOVED***extends***REMOVED***EventEmitter***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Disables***REMOVED***further***REMOVED***sending***REMOVED***of***REMOVED***messages***REMOVED***on***REMOVED***either***REMOVED***side***REMOVED***of***REMOVED***the***REMOVED***connection.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***This***REMOVED***method***REMOVED***can***REMOVED***be***REMOVED***called***REMOVED***when***REMOVED***no***REMOVED***further***REMOVED***communication***REMOVED***will***REMOVED***happen***REMOVED***over***REMOVED***this***REMOVED***`MessagePort`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***The***REMOVED***`'close'***REMOVED***event`***REMOVED***is***REMOVED***emitted***REMOVED***on***REMOVED***both***REMOVED***`MessagePort`***REMOVED***instances***REMOVED***that
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***are***REMOVED***part***REMOVED***of***REMOVED***the***REMOVED***channel.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***close():***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Sends***REMOVED***a***REMOVED***JavaScript***REMOVED***value***REMOVED***to***REMOVED***the***REMOVED***receiving***REMOVED***side***REMOVED***of***REMOVED***this***REMOVED***channel.***REMOVED***`value`***REMOVED***is***REMOVED***transferred***REMOVED***in***REMOVED***a***REMOVED***way***REMOVED***which***REMOVED***is***REMOVED***compatible***REMOVED***with
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***the***REMOVED***[HTML***REMOVED***structured***REMOVED***clone***REMOVED***algorithm](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm).
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***In***REMOVED***particular,***REMOVED***the***REMOVED***significant***REMOVED***differences***REMOVED***to***REMOVED***`JSON`***REMOVED***are:
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***`value`***REMOVED***may***REMOVED***contain***REMOVED***circular***REMOVED***references.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***`value`***REMOVED***may***REMOVED***contain***REMOVED***instances***REMOVED***of***REMOVED***builtin***REMOVED***JS***REMOVED***types***REMOVED***such***REMOVED***as***REMOVED***`RegExp`s,***REMOVED***`BigInt`s,***REMOVED***`Map`s,***REMOVED***`Set`s,***REMOVED***etc.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***`value`***REMOVED***may***REMOVED***contain***REMOVED***typed***REMOVED***arrays,***REMOVED***both***REMOVED***using***REMOVED***`ArrayBuffer`s
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***and***REMOVED***`SharedArrayBuffer`s.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***`value`***REMOVED***may***REMOVED***contain***REMOVED***[`WebAssembly.Module`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Module)***REMOVED***instances.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***`value`***REMOVED***may***REMOVED***not***REMOVED***contain***REMOVED***native***REMOVED***(C++-backed)***REMOVED***objects***REMOVED***other***REMOVED***than:
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```js
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***import***REMOVED***{***REMOVED***MessageChannel***REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***{***REMOVED***port1,***REMOVED***port2***REMOVED***}***REMOVED***=***REMOVED***new***REMOVED***MessageChannel();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port1.on('message',***REMOVED***(message)***REMOVED***=>***REMOVED***console.log(message));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***circularData***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***circularData.foo***REMOVED***=***REMOVED***circularData;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***Prints:***REMOVED***{***REMOVED***foo:***REMOVED***[Circular]***REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port2.postMessage(circularData);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***`transferList`***REMOVED***may***REMOVED***be***REMOVED***a***REMOVED***list***REMOVED***of***REMOVED***[`ArrayBuffer`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer),***REMOVED***`MessagePort`,***REMOVED***and***REMOVED***`FileHandle`***REMOVED***objects.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***After***REMOVED***transferring,***REMOVED***they***REMOVED***are***REMOVED***not***REMOVED***usable***REMOVED***on***REMOVED***the***REMOVED***sending***REMOVED***side***REMOVED***of***REMOVED***the***REMOVED***channel
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***anymore***REMOVED***(even***REMOVED***if***REMOVED***they***REMOVED***are***REMOVED***not***REMOVED***contained***REMOVED***in***REMOVED***`value`).***REMOVED***Unlike***REMOVED***with***REMOVED***`child***REMOVED***processes`,***REMOVED***transferring***REMOVED***handles***REMOVED***such***REMOVED***as***REMOVED***network***REMOVED***sockets***REMOVED***is***REMOVED***currently
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***not***REMOVED***supported.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***`value`***REMOVED***contains***REMOVED***[`SharedArrayBuffer`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer)***REMOVED***instances,***REMOVED***those***REMOVED***are***REMOVED***accessible
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***from***REMOVED***either***REMOVED***thread.***REMOVED***They***REMOVED***cannot***REMOVED***be***REMOVED***listed***REMOVED***in***REMOVED***`transferList`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***`value`***REMOVED***may***REMOVED***still***REMOVED***contain***REMOVED***`ArrayBuffer`***REMOVED***instances***REMOVED***that***REMOVED***are***REMOVED***not***REMOVED***in***REMOVED***`transferList`;***REMOVED***in***REMOVED***that***REMOVED***case,***REMOVED***the***REMOVED***underlying***REMOVED***memory***REMOVED***is***REMOVED***copied***REMOVED***rather***REMOVED***than***REMOVED***moved.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```js
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***import***REMOVED***{***REMOVED***MessageChannel***REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***{***REMOVED***port1,***REMOVED***port2***REMOVED***}***REMOVED***=***REMOVED***new***REMOVED***MessageChannel();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port1.on('message',***REMOVED***(message)***REMOVED***=>***REMOVED***console.log(message));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***uint8Array***REMOVED***=***REMOVED***new***REMOVED***Uint8Array([***REMOVED***1,***REMOVED***2,***REMOVED***3,***REMOVED***4***REMOVED***]);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***This***REMOVED***posts***REMOVED***a***REMOVED***copy***REMOVED***of***REMOVED***`uint8Array`:
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port2.postMessage(uint8Array);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***This***REMOVED***does***REMOVED***not***REMOVED***copy***REMOVED***data,***REMOVED***but***REMOVED***renders***REMOVED***`uint8Array`***REMOVED***unusable:
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port2.postMessage(uint8Array,***REMOVED***[***REMOVED***uint8Array.buffer***REMOVED***]);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***The***REMOVED***memory***REMOVED***for***REMOVED***the***REMOVED***`sharedUint8Array`***REMOVED***is***REMOVED***accessible***REMOVED***from***REMOVED***both***REMOVED***the
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***original***REMOVED***and***REMOVED***the***REMOVED***copy***REMOVED***received***REMOVED***by***REMOVED***`.on('message')`:
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***sharedUint8Array***REMOVED***=***REMOVED***new***REMOVED***Uint8Array(new***REMOVED***SharedArrayBuffer(4));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port2.postMessage(sharedUint8Array);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***This***REMOVED***transfers***REMOVED***a***REMOVED***freshly***REMOVED***created***REMOVED***message***REMOVED***port***REMOVED***to***REMOVED***the***REMOVED***receiver.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***This***REMOVED***can***REMOVED***be***REMOVED***used,***REMOVED***for***REMOVED***example,***REMOVED***to***REMOVED***create***REMOVED***communication***REMOVED***channels***REMOVED***between
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***multiple***REMOVED***`Worker`***REMOVED***threads***REMOVED***that***REMOVED***are***REMOVED***children***REMOVED***of***REMOVED***the***REMOVED***same***REMOVED***parent***REMOVED***thread.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***otherChannel***REMOVED***=***REMOVED***new***REMOVED***MessageChannel();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port2.postMessage({***REMOVED***port:***REMOVED***otherChannel.port1***REMOVED***},***REMOVED***[***REMOVED***otherChannel.port1***REMOVED***]);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***The***REMOVED***message***REMOVED***object***REMOVED***is***REMOVED***cloned***REMOVED***immediately,***REMOVED***and***REMOVED***can***REMOVED***be***REMOVED***modified***REMOVED***after
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***posting***REMOVED***without***REMOVED***having***REMOVED***side***REMOVED***effects.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***For***REMOVED***more***REMOVED***information***REMOVED***on***REMOVED***the***REMOVED***serialization***REMOVED***and***REMOVED***deserialization***REMOVED***mechanisms
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***behind***REMOVED***this***REMOVED***API,***REMOVED***see***REMOVED***the***REMOVED***`serialization***REMOVED***API***REMOVED***of***REMOVED***the***REMOVED***node:v8***REMOVED***module`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***postMessage(value:***REMOVED***any,***REMOVED***transferList?:***REMOVED***readonly***REMOVED***Transferable[]):***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Opposite***REMOVED***of***REMOVED***`unref()`.***REMOVED***Calling***REMOVED***`ref()`***REMOVED***on***REMOVED***a***REMOVED***previously***REMOVED***`unref()`ed***REMOVED***port***REMOVED***does***REMOVED***_not_***REMOVED***let***REMOVED***the***REMOVED***program***REMOVED***exit***REMOVED***if***REMOVED***it's***REMOVED***the***REMOVED***only***REMOVED***active***REMOVED***handle***REMOVED***left***REMOVED***(the***REMOVED***default
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***behavior).***REMOVED***If***REMOVED***the***REMOVED***port***REMOVED***is***REMOVED***`ref()`ed,***REMOVED***calling***REMOVED***`ref()`***REMOVED***again***REMOVED***has***REMOVED***no***REMOVED***effect.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***listeners***REMOVED***are***REMOVED***attached***REMOVED***or***REMOVED***removed***REMOVED***using***REMOVED***`.on('message')`,***REMOVED***the***REMOVED***port
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***is***REMOVED***`ref()`ed***REMOVED***and***REMOVED***`unref()`ed***REMOVED***automatically***REMOVED***depending***REMOVED***on***REMOVED***whether
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***listeners***REMOVED***for***REMOVED***the***REMOVED***event***REMOVED***exist.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ref():***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Calling***REMOVED***`unref()`***REMOVED***on***REMOVED***a***REMOVED***port***REMOVED***allows***REMOVED***the***REMOVED***thread***REMOVED***to***REMOVED***exit***REMOVED***if***REMOVED***this***REMOVED***is***REMOVED***the***REMOVED***only
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***active***REMOVED***handle***REMOVED***in***REMOVED***the***REMOVED***event***REMOVED***system.***REMOVED***If***REMOVED***the***REMOVED***port***REMOVED***is***REMOVED***already***REMOVED***`unref()`ed***REMOVED***calling***REMOVED***`unref()`***REMOVED***again***REMOVED***has***REMOVED***no***REMOVED***effect.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***listeners***REMOVED***are***REMOVED***attached***REMOVED***or***REMOVED***removed***REMOVED***using***REMOVED***`.on('message')`,***REMOVED***the***REMOVED***port***REMOVED***is***REMOVED***`ref()`ed***REMOVED***and***REMOVED***`unref()`ed***REMOVED***automatically***REMOVED***depending***REMOVED***on***REMOVED***whether
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***listeners***REMOVED***for***REMOVED***the***REMOVED***event***REMOVED***exist.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***unref():***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Starts***REMOVED***receiving***REMOVED***messages***REMOVED***on***REMOVED***this***REMOVED***`MessagePort`.***REMOVED***When***REMOVED***using***REMOVED***this***REMOVED***port
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***as***REMOVED***an***REMOVED***event***REMOVED***emitter,***REMOVED***this***REMOVED***is***REMOVED***called***REMOVED***automatically***REMOVED***once***REMOVED***`'message'`***REMOVED***listeners***REMOVED***are***REMOVED***attached.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***This***REMOVED***method***REMOVED***exists***REMOVED***for***REMOVED***parity***REMOVED***with***REMOVED***the***REMOVED***Web***REMOVED***`MessagePort`***REMOVED***API.***REMOVED***In***REMOVED***Node.js,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***it***REMOVED***is***REMOVED***only***REMOVED***useful***REMOVED***for***REMOVED***ignoring***REMOVED***messages***REMOVED***when***REMOVED***no***REMOVED***event***REMOVED***listener***REMOVED***is***REMOVED***present.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Node.js***REMOVED***also***REMOVED***diverges***REMOVED***in***REMOVED***its***REMOVED***handling***REMOVED***of***REMOVED***`.onmessage`.***REMOVED***Setting***REMOVED***it
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***automatically***REMOVED***calls***REMOVED***`.start()`,***REMOVED***but***REMOVED***unsetting***REMOVED***it***REMOVED***lets***REMOVED***messages***REMOVED***queue***REMOVED***up
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***until***REMOVED***a***REMOVED***new***REMOVED***handler***REMOVED***is***REMOVED***set***REMOVED***or***REMOVED***the***REMOVED***port***REMOVED***is***REMOVED***discarded.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***start():***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addListener(event:***REMOVED***"close",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addListener(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addListener(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addListener(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(event:***REMOVED***"close"):***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(event:***REMOVED***"message",***REMOVED***value:***REMOVED***any):***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(event:***REMOVED***"messageerror",***REMOVED***error:***REMOVED***Error):***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***...args:***REMOVED***any[]):***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***on(event:***REMOVED***"close",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***on(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***on(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***on(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***once(event:***REMOVED***"close",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***once(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***once(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***once(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependListener(event:***REMOVED***"close",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependListener(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependListener(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependListener(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependOnceListener(event:***REMOVED***"close",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependOnceListener(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependOnceListener(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependOnceListener(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeListener(event:***REMOVED***"close",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeListener(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeListener(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeListener(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***off(event:***REMOVED***"close",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***off(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***off(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***off(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addEventListener:***REMOVED***EventTarget["addEventListener"];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dispatchEvent:***REMOVED***EventTarget["dispatchEvent"];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeEventListener:***REMOVED***EventTarget["removeEventListener"];
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***interface***REMOVED***WorkerOptions***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***List***REMOVED***of***REMOVED***arguments***REMOVED***which***REMOVED***would***REMOVED***be***REMOVED***stringified***REMOVED***and***REMOVED***appended***REMOVED***to
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***`process.argv`***REMOVED***in***REMOVED***the***REMOVED***worker.***REMOVED***This***REMOVED***is***REMOVED***mostly***REMOVED***similar***REMOVED***to***REMOVED***the***REMOVED***`workerData`
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***but***REMOVED***the***REMOVED***values***REMOVED***will***REMOVED***be***REMOVED***available***REMOVED***on***REMOVED***the***REMOVED***global***REMOVED***`process.argv`***REMOVED***as***REMOVED***if***REMOVED***they
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***were***REMOVED***passed***REMOVED***as***REMOVED***CLI***REMOVED***options***REMOVED***to***REMOVED***the***REMOVED***script.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***argv?:***REMOVED***any[]***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env?:***REMOVED***NodeJS.Dict<string>***REMOVED***|***REMOVED***typeof***REMOVED***SHARE_ENV***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***eval?:***REMOVED***boolean***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***workerData?:***REMOVED***any;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***stdin?:***REMOVED***boolean***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***stdout?:***REMOVED***boolean***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***stderr?:***REMOVED***boolean***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***execArgv?:***REMOVED***string[]***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***resourceLimits?:***REMOVED***ResourceLimits***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Additional***REMOVED***data***REMOVED***to***REMOVED***send***REMOVED***in***REMOVED***the***REMOVED***first***REMOVED***worker***REMOVED***message.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***transferList?:***REMOVED***Transferable[]***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@default***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***trackUnmanagedFds?:***REMOVED***boolean***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***An***REMOVED***optional***REMOVED***`name`***REMOVED***to***REMOVED***be***REMOVED***appended***REMOVED***to***REMOVED***the***REMOVED***worker***REMOVED***title
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***for***REMOVED***debuggin/identification***REMOVED***purposes,***REMOVED***making***REMOVED***the***REMOVED***final***REMOVED***title***REMOVED***as
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***`[worker***REMOVED***${id}]***REMOVED***${name}`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***name?:***REMOVED***string***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***interface***REMOVED***ResourceLimits***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***The***REMOVED***maximum***REMOVED***size***REMOVED***of***REMOVED***a***REMOVED***heap***REMOVED***space***REMOVED***for***REMOVED***recently***REMOVED***created***REMOVED***objects.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***maxYoungGenerationSizeMb?:***REMOVED***number***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***The***REMOVED***maximum***REMOVED***size***REMOVED***of***REMOVED***the***REMOVED***main***REMOVED***heap***REMOVED***in***REMOVED***MB.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***maxOldGenerationSizeMb?:***REMOVED***number***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***The***REMOVED***size***REMOVED***of***REMOVED***a***REMOVED***pre-allocated***REMOVED***memory***REMOVED***range***REMOVED***used***REMOVED***for***REMOVED***generated***REMOVED***code.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***codeRangeSizeMb?:***REMOVED***number***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***The***REMOVED***default***REMOVED***maximum***REMOVED***stack***REMOVED***size***REMOVED***for***REMOVED***the***REMOVED***thread.***REMOVED***Small***REMOVED***values***REMOVED***may***REMOVED***lead***REMOVED***to***REMOVED***unusable***REMOVED***Worker***REMOVED***instances.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@default***REMOVED***4
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***stackSizeMb?:***REMOVED***number***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***The***REMOVED***`Worker`***REMOVED***class***REMOVED***represents***REMOVED***an***REMOVED***independent***REMOVED***JavaScript***REMOVED***execution***REMOVED***thread.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Most***REMOVED***Node.js***REMOVED***APIs***REMOVED***are***REMOVED***available***REMOVED***inside***REMOVED***of***REMOVED***it.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Notable***REMOVED***differences***REMOVED***inside***REMOVED***a***REMOVED***Worker***REMOVED***environment***REMOVED***are:
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***The***REMOVED***`process.stdin`,***REMOVED***`process.stdout`,***REMOVED***and***REMOVED***`process.stderr`***REMOVED***streams***REMOVED***may***REMOVED***be***REMOVED***redirected***REMOVED***by***REMOVED***the***REMOVED***parent***REMOVED***thread.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***The***REMOVED***`import***REMOVED***{***REMOVED***isMainThread***REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads'`***REMOVED***property***REMOVED***is***REMOVED***set***REMOVED***to***REMOVED***`false`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***The***REMOVED***`import***REMOVED***{***REMOVED***parentPort***REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads'`***REMOVED***message***REMOVED***port***REMOVED***is***REMOVED***available.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***`process.exit()`***REMOVED***does***REMOVED***not***REMOVED***stop***REMOVED***the***REMOVED***whole***REMOVED***program,***REMOVED***just***REMOVED***the***REMOVED***single***REMOVED***thread,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***and***REMOVED***`process.abort()`***REMOVED***is***REMOVED***not***REMOVED***available.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***`process.chdir()`***REMOVED***and***REMOVED***`process`***REMOVED***methods***REMOVED***that***REMOVED***set***REMOVED***group***REMOVED***or***REMOVED***user***REMOVED***ids
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***are***REMOVED***not***REMOVED***available.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***`process.env`***REMOVED***is***REMOVED***a***REMOVED***copy***REMOVED***of***REMOVED***the***REMOVED***parent***REMOVED***thread's***REMOVED***environment***REMOVED***variables,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***unless***REMOVED***otherwise***REMOVED***specified.***REMOVED***Changes***REMOVED***to***REMOVED***one***REMOVED***copy***REMOVED***are***REMOVED***not***REMOVED***visible***REMOVED***in***REMOVED***other
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***threads,***REMOVED***and***REMOVED***are***REMOVED***not***REMOVED***visible***REMOVED***to***REMOVED***native***REMOVED***add-ons***REMOVED***(unless***REMOVED***`worker.SHARE_ENV`***REMOVED***is***REMOVED***passed***REMOVED***as***REMOVED***the***REMOVED***`env`***REMOVED***option***REMOVED***to***REMOVED***the***REMOVED***`Worker`***REMOVED***constructor).***REMOVED***On***REMOVED***Windows,***REMOVED***unlike***REMOVED***the***REMOVED***main***REMOVED***thread,***REMOVED***a***REMOVED***copy***REMOVED***of***REMOVED***the
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***environment***REMOVED***variables***REMOVED***operates***REMOVED***in***REMOVED***a***REMOVED***case-sensitive***REMOVED***manner.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***`process.title`***REMOVED***cannot***REMOVED***be***REMOVED***modified.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***Signals***REMOVED***are***REMOVED***not***REMOVED***delivered***REMOVED***through***REMOVED***`process.on('...')`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***Execution***REMOVED***may***REMOVED***stop***REMOVED***at***REMOVED***any***REMOVED***point***REMOVED***as***REMOVED***a***REMOVED***result***REMOVED***of***REMOVED***`worker.terminate()`***REMOVED***being***REMOVED***invoked.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***IPC***REMOVED***channels***REMOVED***from***REMOVED***parent***REMOVED***processes***REMOVED***are***REMOVED***not***REMOVED***accessible.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***The***REMOVED***`trace_events`***REMOVED***module***REMOVED***is***REMOVED***not***REMOVED***supported.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED*******REMOVED***Native***REMOVED***add-ons***REMOVED***can***REMOVED***only***REMOVED***be***REMOVED***loaded***REMOVED***from***REMOVED***multiple***REMOVED***threads***REMOVED***if***REMOVED***they***REMOVED***fulfill***REMOVED***`certain***REMOVED***conditions`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Creating***REMOVED***`Worker`***REMOVED***instances***REMOVED***inside***REMOVED***of***REMOVED***other***REMOVED***`Worker`s***REMOVED***is***REMOVED***possible.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Like***REMOVED***[Web***REMOVED***Workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API)***REMOVED***and***REMOVED***the***REMOVED***`node:cluster***REMOVED***module`,***REMOVED***two-way***REMOVED***communication
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***can***REMOVED***be***REMOVED***achieved***REMOVED***through***REMOVED***inter-thread***REMOVED***message***REMOVED***passing.***REMOVED***Internally,***REMOVED***a***REMOVED***`Worker`***REMOVED***has
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***a***REMOVED***built-in***REMOVED***pair***REMOVED***of***REMOVED***`MessagePort`***REMOVED***s***REMOVED***that***REMOVED***are***REMOVED***already***REMOVED***associated***REMOVED***with***REMOVED***each
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***other***REMOVED***when***REMOVED***the***REMOVED***`Worker`***REMOVED***is***REMOVED***created.***REMOVED***While***REMOVED***the***REMOVED***`MessagePort`***REMOVED***object***REMOVED***on***REMOVED***the***REMOVED***parent
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***side***REMOVED***is***REMOVED***not***REMOVED***directly***REMOVED***exposed,***REMOVED***its***REMOVED***functionalities***REMOVED***are***REMOVED***exposed***REMOVED***through***REMOVED***`worker.postMessage()`***REMOVED***and***REMOVED***the***REMOVED***`worker.on('message')`***REMOVED***event
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***on***REMOVED***the***REMOVED***`Worker`***REMOVED***object***REMOVED***for***REMOVED***the***REMOVED***parent***REMOVED***thread.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***To***REMOVED***create***REMOVED***custom***REMOVED***messaging***REMOVED***channels***REMOVED***(which***REMOVED***is***REMOVED***encouraged***REMOVED***over***REMOVED***using***REMOVED***the***REMOVED***default
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***global***REMOVED***channel***REMOVED***because***REMOVED***it***REMOVED***facilitates***REMOVED***separation***REMOVED***of***REMOVED***concerns),***REMOVED***users***REMOVED***can***REMOVED***create
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***a***REMOVED***`MessageChannel`***REMOVED***object***REMOVED***on***REMOVED***either***REMOVED***thread***REMOVED***and***REMOVED***pass***REMOVED***one***REMOVED***of***REMOVED***the`MessagePort`s***REMOVED***on***REMOVED***that***REMOVED***`MessageChannel`***REMOVED***to***REMOVED***the***REMOVED***other***REMOVED***thread***REMOVED***through***REMOVED***a
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***pre-existing***REMOVED***channel,***REMOVED***such***REMOVED***as***REMOVED***the***REMOVED***global***REMOVED***one.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***See***REMOVED***`port.postMessage()`***REMOVED***for***REMOVED***more***REMOVED***information***REMOVED***on***REMOVED***how***REMOVED***messages***REMOVED***are***REMOVED***passed,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***and***REMOVED***what***REMOVED***kind***REMOVED***of***REMOVED***JavaScript***REMOVED***values***REMOVED***can***REMOVED***be***REMOVED***successfully***REMOVED***transported***REMOVED***through
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***the***REMOVED***thread***REMOVED***barrier.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```js
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***import***REMOVED***assert***REMOVED***from***REMOVED***'node:assert';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***import***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***Worker,***REMOVED***MessageChannel,***REMOVED***MessagePort,***REMOVED***isMainThread,***REMOVED***parentPort,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***if***REMOVED***(isMainThread)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***const***REMOVED***worker***REMOVED***=***REMOVED***new***REMOVED***Worker(__filename);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***const***REMOVED***subChannel***REMOVED***=***REMOVED***new***REMOVED***MessageChannel();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***worker.postMessage({***REMOVED***hereIsYourPort:***REMOVED***subChannel.port1***REMOVED***},***REMOVED***[subChannel.port1]);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***subChannel.port2.on('message',***REMOVED***(value)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('received:',***REMOVED***value);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***parentPort.once('message',***REMOVED***(value)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***assert(value.hereIsYourPort***REMOVED***instanceof***REMOVED***MessagePort);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***value.hereIsYourPort.postMessage('the***REMOVED***worker***REMOVED***is***REMOVED***sending***REMOVED***this');
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***value.hereIsYourPort.close();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***class***REMOVED***Worker***REMOVED***extends***REMOVED***EventEmitter***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***`stdin:***REMOVED***true`***REMOVED***was***REMOVED***passed***REMOVED***to***REMOVED***the***REMOVED***`Worker`***REMOVED***constructor,***REMOVED***this***REMOVED***is***REMOVED***a
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***writable***REMOVED***stream.***REMOVED***The***REMOVED***data***REMOVED***written***REMOVED***to***REMOVED***this***REMOVED***stream***REMOVED***will***REMOVED***be***REMOVED***made***REMOVED***available***REMOVED***in
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***the***REMOVED***worker***REMOVED***thread***REMOVED***as***REMOVED***`process.stdin`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***readonly***REMOVED***stdin:***REMOVED***Writable***REMOVED***|***REMOVED***null;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***This***REMOVED***is***REMOVED***a***REMOVED***readable***REMOVED***stream***REMOVED***which***REMOVED***contains***REMOVED***data***REMOVED***written***REMOVED***to***REMOVED***`process.stdout`***REMOVED***inside***REMOVED***the***REMOVED***worker***REMOVED***thread.***REMOVED***If***REMOVED***`stdout:***REMOVED***true`***REMOVED***was***REMOVED***not***REMOVED***passed***REMOVED***to***REMOVED***the***REMOVED***`Worker`***REMOVED***constructor,***REMOVED***then***REMOVED***data***REMOVED***is***REMOVED***piped***REMOVED***to***REMOVED***the
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***parent***REMOVED***thread's***REMOVED***`process.stdout`***REMOVED***stream.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***readonly***REMOVED***stdout:***REMOVED***Readable;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***This***REMOVED***is***REMOVED***a***REMOVED***readable***REMOVED***stream***REMOVED***which***REMOVED***contains***REMOVED***data***REMOVED***written***REMOVED***to***REMOVED***`process.stderr`***REMOVED***inside***REMOVED***the***REMOVED***worker***REMOVED***thread.***REMOVED***If***REMOVED***`stderr:***REMOVED***true`***REMOVED***was***REMOVED***not***REMOVED***passed***REMOVED***to***REMOVED***the***REMOVED***`Worker`***REMOVED***constructor,***REMOVED***then***REMOVED***data***REMOVED***is***REMOVED***piped***REMOVED***to***REMOVED***the
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***parent***REMOVED***thread's***REMOVED***`process.stderr`***REMOVED***stream.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***readonly***REMOVED***stderr:***REMOVED***Readable;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***An***REMOVED***integer***REMOVED***identifier***REMOVED***for***REMOVED***the***REMOVED***referenced***REMOVED***thread.***REMOVED***Inside***REMOVED***the***REMOVED***worker***REMOVED***thread,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***it***REMOVED***is***REMOVED***available***REMOVED***as***REMOVED***`import***REMOVED***{***REMOVED***threadId***REMOVED***}***REMOVED***from***REMOVED***'node:node:worker_threads'`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***This***REMOVED***value***REMOVED***is***REMOVED***unique***REMOVED***for***REMOVED***each***REMOVED***`Worker`***REMOVED***instance***REMOVED***inside***REMOVED***a***REMOVED***single***REMOVED***process.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***readonly***REMOVED***threadId:***REMOVED***number;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Provides***REMOVED***the***REMOVED***set***REMOVED***of***REMOVED***JS***REMOVED***engine***REMOVED***resource***REMOVED***constraints***REMOVED***for***REMOVED***this***REMOVED***Worker***REMOVED***thread.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***the***REMOVED***`resourceLimits`***REMOVED***option***REMOVED***was***REMOVED***passed***REMOVED***to***REMOVED***the***REMOVED***`Worker`***REMOVED***constructor,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***this***REMOVED***matches***REMOVED***its***REMOVED***values.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***the***REMOVED***worker***REMOVED***has***REMOVED***stopped,***REMOVED***the***REMOVED***return***REMOVED***value***REMOVED***is***REMOVED***an***REMOVED***empty***REMOVED***object.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v13.2.0,***REMOVED***v12.16.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***readonly***REMOVED***resourceLimits?:***REMOVED***ResourceLimits***REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***An***REMOVED***object***REMOVED***that***REMOVED***can***REMOVED***be***REMOVED***used***REMOVED***to***REMOVED***query***REMOVED***performance***REMOVED***information***REMOVED***from***REMOVED***a***REMOVED***worker
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***instance.***REMOVED***Similar***REMOVED***to***REMOVED***`perf_hooks.performance`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v15.1.0,***REMOVED***v14.17.0,***REMOVED***v12.22.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***readonly***REMOVED***performance:***REMOVED***WorkerPerformance;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***filename***REMOVED******REMOVED***The***REMOVED***path***REMOVED***to***REMOVED***the***REMOVED***Worker’s***REMOVED***main***REMOVED***script***REMOVED***or***REMOVED***module.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***Must***REMOVED***be***REMOVED***either***REMOVED***an***REMOVED***absolute***REMOVED***path***REMOVED***or***REMOVED***a***REMOVED***relative***REMOVED***path***REMOVED***(i.e.***REMOVED***relative***REMOVED***to***REMOVED***the***REMOVED***current***REMOVED***working***REMOVED***directory)***REMOVED***starting***REMOVED***with***REMOVED***./***REMOVED***or***REMOVED***../,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***or***REMOVED***a***REMOVED***WHATWG***REMOVED***URL***REMOVED***object***REMOVED***using***REMOVED***file:***REMOVED***protocol.***REMOVED***If***REMOVED***options.eval***REMOVED***is***REMOVED***true,***REMOVED***this***REMOVED***is***REMOVED***a***REMOVED***string***REMOVED***containing***REMOVED***JavaScript***REMOVED***code***REMOVED***rather***REMOVED***than***REMOVED***a***REMOVED***path.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***constructor(filename:***REMOVED***string***REMOVED***|***REMOVED***URL,***REMOVED***options?:***REMOVED***WorkerOptions);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Send***REMOVED***a***REMOVED***message***REMOVED***to***REMOVED***the***REMOVED***worker***REMOVED***that***REMOVED***is***REMOVED***received***REMOVED***via***REMOVED***`require('node:worker_threads').parentPort.on('message')`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***See***REMOVED***`port.postMessage()`***REMOVED***for***REMOVED***more***REMOVED***details.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***postMessage(value:***REMOVED***any,***REMOVED***transferList?:***REMOVED***readonly***REMOVED***Transferable[]):***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Sends***REMOVED***a***REMOVED***value***REMOVED***to***REMOVED***another***REMOVED***worker,***REMOVED***identified***REMOVED***by***REMOVED***its***REMOVED***thread***REMOVED***ID.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***threadId***REMOVED***The***REMOVED***target***REMOVED***thread***REMOVED***ID.***REMOVED***If***REMOVED***the***REMOVED***thread***REMOVED***ID***REMOVED***is***REMOVED***invalid,***REMOVED***a***REMOVED***`ERR_WORKER_MESSAGING_FAILED`***REMOVED***error***REMOVED***will***REMOVED***be***REMOVED***thrown.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***the***REMOVED***target***REMOVED***thread***REMOVED***ID***REMOVED***is***REMOVED***the***REMOVED***current***REMOVED***thread***REMOVED***ID,***REMOVED***a***REMOVED***`ERR_WORKER_MESSAGING_SAME_THREAD`***REMOVED***error***REMOVED***will***REMOVED***be***REMOVED***thrown.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***value***REMOVED***The***REMOVED***value***REMOVED***to***REMOVED***send.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***transferList***REMOVED***If***REMOVED***one***REMOVED***or***REMOVED***more***REMOVED***`MessagePort`-like***REMOVED***objects***REMOVED***are***REMOVED***passed***REMOVED***in***REMOVED***value,***REMOVED***a***REMOVED***`transferList`***REMOVED***is***REMOVED***required***REMOVED***for***REMOVED***those***REMOVED***items
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***or***REMOVED***`ERR_MISSING_MESSAGE_PORT_IN_TRANSFER_LIST`***REMOVED***is***REMOVED***thrown.***REMOVED***See***REMOVED***`port.postMessage()`***REMOVED***for***REMOVED***more***REMOVED***information.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***timeout***REMOVED***Time***REMOVED***to***REMOVED***wait***REMOVED***for***REMOVED***the***REMOVED***message***REMOVED***to***REMOVED***be***REMOVED***delivered***REMOVED***in***REMOVED***milliseconds.***REMOVED***By***REMOVED***default***REMOVED***it's***REMOVED***`undefined`,***REMOVED***which***REMOVED***means***REMOVED***wait***REMOVED***forever.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***the***REMOVED***operation***REMOVED***times***REMOVED***out,***REMOVED***a***REMOVED***`ERR_WORKER_MESSAGING_TIMEOUT`***REMOVED***error***REMOVED***is***REMOVED***thrown.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v20.19.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***postMessageToThread(threadId:***REMOVED***number,***REMOVED***value:***REMOVED***any,***REMOVED***timeout?:***REMOVED***number):***REMOVED***Promise<void>;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***postMessageToThread(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***threadId:***REMOVED***number,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***value:***REMOVED***any,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***transferList:***REMOVED***readonly***REMOVED***Transferable[],
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***timeout?:***REMOVED***number,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***):***REMOVED***Promise<void>;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Opposite***REMOVED***of***REMOVED***`unref()`,***REMOVED***calling***REMOVED***`ref()`***REMOVED***on***REMOVED***a***REMOVED***previously***REMOVED***`unref()`ed***REMOVED***worker***REMOVED***does***REMOVED***_not_***REMOVED***let***REMOVED***the***REMOVED***program***REMOVED***exit***REMOVED***if***REMOVED***it's***REMOVED***the***REMOVED***only***REMOVED***active***REMOVED***handle***REMOVED***left***REMOVED***(the***REMOVED***default
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***behavior).***REMOVED***If***REMOVED***the***REMOVED***worker***REMOVED***is***REMOVED***`ref()`ed,***REMOVED***calling***REMOVED***`ref()`***REMOVED***again***REMOVED***has
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***no***REMOVED***effect.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ref():***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Calling***REMOVED***`unref()`***REMOVED***on***REMOVED***a***REMOVED***worker***REMOVED***allows***REMOVED***the***REMOVED***thread***REMOVED***to***REMOVED***exit***REMOVED***if***REMOVED***this***REMOVED***is***REMOVED***the***REMOVED***only
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***active***REMOVED***handle***REMOVED***in***REMOVED***the***REMOVED***event***REMOVED***system.***REMOVED***If***REMOVED***the***REMOVED***worker***REMOVED***is***REMOVED***already***REMOVED***`unref()`ed***REMOVED***calling***REMOVED***`unref()`***REMOVED***again***REMOVED***has***REMOVED***no***REMOVED***effect.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***unref():***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Stop***REMOVED***all***REMOVED***JavaScript***REMOVED***execution***REMOVED***in***REMOVED***the***REMOVED***worker***REMOVED***thread***REMOVED***as***REMOVED***soon***REMOVED***as***REMOVED***possible.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Returns***REMOVED***a***REMOVED***Promise***REMOVED***for***REMOVED***the***REMOVED***exit***REMOVED***code***REMOVED***that***REMOVED***is***REMOVED***fulfilled***REMOVED***when***REMOVED***the***REMOVED***`'exit'***REMOVED***event`***REMOVED***is***REMOVED***emitted.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v10.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***terminate():***REMOVED***Promise<number>;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Returns***REMOVED***a***REMOVED***readable***REMOVED***stream***REMOVED***for***REMOVED***a***REMOVED***V8***REMOVED***snapshot***REMOVED***of***REMOVED***the***REMOVED***current***REMOVED***state***REMOVED***of***REMOVED***the***REMOVED***Worker.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***See***REMOVED***`v8.getHeapSnapshot()`***REMOVED***for***REMOVED***more***REMOVED***details.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***the***REMOVED***Worker***REMOVED***thread***REMOVED***is***REMOVED***no***REMOVED***longer***REMOVED***running,***REMOVED***which***REMOVED***may***REMOVED***occur***REMOVED***before***REMOVED***the***REMOVED***`'exit'***REMOVED***event`***REMOVED***is***REMOVED***emitted,***REMOVED***the***REMOVED***returned***REMOVED***`Promise`***REMOVED***is***REMOVED***rejected
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***immediately***REMOVED***with***REMOVED***an***REMOVED***`ERR_WORKER_NOT_RUNNING`***REMOVED***error.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v13.9.0,***REMOVED***v12.17.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@return***REMOVED***A***REMOVED***promise***REMOVED***for***REMOVED***a***REMOVED***Readable***REMOVED***Stream***REMOVED***containing***REMOVED***a***REMOVED***V8***REMOVED***heap***REMOVED***snapshot
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***getHeapSnapshot():***REMOVED***Promise<Readable>;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addListener(event:***REMOVED***"error",***REMOVED***listener:***REMOVED***(err:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addListener(event:***REMOVED***"exit",***REMOVED***listener:***REMOVED***(exitCode:***REMOVED***number)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addListener(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addListener(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addListener(event:***REMOVED***"online",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addListener(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(event:***REMOVED***"error",***REMOVED***err:***REMOVED***Error):***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(event:***REMOVED***"exit",***REMOVED***exitCode:***REMOVED***number):***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(event:***REMOVED***"message",***REMOVED***value:***REMOVED***any):***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(event:***REMOVED***"messageerror",***REMOVED***error:***REMOVED***Error):***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(event:***REMOVED***"online"):***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***...args:***REMOVED***any[]):***REMOVED***boolean;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***on(event:***REMOVED***"error",***REMOVED***listener:***REMOVED***(err:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***on(event:***REMOVED***"exit",***REMOVED***listener:***REMOVED***(exitCode:***REMOVED***number)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***on(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***on(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***on(event:***REMOVED***"online",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***on(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***once(event:***REMOVED***"error",***REMOVED***listener:***REMOVED***(err:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***once(event:***REMOVED***"exit",***REMOVED***listener:***REMOVED***(exitCode:***REMOVED***number)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***once(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***once(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***once(event:***REMOVED***"online",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***once(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependListener(event:***REMOVED***"error",***REMOVED***listener:***REMOVED***(err:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependListener(event:***REMOVED***"exit",***REMOVED***listener:***REMOVED***(exitCode:***REMOVED***number)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependListener(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependListener(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependListener(event:***REMOVED***"online",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependListener(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependOnceListener(event:***REMOVED***"error",***REMOVED***listener:***REMOVED***(err:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependOnceListener(event:***REMOVED***"exit",***REMOVED***listener:***REMOVED***(exitCode:***REMOVED***number)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependOnceListener(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependOnceListener(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependOnceListener(event:***REMOVED***"online",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prependOnceListener(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeListener(event:***REMOVED***"error",***REMOVED***listener:***REMOVED***(err:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeListener(event:***REMOVED***"exit",***REMOVED***listener:***REMOVED***(exitCode:***REMOVED***number)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeListener(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeListener(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeListener(event:***REMOVED***"online",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***removeListener(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***off(event:***REMOVED***"error",***REMOVED***listener:***REMOVED***(err:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***off(event:***REMOVED***"exit",***REMOVED***listener:***REMOVED***(exitCode:***REMOVED***number)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***off(event:***REMOVED***"message",***REMOVED***listener:***REMOVED***(value:***REMOVED***any)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***off(event:***REMOVED***"messageerror",***REMOVED***listener:***REMOVED***(error:***REMOVED***Error)***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***off(event:***REMOVED***"online",***REMOVED***listener:***REMOVED***()***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***off(event:***REMOVED***string***REMOVED***|***REMOVED***symbol,***REMOVED***listener:***REMOVED***(...args:***REMOVED***any[])***REMOVED***=>***REMOVED***void):***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***interface***REMOVED***BroadcastChannel***REMOVED***extends***REMOVED***NodeJS.RefCounted***REMOVED***{}
***REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Instances***REMOVED***of***REMOVED***`BroadcastChannel`***REMOVED***allow***REMOVED***asynchronous***REMOVED***one-to-many***REMOVED***communication
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***with***REMOVED***all***REMOVED***other***REMOVED***`BroadcastChannel`***REMOVED***instances***REMOVED***bound***REMOVED***to***REMOVED***the***REMOVED***same***REMOVED***channel***REMOVED***name.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```js
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***'use***REMOVED***strict';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***import***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***isMainThread,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***BroadcastChannel,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***Worker,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***bc***REMOVED***=***REMOVED***new***REMOVED***BroadcastChannel('hello');
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***if***REMOVED***(isMainThread)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***let***REMOVED***c***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***bc.onmessage***REMOVED***=***REMOVED***(event)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log(event.data);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(++c***REMOVED***===***REMOVED***10)***REMOVED***bc.close();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***n***REMOVED***=***REMOVED***0;***REMOVED***n***REMOVED***<***REMOVED***10;***REMOVED***n++)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***new***REMOVED***Worker(__filename);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***bc.postMessage('hello***REMOVED***from***REMOVED***every***REMOVED***worker');
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***bc.close();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v15.4.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***class***REMOVED***BroadcastChannel***REMOVED***extends***REMOVED***EventTarget***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***readonly***REMOVED***name:***REMOVED***string;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Invoked***REMOVED***with***REMOVED***a***REMOVED***single***REMOVED***\`MessageEvent\`***REMOVED***argument***REMOVED***when***REMOVED***a***REMOVED***message***REMOVED***is***REMOVED***received.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v15.4.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onmessage:***REMOVED***(message:***REMOVED***MessageEvent)***REMOVED***=>***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Invoked***REMOVED***with***REMOVED***a***REMOVED***received***REMOVED***message***REMOVED***cannot***REMOVED***be***REMOVED***deserialized.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v15.4.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onmessageerror:***REMOVED***(message:***REMOVED***MessageEvent)***REMOVED***=>***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***constructor(name:***REMOVED***string);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Closes***REMOVED***the***REMOVED***`BroadcastChannel`***REMOVED***connection.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v15.4.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***close():***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v15.4.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***message***REMOVED***Any***REMOVED***cloneable***REMOVED***JavaScript***REMOVED***value.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***postMessage(message:***REMOVED***unknown):***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Mark***REMOVED***an***REMOVED***object***REMOVED***as***REMOVED***not***REMOVED***transferable.***REMOVED***If***REMOVED***`object`***REMOVED***occurs***REMOVED***in***REMOVED***the***REMOVED***transfer***REMOVED***list***REMOVED***of
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***a***REMOVED***`port.postMessage()`***REMOVED***call,***REMOVED***it***REMOVED***is***REMOVED***ignored.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***In***REMOVED***particular,***REMOVED***this***REMOVED***makes***REMOVED***sense***REMOVED***for***REMOVED***objects***REMOVED***that***REMOVED***can***REMOVED***be***REMOVED***cloned,***REMOVED***rather***REMOVED***than
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***transferred,***REMOVED***and***REMOVED***which***REMOVED***are***REMOVED***used***REMOVED***by***REMOVED***other***REMOVED***objects***REMOVED***on***REMOVED***the***REMOVED***sending***REMOVED***side.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***For***REMOVED***example,***REMOVED***Node.js***REMOVED***marks***REMOVED***the***REMOVED***`ArrayBuffer`s***REMOVED***it***REMOVED***uses***REMOVED***for***REMOVED***its***REMOVED***`Buffer***REMOVED***pool`***REMOVED***with***REMOVED***this.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***This***REMOVED***operation***REMOVED***cannot***REMOVED***be***REMOVED***undone.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```js
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***import***REMOVED***{***REMOVED***MessageChannel,***REMOVED***markAsUntransferable***REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***pooledBuffer***REMOVED***=***REMOVED***new***REMOVED***ArrayBuffer(8);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***typedArray1***REMOVED***=***REMOVED***new***REMOVED***Uint8Array(pooledBuffer);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***typedArray2***REMOVED***=***REMOVED***new***REMOVED***Float64Array(pooledBuffer);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***markAsUntransferable(pooledBuffer);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***{***REMOVED***port1***REMOVED***}***REMOVED***=***REMOVED***new***REMOVED***MessageChannel();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port1.postMessage(typedArray1,***REMOVED***[***REMOVED***typedArray1.buffer***REMOVED***]);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***The***REMOVED***following***REMOVED***line***REMOVED***prints***REMOVED***the***REMOVED***contents***REMOVED***of***REMOVED***typedArray1***REMOVED***--***REMOVED***it***REMOVED***still***REMOVED***owns
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***its***REMOVED***memory***REMOVED***and***REMOVED***has***REMOVED***been***REMOVED***cloned,***REMOVED***not***REMOVED***transferred.***REMOVED***Without
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***`markAsUntransferable()`,***REMOVED***this***REMOVED***would***REMOVED***print***REMOVED***an***REMOVED***empty***REMOVED***Uint8Array.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***typedArray2***REMOVED***is***REMOVED***intact***REMOVED***as***REMOVED***well.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***console.log(typedArray1);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***console.log(typedArray2);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***There***REMOVED***is***REMOVED***no***REMOVED***equivalent***REMOVED***to***REMOVED***this***REMOVED***API***REMOVED***in***REMOVED***browsers.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v14.5.0,***REMOVED***v12.19.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***function***REMOVED***markAsUntransferable(object:***REMOVED***object):***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Transfer***REMOVED***a***REMOVED***`MessagePort`***REMOVED***to***REMOVED***a***REMOVED***different***REMOVED***`vm`***REMOVED***Context.***REMOVED***The***REMOVED***original***REMOVED***`port`***REMOVED***object***REMOVED***is***REMOVED***rendered***REMOVED***unusable,***REMOVED***and***REMOVED***the***REMOVED***returned***REMOVED***`MessagePort`***REMOVED***instance
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***takes***REMOVED***its***REMOVED***place.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***The***REMOVED***returned***REMOVED***`MessagePort`***REMOVED***is***REMOVED***an***REMOVED***object***REMOVED***in***REMOVED***the***REMOVED***target***REMOVED***context***REMOVED***and
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***inherits***REMOVED***from***REMOVED***its***REMOVED***global***REMOVED***`Object`***REMOVED***class.***REMOVED***Objects***REMOVED***passed***REMOVED***to***REMOVED***the***REMOVED***[`port.onmessage()`](https://developer.mozilla.org/en-US/docs/Web/API/MessagePort/onmessage)***REMOVED***listener***REMOVED***are***REMOVED***also***REMOVED***created***REMOVED***in***REMOVED***the
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***target***REMOVED***context
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***and***REMOVED***inherit***REMOVED***from***REMOVED***its***REMOVED***global***REMOVED***`Object`***REMOVED***class.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***However,***REMOVED***the***REMOVED***created***REMOVED***`MessagePort`***REMOVED***no***REMOVED***longer***REMOVED***inherits***REMOVED***from***REMOVED***[`EventTarget`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget),***REMOVED***and***REMOVED***only
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***[`port.onmessage()`](https://developer.mozilla.org/en-US/docs/Web/API/MessagePort/onmessage)***REMOVED***can***REMOVED***be***REMOVED***used***REMOVED***to***REMOVED***receive
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***events***REMOVED***using***REMOVED***it.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v11.13.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***port***REMOVED***The***REMOVED***message***REMOVED***port***REMOVED***to***REMOVED***transfer.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***contextifiedSandbox***REMOVED***A***REMOVED***`contextified`***REMOVED***object***REMOVED***as***REMOVED***returned***REMOVED***by***REMOVED***the***REMOVED***`vm.createContext()`***REMOVED***method.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***function***REMOVED***moveMessagePortToContext(port:***REMOVED***MessagePort,***REMOVED***contextifiedSandbox:***REMOVED***Context):***REMOVED***MessagePort;
***REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Receive***REMOVED***a***REMOVED***single***REMOVED***message***REMOVED***from***REMOVED***a***REMOVED***given***REMOVED***`MessagePort`.***REMOVED***If***REMOVED***no***REMOVED***message***REMOVED***is***REMOVED***available,`undefined`***REMOVED***is***REMOVED***returned,***REMOVED***otherwise***REMOVED***an***REMOVED***object***REMOVED***with***REMOVED***a***REMOVED***single***REMOVED***`message`***REMOVED***property
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***that***REMOVED***contains***REMOVED***the***REMOVED***message***REMOVED***payload,***REMOVED***corresponding***REMOVED***to***REMOVED***the***REMOVED***oldest***REMOVED***message***REMOVED***in***REMOVED***the***REMOVED***`MessagePort`'s***REMOVED***queue.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```js
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***import***REMOVED***{***REMOVED***MessageChannel,***REMOVED***receiveMessageOnPort***REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***const***REMOVED***{***REMOVED***port1,***REMOVED***port2***REMOVED***}***REMOVED***=***REMOVED***new***REMOVED***MessageChannel();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***port1.postMessage({***REMOVED***hello:***REMOVED***'world'***REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***console.log(receiveMessageOnPort(port2));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***Prints:***REMOVED***{***REMOVED***message:***REMOVED***{***REMOVED***hello:***REMOVED***'world'***REMOVED***}***REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***console.log(receiveMessageOnPort(port2));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***//***REMOVED***Prints:***REMOVED***undefined
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***When***REMOVED***this***REMOVED***function***REMOVED***is***REMOVED***used,***REMOVED***no***REMOVED***`'message'`***REMOVED***event***REMOVED***is***REMOVED***emitted***REMOVED***and***REMOVED***the***REMOVED***`onmessage`***REMOVED***listener***REMOVED***is***REMOVED***not***REMOVED***invoked.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v12.3.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***function***REMOVED***receiveMessageOnPort(port:***REMOVED***MessagePort):
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***message:***REMOVED***any;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***undefined;
***REMOVED******REMOVED******REMOVED******REMOVED***type***REMOVED***Serializable***REMOVED***=***REMOVED***string***REMOVED***|***REMOVED***object***REMOVED***|***REMOVED***number***REMOVED***|***REMOVED***boolean***REMOVED***|***REMOVED***bigint;
***REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Within***REMOVED***a***REMOVED***worker***REMOVED***thread,***REMOVED***`worker.getEnvironmentData()`***REMOVED***returns***REMOVED***a***REMOVED***clone
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***of***REMOVED***data***REMOVED***passed***REMOVED***to***REMOVED***the***REMOVED***spawning***REMOVED***thread's***REMOVED***`worker.setEnvironmentData()`.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Every***REMOVED***new***REMOVED***`Worker`***REMOVED***receives***REMOVED***its***REMOVED***own***REMOVED***copy***REMOVED***of***REMOVED***the***REMOVED***environment***REMOVED***data
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***automatically.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```js
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***import***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***Worker,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***isMainThread,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***setEnvironmentData,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***getEnvironmentData,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***if***REMOVED***(isMainThread)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***setEnvironmentData('Hello',***REMOVED***'World!');
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***const***REMOVED***worker***REMOVED***=***REMOVED***new***REMOVED***Worker(__filename);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED***console.log(getEnvironmentData('Hello'));***REMOVED******REMOVED***//***REMOVED***Prints***REMOVED***'World!'.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***```
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v15.12.0,***REMOVED***v14.18.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***key***REMOVED***Any***REMOVED***arbitrary,***REMOVED***cloneable***REMOVED***JavaScript***REMOVED***value***REMOVED***that***REMOVED***can***REMOVED***be***REMOVED***used***REMOVED***as***REMOVED***a***REMOVED***{Map}***REMOVED***key.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***function***REMOVED***getEnvironmentData(key:***REMOVED***Serializable):***REMOVED***Serializable;
***REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***The***REMOVED***`worker.setEnvironmentData()`***REMOVED***API***REMOVED***sets***REMOVED***the***REMOVED***content***REMOVED***of***REMOVED***`worker.getEnvironmentData()`***REMOVED***in***REMOVED***the***REMOVED***current***REMOVED***thread***REMOVED***and***REMOVED***all***REMOVED***new***REMOVED***`Worker`***REMOVED***instances***REMOVED***spawned***REMOVED***from***REMOVED***the***REMOVED***current***REMOVED***context.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v15.12.0,***REMOVED***v14.18.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***key***REMOVED***Any***REMOVED***arbitrary,***REMOVED***cloneable***REMOVED***JavaScript***REMOVED***value***REMOVED***that***REMOVED***can***REMOVED***be***REMOVED***used***REMOVED***as***REMOVED***a***REMOVED***{Map}***REMOVED***key.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***value***REMOVED***Any***REMOVED***arbitrary,***REMOVED***cloneable***REMOVED***JavaScript***REMOVED***value***REMOVED***that***REMOVED***will***REMOVED***be***REMOVED***cloned***REMOVED***and***REMOVED***passed***REMOVED***automatically***REMOVED***to***REMOVED***all***REMOVED***new***REMOVED***`Worker`***REMOVED***instances.***REMOVED***If***REMOVED***`value`***REMOVED***is***REMOVED***passed***REMOVED***as***REMOVED***`undefined`,***REMOVED***any***REMOVED***previously***REMOVED***set***REMOVED***value
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***for***REMOVED***the***REMOVED***`key`***REMOVED***will***REMOVED***be***REMOVED***deleted.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***function***REMOVED***setEnvironmentData(key:***REMOVED***Serializable,***REMOVED***value?:***REMOVED***Serializable):***REMOVED***void;
***REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***Sends***REMOVED***a***REMOVED***value***REMOVED***to***REMOVED***another***REMOVED***worker,***REMOVED***identified***REMOVED***by***REMOVED***its***REMOVED***thread***REMOVED***ID.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***threadId***REMOVED***The***REMOVED***target***REMOVED***thread***REMOVED***ID.***REMOVED***If***REMOVED***the***REMOVED***thread***REMOVED***ID***REMOVED***is***REMOVED***invalid,***REMOVED***a***REMOVED***`ERR_WORKER_MESSAGING_FAILED`***REMOVED***error***REMOVED***will***REMOVED***be***REMOVED***thrown.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***the***REMOVED***target***REMOVED***thread***REMOVED***ID***REMOVED***is***REMOVED***the***REMOVED***current***REMOVED***thread***REMOVED***ID,***REMOVED***a***REMOVED***`ERR_WORKER_MESSAGING_SAME_THREAD`***REMOVED***error***REMOVED***will***REMOVED***be***REMOVED***thrown.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***value***REMOVED***The***REMOVED***value***REMOVED***to***REMOVED***send.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***transferList***REMOVED***If***REMOVED***one***REMOVED***or***REMOVED***more***REMOVED***`MessagePort`-like***REMOVED***objects***REMOVED***are***REMOVED***passed***REMOVED***in***REMOVED***value,***REMOVED***a***REMOVED***`transferList`***REMOVED***is***REMOVED***required***REMOVED***for***REMOVED***those***REMOVED***items
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***or***REMOVED***`ERR_MISSING_MESSAGE_PORT_IN_TRANSFER_LIST`***REMOVED***is***REMOVED***thrown.***REMOVED***See***REMOVED***`port.postMessage()`***REMOVED***for***REMOVED***more***REMOVED***information.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***timeout***REMOVED***Time***REMOVED***to***REMOVED***wait***REMOVED***for***REMOVED***the***REMOVED***message***REMOVED***to***REMOVED***be***REMOVED***delivered***REMOVED***in***REMOVED***milliseconds.***REMOVED***By***REMOVED***default***REMOVED***it's***REMOVED***`undefined`,***REMOVED***which***REMOVED***means***REMOVED***wait***REMOVED***forever.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***If***REMOVED***the***REMOVED***operation***REMOVED***times***REMOVED***out,***REMOVED***a***REMOVED***`ERR_WORKER_MESSAGING_TIMEOUT`***REMOVED***error***REMOVED***is***REMOVED***thrown.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v22.5.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED***function***REMOVED***postMessageToThread(threadId:***REMOVED***number,***REMOVED***value:***REMOVED***any,***REMOVED***timeout?:***REMOVED***number):***REMOVED***Promise<void>;
***REMOVED******REMOVED******REMOVED******REMOVED***function***REMOVED***postMessageToThread(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***threadId:***REMOVED***number,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***value:***REMOVED***any,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***transferList:***REMOVED***readonly***REMOVED***Transferable[],
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***timeout?:***REMOVED***number,
***REMOVED******REMOVED******REMOVED******REMOVED***):***REMOVED***Promise<void>;

***REMOVED******REMOVED******REMOVED******REMOVED***import***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***BroadcastChannel***REMOVED***as***REMOVED***_BroadcastChannel,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***MessageChannel***REMOVED***as***REMOVED***_MessageChannel,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***MessagePort***REMOVED***as***REMOVED***_MessagePort,
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***from***REMOVED***"worker_threads";
***REMOVED******REMOVED******REMOVED******REMOVED***global***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***function***REMOVED***structuredClone<T>(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***value:***REMOVED***T,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***options?:***REMOVED***{***REMOVED***transfer?:***REMOVED***Transferable[]***REMOVED***},
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***):***REMOVED***T;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***`BroadcastChannel`***REMOVED***class***REMOVED***is***REMOVED***a***REMOVED***global***REMOVED***reference***REMOVED***for***REMOVED***`import***REMOVED***{***REMOVED***BroadcastChannel***REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads'`
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***https://nodejs.org/api/globals.html#broadcastchannel
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v18.0.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***BroadcastChannel:***REMOVED***typeof***REMOVED***globalThis***REMOVED***extends***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onmessage:***REMOVED***any;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***BroadcastChannel:***REMOVED***infer***REMOVED***T;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***?***REMOVED***T
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***typeof***REMOVED***_BroadcastChannel;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***`MessageChannel`***REMOVED***class***REMOVED***is***REMOVED***a***REMOVED***global***REMOVED***reference***REMOVED***for***REMOVED***`import***REMOVED***{***REMOVED***MessageChannel***REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads'`
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***https://nodejs.org/api/globals.html#messagechannel
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v15.0.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***MessageChannel:***REMOVED***typeof***REMOVED***globalThis***REMOVED***extends***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onmessage:***REMOVED***any;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***MessageChannel:***REMOVED***infer***REMOVED***T;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***?***REMOVED***T
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***typeof***REMOVED***_MessageChannel;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***`MessagePort`***REMOVED***class***REMOVED***is***REMOVED***a***REMOVED***global***REMOVED***reference***REMOVED***for***REMOVED***`import***REMOVED***{***REMOVED***MessagePort***REMOVED***}***REMOVED***from***REMOVED***'node:worker_threads'`
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***https://nodejs.org/api/globals.html#messageport
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED*******REMOVED***@since***REMOVED***v15.0.0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***MessagePort:***REMOVED***typeof***REMOVED***globalThis***REMOVED***extends***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onmessage:***REMOVED***any;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***MessagePort:***REMOVED***infer***REMOVED***T;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***?***REMOVED***T
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***typeof***REMOVED***_MessagePort;
***REMOVED******REMOVED******REMOVED******REMOVED***}
}
declare***REMOVED***module***REMOVED***"node:worker_threads"***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***export***REMOVED*******REMOVED***from***REMOVED***"worker_threads";
}
