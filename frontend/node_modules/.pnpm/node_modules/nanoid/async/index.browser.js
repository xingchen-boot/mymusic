let***REMOVED***random***REMOVED***=***REMOVED***async***REMOVED***bytes***REMOVED***=>***REMOVED***crypto.getRandomValues(new***REMOVED***Uint8Array(bytes))
let***REMOVED***customAlphabet***REMOVED***=***REMOVED***(alphabet,***REMOVED***defaultSize***REMOVED***=***REMOVED***21)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***let***REMOVED***mask***REMOVED***=***REMOVED***(2***REMOVED***<<***REMOVED***(Math.log(alphabet.length***REMOVED***-***REMOVED***1)***REMOVED***/***REMOVED***Math.LN2))***REMOVED***-***REMOVED***1
***REMOVED******REMOVED***let***REMOVED***step***REMOVED***=***REMOVED***-~((1.6***REMOVED*******REMOVED***mask***REMOVED*******REMOVED***defaultSize)***REMOVED***/***REMOVED***alphabet.length)
***REMOVED******REMOVED***return***REMOVED***async***REMOVED***(size***REMOVED***=***REMOVED***defaultSize)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***id***REMOVED***=***REMOVED***''
***REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***(true)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***bytes***REMOVED***=***REMOVED***crypto.getRandomValues(new***REMOVED***Uint8Array(step))
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***i***REMOVED***=***REMOVED***step***REMOVED***|***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***(i--)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***id***REMOVED***+=***REMOVED***alphabet[bytes[i]***REMOVED***&***REMOVED***mask]***REMOVED***||***REMOVED***''
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(id.length***REMOVED***===***REMOVED***size)***REMOVED***return***REMOVED***id
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
}
let***REMOVED***nanoid***REMOVED***=***REMOVED***async***REMOVED***(size***REMOVED***=***REMOVED***21)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***let***REMOVED***id***REMOVED***=***REMOVED***''
***REMOVED******REMOVED***let***REMOVED***bytes***REMOVED***=***REMOVED***crypto.getRandomValues(new***REMOVED***Uint8Array((size***REMOVED***|=***REMOVED***0)))
***REMOVED******REMOVED***while***REMOVED***(size--)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***byte***REMOVED***=***REMOVED***bytes[size]***REMOVED***&***REMOVED***63
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(byte***REMOVED***<***REMOVED***36)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***id***REMOVED***+=***REMOVED***byte.toString(36)
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(byte***REMOVED***<***REMOVED***62)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***id***REMOVED***+=***REMOVED***(byte***REMOVED***-***REMOVED***26).toString(36).toUpperCase()
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(byte***REMOVED***<***REMOVED***63)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***id***REMOVED***+=***REMOVED***'_'
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***id***REMOVED***+=***REMOVED***'-'
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***return***REMOVED***id
}
export***REMOVED***{***REMOVED***nanoid,***REMOVED***customAlphabet,***REMOVED***random***REMOVED***}
