const***REMOVED***bufLength***REMOVED***=***REMOVED***1024***REMOVED*******REMOVED***16;

//***REMOVED***Provide***REMOVED***a***REMOVED***fallback***REMOVED***for***REMOVED***older***REMOVED***environments.
const***REMOVED***td***REMOVED***=
***REMOVED******REMOVED***typeof***REMOVED***TextDecoder***REMOVED***!==***REMOVED***'undefined'
***REMOVED******REMOVED******REMOVED******REMOVED***?***REMOVED***/****REMOVED***#__PURE__***REMOVED****/***REMOVED***new***REMOVED***TextDecoder()
***REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***typeof***REMOVED***Buffer***REMOVED***!==***REMOVED***'undefined'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***?***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***decode(buf:***REMOVED***Uint8Array):***REMOVED***string***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***out***REMOVED***=***REMOVED***Buffer.from(buf.buffer,***REMOVED***buf.byteOffset,***REMOVED***buf.byteLength);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***out.toString();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***decode(buf:***REMOVED***Uint8Array):***REMOVED***string***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***out***REMOVED***=***REMOVED***'';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***i***REMOVED***=***REMOVED***0;***REMOVED***i***REMOVED***<***REMOVED***buf.length;***REMOVED***i++)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***out***REMOVED***+=***REMOVED***String.fromCharCode(buf[i]);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***out;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***};

export***REMOVED***class***REMOVED***StringWriter***REMOVED***{
***REMOVED******REMOVED***pos***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED***private***REMOVED***out***REMOVED***=***REMOVED***'';
***REMOVED******REMOVED***private***REMOVED***buffer***REMOVED***=***REMOVED***new***REMOVED***Uint8Array(bufLength);

***REMOVED******REMOVED***write(v:***REMOVED***number):***REMOVED***void***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***buffer***REMOVED***}***REMOVED***=***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED***buffer[this.pos++]***REMOVED***=***REMOVED***v;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.pos***REMOVED***===***REMOVED***bufLength)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.out***REMOVED***+=***REMOVED***td.decode(buffer);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.pos***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***flush():***REMOVED***string***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***buffer,***REMOVED***out,***REMOVED***pos***REMOVED***}***REMOVED***=***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***pos***REMOVED***>***REMOVED***0***REMOVED***?***REMOVED***out***REMOVED***+***REMOVED***td.decode(buffer.subarray(0,***REMOVED***pos))***REMOVED***:***REMOVED***out;
***REMOVED******REMOVED***}
}

export***REMOVED***class***REMOVED***StringReader***REMOVED***{
***REMOVED******REMOVED***pos***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED***declare***REMOVED***private***REMOVED***buffer:***REMOVED***string;

***REMOVED******REMOVED***constructor(buffer:***REMOVED***string)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***this.buffer***REMOVED***=***REMOVED***buffer;
***REMOVED******REMOVED***}

***REMOVED******REMOVED***next():***REMOVED***number***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.buffer.charCodeAt(this.pos++);
***REMOVED******REMOVED***}

***REMOVED******REMOVED***peek():***REMOVED***number***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.buffer.charCodeAt(this.pos);
***REMOVED******REMOVED***}

***REMOVED******REMOVED***indexOf(char:***REMOVED***string):***REMOVED***number***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***buffer,***REMOVED***pos***REMOVED***}***REMOVED***=***REMOVED***this;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***idx***REMOVED***=***REMOVED***buffer.indexOf(char,***REMOVED***pos);
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***idx***REMOVED***===***REMOVED***-1***REMOVED***?***REMOVED***buffer.length***REMOVED***:***REMOVED***idx;
***REMOVED******REMOVED***}
}
