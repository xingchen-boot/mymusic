/****REMOVED***eslint***REMOVED***max-statements:0***REMOVED****/
'use***REMOVED***strict';

var***REMOVED***assert***REMOVED***=***REMOVED***require('assert');
var***REMOVED***parseUrl***REMOVED***=***REMOVED***require('url').parse;

var***REMOVED***getProxyForUrl***REMOVED***=***REMOVED***require('./').getProxyForUrl;

//***REMOVED***Runs***REMOVED***the***REMOVED***callback***REMOVED***with***REMOVED***process.env***REMOVED***temporarily***REMOVED***set***REMOVED***to***REMOVED***env.
function***REMOVED***runWithEnv(env,***REMOVED***callback)***REMOVED***{
***REMOVED******REMOVED***var***REMOVED***originalEnv***REMOVED***=***REMOVED***process.env;
***REMOVED******REMOVED***process.env***REMOVED***=***REMOVED***env;
***REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***callback();
***REMOVED******REMOVED***}***REMOVED***finally***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***process.env***REMOVED***=***REMOVED***originalEnv;
***REMOVED******REMOVED***}
}

//***REMOVED***Defines***REMOVED***a***REMOVED***test***REMOVED***case***REMOVED***that***REMOVED***checks***REMOVED***whether***REMOVED***getProxyForUrl(input)***REMOVED***===***REMOVED***expected.
function***REMOVED***testProxyUrl(env,***REMOVED***expected,***REMOVED***input)***REMOVED***{
***REMOVED******REMOVED***assert(typeof***REMOVED***env***REMOVED***===***REMOVED***'object'***REMOVED***&&***REMOVED***env***REMOVED***!==***REMOVED***null);
***REMOVED******REMOVED***//***REMOVED***Copy***REMOVED***object***REMOVED***to***REMOVED***make***REMOVED***sure***REMOVED***that***REMOVED***the***REMOVED***in***REMOVED***param***REMOVED***does***REMOVED***not***REMOVED***get***REMOVED***modified***REMOVED***between
***REMOVED******REMOVED***//***REMOVED***the***REMOVED***call***REMOVED***of***REMOVED***this***REMOVED***function***REMOVED***and***REMOVED***the***REMOVED***use***REMOVED***of***REMOVED***it***REMOVED***below.
***REMOVED******REMOVED***env***REMOVED***=***REMOVED***JSON.parse(JSON.stringify(env));

***REMOVED******REMOVED***var***REMOVED***title***REMOVED***=***REMOVED***'getProxyForUrl('***REMOVED***+***REMOVED***JSON.stringify(input)***REMOVED***+***REMOVED***')'***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'***REMOVED***===***REMOVED***'***REMOVED***+***REMOVED***JSON.stringify(expected);

***REMOVED******REMOVED***//***REMOVED***Save***REMOVED***call***REMOVED***stack***REMOVED***for***REMOVED***later***REMOVED***use.
***REMOVED******REMOVED***var***REMOVED***stack***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED***Error.captureStackTrace(stack,***REMOVED***testProxyUrl);
***REMOVED******REMOVED***//***REMOVED***Only***REMOVED***use***REMOVED***the***REMOVED***last***REMOVED***stack***REMOVED***frame***REMOVED***because***REMOVED***that***REMOVED***shows***REMOVED***where***REMOVED***this***REMOVED***function***REMOVED***is
***REMOVED******REMOVED***//***REMOVED***called,***REMOVED***and***REMOVED***that***REMOVED***is***REMOVED***sufficient***REMOVED***for***REMOVED***our***REMOVED***purpose.***REMOVED***No***REMOVED***need***REMOVED***to***REMOVED***flood***REMOVED***the***REMOVED***logs
***REMOVED******REMOVED***//***REMOVED***with***REMOVED***an***REMOVED***uninteresting***REMOVED***stack***REMOVED***trace.
***REMOVED******REMOVED***stack***REMOVED***=***REMOVED***stack.stack.split('\n',***REMOVED***2)[1];

***REMOVED******REMOVED***it(title,***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***actual;
***REMOVED******REMOVED******REMOVED******REMOVED***runWithEnv(env,***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***actual***REMOVED***=***REMOVED***getProxyForUrl(input);
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(expected***REMOVED***===***REMOVED***actual)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;***REMOVED******REMOVED***//***REMOVED***Good!
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***assert.strictEqual(expected,***REMOVED***actual);***REMOVED***//***REMOVED***Create***REMOVED***a***REMOVED***formatted***REMOVED***error***REMOVED***message.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Should***REMOVED***not***REMOVED***happen***REMOVED***because***REMOVED***previously***REMOVED***we***REMOVED***determined***REMOVED***expected***REMOVED***!==***REMOVED***actual.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error('assert.strictEqual***REMOVED***passed.***REMOVED***This***REMOVED***is***REMOVED***impossible!');
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(e)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Use***REMOVED***the***REMOVED***original***REMOVED***stack***REMOVED***trace,***REMOVED***so***REMOVED***we***REMOVED***can***REMOVED***see***REMOVED***a***REMOVED***helpful***REMOVED***line***REMOVED***number.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***e.stack***REMOVED***=***REMOVED***e.message***REMOVED***+***REMOVED***stack;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***e;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***});
}

describe('getProxyForUrl',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED***describe('No***REMOVED***proxy***REMOVED***variables',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example.com');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'https://example.com');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'ftp://example.com');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('Invalid***REMOVED***URLs',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.ALL_PROXY***REMOVED***=***REMOVED***'http://unexpected.proxy';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'bogus');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'//example.com');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'://example.com');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'://');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'/path');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http:');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http:/');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'prototype://');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'hasOwnProperty://');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'__proto__://');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***undefined);
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***null);
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***{});
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***{host:***REMOVED***'x',***REMOVED***protocol:***REMOVED***1});
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***{host:***REMOVED***1,***REMOVED***protocol:***REMOVED***'x'});
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('http_proxy***REMOVED***and***REMOVED***HTTP_PROXY',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://http-proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'https://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://http-proxy',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://http-proxy',***REMOVED***parseUrl('http://example'));

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED***env.http_proxy***REMOVED***=***REMOVED***'http://priority';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://priority',***REMOVED***'http://example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('http_proxy***REMOVED***with***REMOVED***non-sensical***REMOVED***value',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Crazy***REMOVED***values***REMOVED***should***REMOVED***be***REMOVED***passed***REMOVED***as-is.***REMOVED***It***REMOVED***is***REMOVED***the***REMOVED***responsibility***REMOVED***of***REMOVED***the
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***one***REMOVED***who***REMOVED***launches***REMOVED***the***REMOVED***application***REMOVED***that***REMOVED***the***REMOVED***value***REMOVED***makes***REMOVED***sense.
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***TODO:***REMOVED***Should***REMOVED***we***REMOVED***be***REMOVED***stricter***REMOVED***and***REMOVED***perform***REMOVED***validation?
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'Crazy***REMOVED***\n!()***REMOVED***{***REMOVED***:://***REMOVED***}';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'Crazy***REMOVED***\n!()***REMOVED***{***REMOVED***:://***REMOVED***}',***REMOVED***'http://wow');

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***The***REMOVED***implementation***REMOVED***assumes***REMOVED***that***REMOVED***the***REMOVED***HTTP_PROXY***REMOVED***environment***REMOVED***variable***REMOVED***is
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***somewhat***REMOVED***reasonable,***REMOVED***and***REMOVED***if***REMOVED***the***REMOVED***scheme***REMOVED***is***REMOVED***missing,***REMOVED***it***REMOVED***is***REMOVED***added.
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Garbage***REMOVED***in,***REMOVED***garbage***REMOVED***out***REMOVED***some***REMOVED***would***REMOVED***say...
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'crazy***REMOVED***without***REMOVED***colon***REMOVED***slash***REMOVED***slash';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://crazy***REMOVED***without***REMOVED***colon***REMOVED***slash***REMOVED***slash',***REMOVED***'http://wow');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('https_proxy***REMOVED***and***REMOVED***HTTPS_PROXY',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Assert***REMOVED***that***REMOVED***there***REMOVED***is***REMOVED***no***REMOVED***fall***REMOVED***back***REMOVED***to***REMOVED***http_proxy
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://unexpected.proxy';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'https://example');

***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTPS_PROXY***REMOVED***=***REMOVED***'http://https-proxy';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://https-proxy',***REMOVED***'https://example');

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED***env.https_proxy***REMOVED***=***REMOVED***'http://priority';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://priority',***REMOVED***'https://example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('ftp_proxy',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Something***REMOVED***else***REMOVED***than***REMOVED***http_proxy***REMOVED***/***REMOVED***https,***REMOVED***as***REMOVED***a***REMOVED***sanity***REMOVED***check.
***REMOVED******REMOVED******REMOVED******REMOVED***env.FTP_PROXY***REMOVED***=***REMOVED***'http://ftp-proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://ftp-proxy',***REMOVED***'ftp://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'ftps://example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('all_proxy',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.ALL_PROXY***REMOVED***=***REMOVED***'http://catch-all';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://catch-all',***REMOVED***'https://example');

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED***env.all_proxy***REMOVED***=***REMOVED***'http://priority';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://priority',***REMOVED***'https://example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('all_proxy***REMOVED***without***REMOVED***scheme',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.ALL_PROXY***REMOVED***=***REMOVED***'noscheme';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://noscheme',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'https://noscheme',***REMOVED***'https://example');

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***The***REMOVED***module***REMOVED***does***REMOVED***not***REMOVED***impose***REMOVED***restrictions***REMOVED***on***REMOVED***the***REMOVED***scheme.
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'bogus-scheme://noscheme',***REMOVED***'bogus-scheme://example');

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***But***REMOVED***the***REMOVED***URL***REMOVED***should***REMOVED***still***REMOVED***be***REMOVED***valid.
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'bogus');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy***REMOVED***empty',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTPS_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***NO_PROXY***REMOVED***set***REMOVED***but***REMOVED***empty.
***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'https://example');

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***No***REMOVED***entries***REMOVED***in***REMOVED***NO_PROXY***REMOVED***(comma).
***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***',';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'https://example');

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***No***REMOVED***entries***REMOVED***in***REMOVED***NO_PROXY***REMOVED***(whitespace).
***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'***REMOVED***';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'https://example');

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***No***REMOVED***entries***REMOVED***in***REMOVED***NO_PROXY***REMOVED***(multiple***REMOVED***whitespace***REMOVED***/***REMOVED***commas).
***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***',\t,,,\n,***REMOVED******REMOVED***,\r';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'https://example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=example***REMOVED***(single***REMOVED***host)',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'example';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example:0');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example:1337');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://sub.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://prefexample');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example.no');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://a.b.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://host/example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=sub.example***REMOVED***(subdomain)',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'sub.example';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example:0');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example:1337');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://sub.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://no.sub.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://sub-example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example.sub');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=example:80***REMOVED***(host***REMOVED***+***REMOVED***port)',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'example:80';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example:0');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example:1337');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://sub.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://prefexample');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example.no');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://a.b.example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=.example***REMOVED***(host***REMOVED***suffix)',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'.example';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example:1337');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://sub.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://sub.example:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://sub.example:1337');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://prefexample');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example.no');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://a.b.example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=*',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';
***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'*';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example.com');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=*.example***REMOVED***(host***REMOVED***suffix***REMOVED***with***REMOVED****.)',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'*.example';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example:1337');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://sub.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://sub.example:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://sub.example:1337');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://prefexample');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example.no');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://a.b.example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=*example***REMOVED***(substring***REMOVED***suffix)',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'*example';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example:1337');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://sub.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://sub.example:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://sub.example:1337');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://prefexample');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://a.b.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example.no');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://host/example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=.*example***REMOVED***(arbitrary***REMOVED***wildcards***REMOVED***are***REMOVED***NOT***REMOVED***supported)',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'.*example';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://sub.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://sub.example');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://prefexample');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://x.prefexample');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://a.b.example');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=[::1],[::2]:80,10.0.0.1,10.0.0.2:80***REMOVED***(IP***REMOVED***addresses)',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'[::1],[::2]:80,10.0.0.1,10.0.0.2:80';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://[::1]/');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://[::1]:80/');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://[::1]:1337/');

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://[::2]/');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://[::2]:80/');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://[::2]:1337/');

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://10.0.0.1/');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://10.0.0.1:80/');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://10.0.0.1:1337/');

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://10.0.0.2/');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://10.0.0.2:80/');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://10.0.0.2:1337/');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=127.0.0.1/32***REMOVED***(CIDR***REMOVED***is***REMOVED***NOT***REMOVED***supported)',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'127.0.0.1/32';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://127.0.0.1');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://127.0.0.1/32');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy=127.0.0.1***REMOVED***does***REMOVED***NOT***REMOVED***match***REMOVED***localhost',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'127.0.0.1';
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://127.0.0.1');
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***We're***REMOVED***not***REMOVED***performing***REMOVED***DNS***REMOVED***queries,***REMOVED***so***REMOVED***this***REMOVED***shouldn't***REMOVED***match.
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://localhost');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy***REMOVED***with***REMOVED***protocols***REMOVED***that***REMOVED***have***REMOVED***a***REMOVED***default***REMOVED***port',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.WS_PROXY***REMOVED***=***REMOVED***'http://ws';
***REMOVED******REMOVED******REMOVED******REMOVED***env.WSS_PROXY***REMOVED***=***REMOVED***'http://wss';
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://http';
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTPS_PROXY***REMOVED***=***REMOVED***'http://https';
***REMOVED******REMOVED******REMOVED******REMOVED***env.GOPHER_PROXY***REMOVED***=***REMOVED***'http://gopher';
***REMOVED******REMOVED******REMOVED******REMOVED***env.FTP_PROXY***REMOVED***=***REMOVED***'http://ftp';
***REMOVED******REMOVED******REMOVED******REMOVED***env.ALL_PROXY***REMOVED***=***REMOVED***'http://all';

***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'xxx:21,xxx:70,xxx:80,xxx:443';

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://xxx');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://xxx:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://http',***REMOVED***'http://xxx:1337');

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'ws://xxx');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'ws://xxx:80');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://ws',***REMOVED***'ws://xxx:1337');

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'https://xxx');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'https://xxx:443');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://https',***REMOVED***'https://xxx:1337');

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'wss://xxx');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'wss://xxx:443');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://wss',***REMOVED***'wss://xxx:1337');

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'gopher://xxx');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'gopher://xxx:70');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://gopher',***REMOVED***'gopher://xxx:1337');

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'ftp://xxx');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'ftp://xxx:21');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://ftp',***REMOVED***'ftp://xxx:1337');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('no_proxy***REMOVED***should***REMOVED***not***REMOVED***be***REMOVED***case-sensitive',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';
***REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'XXX,YYY,ZzZ';

***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://xxx');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://XXX');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://yyy');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://YYY');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://ZzZ');
***REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://zZz');
***REMOVED******REMOVED***});

***REMOVED******REMOVED***describe('NPM***REMOVED***proxy***REMOVED***configuration',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***describe('npm_config_http_proxy***REMOVED***should***REMOVED***work',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_http_proxy***REMOVED***=***REMOVED***'http://http-proxy';

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'https://example');
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://http-proxy',***REMOVED***'http://example');

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_http_proxy***REMOVED***=***REMOVED***'http://priority';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://priority',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***max-len
***REMOVED******REMOVED******REMOVED******REMOVED***describe('npm_config_http_proxy***REMOVED***should***REMOVED***take***REMOVED***precedence***REMOVED***over***REMOVED***HTTP_PROXY***REMOVED***and***REMOVED***npm_config_proxy',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_http_proxy***REMOVED***=***REMOVED***'http://http-proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_proxy***REMOVED***=***REMOVED***'http://unexpected-proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://unexpected-proxy';

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://http-proxy',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***describe('npm_config_https_proxy***REMOVED***should***REMOVED***work',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_http_proxy***REMOVED***=***REMOVED***'http://unexpected.proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'https://example');

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_https_proxy***REMOVED***=***REMOVED***'http://https-proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://https-proxy',***REMOVED***'https://example');

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_https_proxy***REMOVED***=***REMOVED***'http://priority';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://priority',***REMOVED***'https://example');
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***max-len
***REMOVED******REMOVED******REMOVED******REMOVED***describe('npm_config_https_proxy***REMOVED***should***REMOVED***take***REMOVED***precedence***REMOVED***over***REMOVED***HTTPS_PROXY***REMOVED***and***REMOVED***npm_config_proxy',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_https_proxy***REMOVED***=***REMOVED***'http://https-proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_proxy***REMOVED***=***REMOVED***'http://unexpected-proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.HTTPS_PROXY***REMOVED***=***REMOVED***'http://unexpected-proxy';

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://https-proxy',***REMOVED***'https://example');
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***describe('npm_config_proxy***REMOVED***should***REMOVED***work',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_proxy***REMOVED***=***REMOVED***'http://http-proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://http-proxy',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://http-proxy',***REMOVED***'https://example');

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_proxy***REMOVED***=***REMOVED***'http://priority';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://priority',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://priority',***REMOVED***'https://example');
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***max-len
***REMOVED******REMOVED******REMOVED******REMOVED***describe('HTTP_PROXY***REMOVED***and***REMOVED***HTTPS_PROXY***REMOVED***should***REMOVED***take***REMOVED***precedence***REMOVED***over***REMOVED***npm_config_proxy',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://http-proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.HTTPS_PROXY***REMOVED***=***REMOVED***'http://https-proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_proxy***REMOVED***=***REMOVED***'http://unexpected-proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://http-proxy',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://https-proxy',***REMOVED***'https://example');
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***describe('npm_config_no_proxy***REMOVED***should***REMOVED***work',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_no_proxy***REMOVED***=***REMOVED***'example';

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://otherwebsite');
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***max-len
***REMOVED******REMOVED******REMOVED******REMOVED***describe('npm_config_no_proxy***REMOVED***should***REMOVED***take***REMOVED***precedence***REMOVED***over***REMOVED***NO_PROXY',***REMOVED***function()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***env***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.HTTP_PROXY***REMOVED***=***REMOVED***'http://proxy';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.NO_PROXY***REMOVED***=***REMOVED***'otherwebsite';
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***camelcase
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***env.npm_config_no_proxy***REMOVED***=***REMOVED***'example';

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'',***REMOVED***'http://example');
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***testProxyUrl(env,***REMOVED***'http://proxy',***REMOVED***'http://otherwebsite');
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED***});
});
