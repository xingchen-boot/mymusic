<p***REMOVED***align="center">
<img***REMOVED***src="https://github.com/vueuse/vue-demi/blob/main/assets/banner.png?raw=true"***REMOVED***width="600"/>
<br>
<a***REMOVED***href='https://www.npmjs.com/package/vue-demi'><img***REMOVED***src='https://img.shields.io/npm/v/vue-demi?color=42b883'***REMOVED***alt='npm'></a>
</p>

<p***REMOVED***align="center">
<b>Vue***REMOVED***Demi</b>***REMOVED***(<i>half</i>***REMOVED***in***REMOVED***French)***REMOVED***is***REMOVED***a***REMOVED***developing***REMOVED***utility<br>***REMOVED***allows***REMOVED***you***REMOVED***to***REMOVED***write***REMOVED***<b>Universal***REMOVED***Vue***REMOVED***Libraries</b>***REMOVED***for***REMOVED***Vue***REMOVED***2***REMOVED***&***REMOVED***3<br>
<i>See***REMOVED***more***REMOVED***details***REMOVED***in***REMOVED***<a***REMOVED***href='https://antfu.me/posts/make-libraries-working-with-vue-2-and-3'>this***REMOVED***blog***REMOVED***post</a></i>
</p>

<br>

<br>

##***REMOVED***Strategies

-***REMOVED***`<=2.6`:***REMOVED***exports***REMOVED***from***REMOVED***`vue`***REMOVED***+***REMOVED***`@vue/composition-api`***REMOVED***with***REMOVED***plugin***REMOVED***auto***REMOVED***installing.
-***REMOVED***`2.7`:***REMOVED***exports***REMOVED***from***REMOVED***`vue`***REMOVED***(Composition***REMOVED***API***REMOVED***is***REMOVED***built-in***REMOVED***in***REMOVED***Vue***REMOVED***2.7).
-***REMOVED***`>=3.0`:***REMOVED***exports***REMOVED***from***REMOVED***`vue`,***REMOVED***with***REMOVED***polyfill***REMOVED***of***REMOVED***Vue***REMOVED***2's***REMOVED***`set`***REMOVED***and***REMOVED***`del`***REMOVED***API.

##***REMOVED***Usage

Install***REMOVED***this***REMOVED***as***REMOVED***your***REMOVED***plugin's***REMOVED***dependency:

```bash
npm***REMOVED***i***REMOVED***vue-demi
#***REMOVED***or
yarn***REMOVED***add***REMOVED***vue-demi
#***REMOVED***or***REMOVED***
pnpm***REMOVED***i***REMOVED***vue-demi
```

Add***REMOVED***`vue`***REMOVED***and***REMOVED***`@vue/composition-api`***REMOVED***to***REMOVED***your***REMOVED***plugin's***REMOVED***peer***REMOVED***dependencies***REMOVED***to***REMOVED***specify***REMOVED***what***REMOVED***versions***REMOVED***you***REMOVED***support.

```jsonc
{
***REMOVED******REMOVED***"dependencies":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***"vue-demi":***REMOVED***"latest"
***REMOVED******REMOVED***},
***REMOVED******REMOVED***"peerDependencies":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***"@vue/composition-api":***REMOVED***"^1.0.0-rc.1",
***REMOVED******REMOVED******REMOVED******REMOVED***"vue":***REMOVED***"^2.0.0***REMOVED***||***REMOVED***>=3.0.0"
***REMOVED******REMOVED***},
***REMOVED******REMOVED***"peerDependenciesMeta":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***"@vue/composition-api":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***"optional":***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***},
***REMOVED******REMOVED***"devDependencies":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***"vue":***REMOVED***"^3.0.0"***REMOVED***//***REMOVED***or***REMOVED***"^2.6.0"***REMOVED***base***REMOVED***on***REMOVED***your***REMOVED***preferred***REMOVED***working***REMOVED***environment
***REMOVED******REMOVED***},
}
```

Import***REMOVED***everything***REMOVED***related***REMOVED***to***REMOVED***Vue***REMOVED***from***REMOVED***it,***REMOVED***it***REMOVED***will***REMOVED***redirect***REMOVED***to***REMOVED***`vue@2`***REMOVED***+***REMOVED***`@vue/composition-api`***REMOVED***or***REMOVED***`vue@3`***REMOVED***based***REMOVED***on***REMOVED***users'***REMOVED***environments.

```ts
import***REMOVED***{***REMOVED***ref,***REMOVED***reactive,***REMOVED***defineComponent***REMOVED***}***REMOVED***from***REMOVED***'vue-demi'
```

Publish***REMOVED***your***REMOVED***plugin***REMOVED***and***REMOVED***all***REMOVED***is***REMOVED***done!

>***REMOVED***When***REMOVED***using***REMOVED***with***REMOVED***[Vite](https://vitejs.dev),***REMOVED***you***REMOVED***will***REMOVED***need***REMOVED***to***REMOVED***opt-out***REMOVED***the***REMOVED***pre-bundling***REMOVED***to***REMOVED***get***REMOVED***`vue-demi`***REMOVED***work***REMOVED***properly***REMOVED***by
>***REMOVED***```js
>***REMOVED***//***REMOVED***vite.config.js
>***REMOVED***export***REMOVED***default***REMOVED***defineConfig({
>***REMOVED******REMOVED******REMOVED***optimizeDeps:***REMOVED***{
>***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***exclude:***REMOVED***['vue-demi']
>***REMOVED******REMOVED***}
>***REMOVED***})
>***REMOVED***```

###***REMOVED***Extra***REMOVED***APIs

`Vue***REMOVED***Demi`***REMOVED***provides***REMOVED***extra***REMOVED***APIs***REMOVED***to***REMOVED***help***REMOVED***distinguish***REMOVED***users'***REMOVED***environments***REMOVED***and***REMOVED***to***REMOVED***do***REMOVED***some***REMOVED***version-specific***REMOVED***logic.

###***REMOVED***`isVue2`***REMOVED***`isVue3`

```ts
import***REMOVED***{***REMOVED***isVue2,***REMOVED***isVue3***REMOVED***}***REMOVED***from***REMOVED***'vue-demi'

if***REMOVED***(isVue2)***REMOVED***{
***REMOVED******REMOVED***//***REMOVED***Vue***REMOVED***2***REMOVED***only
}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED***//***REMOVED***Vue***REMOVED***3***REMOVED***only
}
```

###***REMOVED***`Vue2`

To***REMOVED***avoid***REMOVED***bringing***REMOVED***in***REMOVED***all***REMOVED***the***REMOVED***tree-shakable***REMOVED***modules,***REMOVED***we***REMOVED***provide***REMOVED***a***REMOVED***`Vue2`***REMOVED***export***REMOVED***to***REMOVED***support***REMOVED***access***REMOVED***to***REMOVED***Vue***REMOVED***2's***REMOVED***global***REMOVED***API.***REMOVED***(See***REMOVED***[#41](https://github.com/vueuse/vue-demi/issues/41).)

```ts
import***REMOVED***{***REMOVED***Vue2***REMOVED***}***REMOVED***from***REMOVED***'vue-demi'

if***REMOVED***(Vue2)***REMOVED***{
***REMOVED******REMOVED***Vue2.config.ignoredElements.push('x-foo')
}
```

###***REMOVED***`install()`

Composition***REMOVED***API***REMOVED***in***REMOVED***Vue***REMOVED***2***REMOVED***is***REMOVED***provided***REMOVED***as***REMOVED***a***REMOVED***plugin***REMOVED***and***REMOVED***needs***REMOVED***to***REMOVED***be***REMOVED***installed***REMOVED***on***REMOVED***the***REMOVED***Vue***REMOVED***instance***REMOVED***before***REMOVED***using.***REMOVED***Normally,***REMOVED***`vue-demi`***REMOVED***will***REMOVED***try***REMOVED***to***REMOVED***install***REMOVED***it***REMOVED***automatically.***REMOVED***For***REMOVED***some***REMOVED***usages***REMOVED***where***REMOVED***you***REMOVED***might***REMOVED***need***REMOVED***to***REMOVED***ensure***REMOVED***the***REMOVED***plugin***REMOVED***gets***REMOVED***installed***REMOVED***correctly,***REMOVED***the***REMOVED***`install()`***REMOVED***API***REMOVED***is***REMOVED***exposed***REMOVED***to***REMOVED***as***REMOVED***a***REMOVED***safe***REMOVED***version***REMOVED***of***REMOVED***`Vue.use(CompositionAPI)`.***REMOVED***`install()`***REMOVED***in***REMOVED***the***REMOVED***Vue***REMOVED***3***REMOVED***environment***REMOVED***will***REMOVED***be***REMOVED***an***REMOVED***empty***REMOVED***function***REMOVED***(no-op).

```ts
import***REMOVED***{***REMOVED***install***REMOVED***}***REMOVED***from***REMOVED***'vue-demi'

install()
```

##***REMOVED***CLI

###***REMOVED***Manually***REMOVED***Switch***REMOVED***Versions

To***REMOVED***explicitly***REMOVED***switch***REMOVED***the***REMOVED***redirecting***REMOVED***version,***REMOVED***you***REMOVED***can***REMOVED***use***REMOVED***these***REMOVED***commands***REMOVED***in***REMOVED***your***REMOVED***project's***REMOVED***root.

```bash
npx***REMOVED***vue-demi-switch***REMOVED***2
#***REMOVED***or
npx***REMOVED***vue-demi-switch***REMOVED***3
```

###***REMOVED***Package***REMOVED***Aliasing

If***REMOVED***you***REMOVED***would***REMOVED***like***REMOVED***to***REMOVED***import***REMOVED***`vue`***REMOVED***under***REMOVED***an***REMOVED***alias,***REMOVED***you***REMOVED***can***REMOVED***use***REMOVED***the***REMOVED***following***REMOVED***command***REMOVED***

```bash
npx***REMOVED***vue-demi-switch***REMOVED***2***REMOVED***vue2
#***REMOVED***or
npx***REMOVED***vue-demi-switch***REMOVED***3***REMOVED***vue3
```

Then***REMOVED***`vue-demi`***REMOVED***will***REMOVED***redirect***REMOVED***APIs***REMOVED***from***REMOVED***the***REMOVED***alias***REMOVED***name***REMOVED***you***REMOVED***specified,***REMOVED***for***REMOVED***example:

```ts
import***REMOVED*******REMOVED***as***REMOVED***Vue***REMOVED***from***REMOVED***'vue3'

var***REMOVED***isVue2***REMOVED***=***REMOVED***false
var***REMOVED***isVue3***REMOVED***=***REMOVED***true
var***REMOVED***Vue2***REMOVED***=***REMOVED***undefined

export***REMOVED*******REMOVED***from***REMOVED***'vue3'
export***REMOVED***{
***REMOVED******REMOVED***Vue,
***REMOVED******REMOVED***Vue2,
***REMOVED******REMOVED***isVue2,
***REMOVED******REMOVED***isVue3,
}
```

###***REMOVED***Auto***REMOVED***Fix

If***REMOVED***the***REMOVED***`postinstall`***REMOVED***hook***REMOVED***doesn't***REMOVED***get***REMOVED***triggered***REMOVED***or***REMOVED***you***REMOVED***have***REMOVED***updated***REMOVED***the***REMOVED***Vue***REMOVED***version,***REMOVED***try***REMOVED***to***REMOVED***run***REMOVED***the***REMOVED***following***REMOVED***command***REMOVED***to***REMOVED***resolve***REMOVED***the***REMOVED***redirecting.

```bash
npx***REMOVED***vue-demi-fix
```

###***REMOVED***Isomorphic***REMOVED***Testings

You***REMOVED***can***REMOVED***support***REMOVED***testing***REMOVED***for***REMOVED***both***REMOVED***versions***REMOVED***by***REMOVED***adding***REMOVED***npm***REMOVED***alias***REMOVED***in***REMOVED***your***REMOVED***dev***REMOVED***dependencies.***REMOVED***For***REMOVED***example:

```json
{
***REMOVED******REMOVED***"scripts":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***"test:2":***REMOVED***"vue-demi-switch***REMOVED***2***REMOVED***vue2***REMOVED***&&***REMOVED***jest",
***REMOVED******REMOVED******REMOVED******REMOVED***"test:3":***REMOVED***"vue-demi-switch***REMOVED***3***REMOVED***&&***REMOVED***jest",
***REMOVED******REMOVED***},
***REMOVED******REMOVED***"devDependencies":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***"vue":***REMOVED***"^3.0.0",
***REMOVED******REMOVED******REMOVED******REMOVED***"vue2":***REMOVED***"npm:vue@2"
***REMOVED******REMOVED***},
}
```

or

```json
{
***REMOVED******REMOVED***"scripts":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***"test:2":***REMOVED***"vue-demi-switch***REMOVED***2***REMOVED***&&***REMOVED***jest",
***REMOVED******REMOVED******REMOVED******REMOVED***"test:3":***REMOVED***"vue-demi-switch***REMOVED***3***REMOVED***vue3***REMOVED***&&***REMOVED***jest",
***REMOVED******REMOVED***},
***REMOVED******REMOVED***"devDependencies":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***"vue":***REMOVED***"^2.6.0",
***REMOVED******REMOVED******REMOVED******REMOVED***"vue3":***REMOVED***"npm:vue@3"
***REMOVED******REMOVED***},
}
```

##***REMOVED***Examples

See***REMOVED***[examples](./examples).

##***REMOVED***Who***REMOVED***is***REMOVED***using***REMOVED***this?

-***REMOVED***[VueUse](https://github.com/vueuse/vueuse)***REMOVED***-***REMOVED***Collection***REMOVED***of***REMOVED***Composition***REMOVED***API***REMOVED***utils
-***REMOVED***[@vue/apollo-composable](https://github.com/vuejs/vue-apollo/tree/v4/packages/vue-apollo-composable)***REMOVED***-***REMOVED***Apollo***REMOVED***GraphQL***REMOVED***functions***REMOVED***for***REMOVED***Vue***REMOVED***Composition***REMOVED***API
-***REMOVED***[vuelidate](https://github.com/vuelidate/vuelidate)***REMOVED***-***REMOVED***Simple,***REMOVED***lightweight***REMOVED***model-based***REMOVED***validation
-***REMOVED***[vue-composition-test-utils](https://github.com/ariesjia/vue-composition-test-utils)***REMOVED***-***REMOVED***Simple***REMOVED***vue***REMOVED***composition***REMOVED***api***REMOVED***unit***REMOVED***test***REMOVED***utilities
-***REMOVED***[vue-use-stripe](https://github.com/frandiox/vue-use-stripe)***REMOVED***-***REMOVED***Stripe***REMOVED***Elements***REMOVED***wrapper***REMOVED***for***REMOVED***Vue.js
-***REMOVED***[@opd/g2plot-vue](https://github.com/open-data-plan/g2plot-vue)***REMOVED***-***REMOVED***G2plot***REMOVED***for***REMOVED***vue
-***REMOVED***[vue-echarts](https://github.com/ecomfe/vue-echarts)***REMOVED***-***REMOVED***Vue.js***REMOVED***component***REMOVED***for***REMOVED***Apache***REMOVED***ECharts.
-***REMOVED***[fluent-vue](https://github.com/Demivan/fluent-vue)***REMOVED***-***REMOVED***Vue.js***REMOVED***integration***REMOVED***for***REMOVED***[Fluent.js](https://github.com/projectfluent/fluent.js)***REMOVED***-***REMOVED***JavaScript***REMOVED***implementation***REMOVED***of***REMOVED***[Project***REMOVED***Fluent](https://projectfluent.org)***REMOVED******REMOVED***
-***REMOVED***[vue-datatable-url-sync](https://github.com/socotecio/vue-datatable-url-sync)***REMOVED***-***REMOVED***Synchronize***REMOVED***datatable***REMOVED***options***REMOVED***and***REMOVED***filters***REMOVED***with***REMOVED***the***REMOVED***url***REMOVED***to***REMOVED***keep***REMOVED***user***REMOVED***preference***REMOVED***even***REMOVED***after***REMOVED***refresh***REMOVED***or***REMOVED***navigation
-***REMOVED***[vue-insta-stories](https://github.com/UnevenSoftware/vue-insta-stories)***REMOVED***-***REMOVED***Instagram***REMOVED***stories***REMOVED***in***REMOVED***your***REMOVED***vue***REMOVED***projects.
-***REMOVED***[vue-tiny-validate](https://github.com/FrontLabsOfficial/vue-tiny-validate)***REMOVED***-***REMOVED***Tiny***REMOVED***Vue***REMOVED***Validate***REMOVED***Composition
-***REMOVED***[v-perfect-signature](https://github.com/wobsoriano/v-perfect-signature)***REMOVED***-***REMOVED***Pressure-sensitive***REMOVED***signature***REMOVED***drawing***REMOVED***for***REMOVED***Vue***REMOVED***2***REMOVED***and***REMOVED***3
-***REMOVED***[vue-winbox](https://github.com/wobsoriano/vue-winbox)***REMOVED***-***REMOVED***A***REMOVED***wrapper***REMOVED***component***REMOVED***for***REMOVED***WinBox.js***REMOVED***that***REMOVED***adds***REMOVED***the***REMOVED***ability***REMOVED***to***REMOVED***mount***REMOVED***Vue***REMOVED***components.
-***REMOVED***[vue-word-highlighter](https://github.com/kawamataryo/vue-word-highlighter)***REMOVED***-***REMOVED***The***REMOVED***word***REMOVED***highlighter***REMOVED***library***REMOVED***for***REMOVED***Vue***REMOVED***2***REMOVED***and***REMOVED***Vue***REMOVED***3
-***REMOVED***[vue-chart-3](https://github.com/victorgarciaesgi/vue-chart-3)***REMOVED***-***REMOVED***Vue.js***REMOVED***component***REMOVED***for***REMOVED***Chart.js
-***REMOVED***[json-editor-vue](https://github.com/cloydlau/json-editor-vue)***REMOVED***-***REMOVED***JSON***REMOVED***editor***REMOVED***&***REMOVED***viewer***REMOVED***for***REMOVED***Vue***REMOVED***2***REMOVED***and***REMOVED***3.
-***REMOVED***[kidar-echarts](https://github.com/kidarjs/kidar-echarts)***REMOVED***-***REMOVED***A***REMOVED***simpler***REMOVED***echarts***REMOVED***component***REMOVED***for***REMOVED***Vue***REMOVED***2***REMOVED***and***REMOVED***3.
-***REMOVED***[vue3-sketch-ruler](https://github.com/kakajun/vue3-sketch-ruler)***REMOVED***-***REMOVED***The***REMOVED***zoom***REMOVED***operation***REMOVED***used***REMOVED***for***REMOVED***page***REMOVED***presentation***REMOVED***for***REMOVED***Vue***REMOVED***2***REMOVED***and***REMOVED***3(***REMOVED***Replace***REMOVED***render***REMOVED***function***REMOVED***with***REMOVED***template***REMOVED***)
-***REMOVED***[vue-rough-notation](https://github.com/Leecason/vue-rough-notation)***REMOVED***-***REMOVED***RoughNotation***REMOVED***wrapper***REMOVED***component***REMOVED***for***REMOVED***Vue***REMOVED***2***REMOVED***and***REMOVED***3.
-***REMOVED***[vue-request](https://github.com/AttoJS/vue-request)***REMOVED***-***REMOVED***Vue***REMOVED***composition***REMOVED***API***REMOVED***for***REMOVED***data***REMOVED***fetching,***REMOVED***supports***REMOVED***SWR,***REMOVED***polling,***REMOVED***error***REMOVED***retry,***REMOVED***cache***REMOVED***request,***REMOVED***pagination,***REMOVED***etc.
-***REMOVED***[vue3-lazyload](https://github.com/murongg/vue3-lazyload)***REMOVED***-***REMOVED***A***REMOVED***vue3.x***REMOVED***image***REMOVED***lazyload***REMOVED***plugin.
-***REMOVED***[vue-codemirror6](https://github.com/logue/vue-codemirror6)***REMOVED***-***REMOVED***CodeMirror6***REMOVED***component***REMOVED***for***REMOVED***Vue2***REMOVED***and***REMOVED***3.
-***REMOVED***[@tanstack/vue-query](https://github.com/TanStack/query)***REMOVED***-***REMOVED***TanStack***REMOVED***Query***REMOVED***for***REMOVED***Vue.
>***REMOVED***open***REMOVED***a***REMOVED***PR***REMOVED***to***REMOVED***add***REMOVED***your***REMOVED***library***REMOVED***;)

##***REMOVED***Underhood

See***REMOVED***[the***REMOVED***blog***REMOVED***post](https://antfu.me/posts/make-libraries-working-with-vue-2-and-3/#-introducing-vue-demi).

##***REMOVED***License

MIT***REMOVED***License***REMOVED***©***REMOVED***2020***REMOVED***[Anthony***REMOVED***Fu](https://github.com/antfu)
