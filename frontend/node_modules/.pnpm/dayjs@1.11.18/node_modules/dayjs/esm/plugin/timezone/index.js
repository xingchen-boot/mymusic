import***REMOVED***{***REMOVED***MIN,***REMOVED***MS***REMOVED***}***REMOVED***from***REMOVED***'../../constant';
var***REMOVED***typeToPos***REMOVED***=***REMOVED***{
***REMOVED******REMOVED***year:***REMOVED***0,
***REMOVED******REMOVED***month:***REMOVED***1,
***REMOVED******REMOVED***day:***REMOVED***2,
***REMOVED******REMOVED***hour:***REMOVED***3,
***REMOVED******REMOVED***minute:***REMOVED***4,
***REMOVED******REMOVED***second:***REMOVED***5
};***REMOVED***//***REMOVED***Cache***REMOVED***time-zone***REMOVED***lookups***REMOVED***from***REMOVED***Intl.DateTimeFormat,
//***REMOVED***as***REMOVED***it***REMOVED***is***REMOVED***a***REMOVED****very****REMOVED***slow***REMOVED***method.

var***REMOVED***dtfCache***REMOVED***=***REMOVED***{};

var***REMOVED***getDateTimeFormat***REMOVED***=***REMOVED***function***REMOVED***getDateTimeFormat(timezone,***REMOVED***options)***REMOVED***{
***REMOVED******REMOVED***if***REMOVED***(options***REMOVED***===***REMOVED***void***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***options***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED***}

***REMOVED******REMOVED***var***REMOVED***timeZoneName***REMOVED***=***REMOVED***options.timeZoneName***REMOVED***||***REMOVED***'short';
***REMOVED******REMOVED***var***REMOVED***key***REMOVED***=***REMOVED***timezone***REMOVED***+***REMOVED***"|"***REMOVED***+***REMOVED***timeZoneName;
***REMOVED******REMOVED***var***REMOVED***dtf***REMOVED***=***REMOVED***dtfCache[key];

***REMOVED******REMOVED***if***REMOVED***(!dtf)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***dtf***REMOVED***=***REMOVED***new***REMOVED***Intl.DateTimeFormat('en-US',***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***hour12:***REMOVED***false,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***timeZone:***REMOVED***timezone,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***year:***REMOVED***'numeric',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***month:***REMOVED***'2-digit',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***day:***REMOVED***'2-digit',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***hour:***REMOVED***'2-digit',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***minute:***REMOVED***'2-digit',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***second:***REMOVED***'2-digit',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***timeZoneName:***REMOVED***timeZoneName
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***dtfCache[key]***REMOVED***=***REMOVED***dtf;
***REMOVED******REMOVED***}

***REMOVED******REMOVED***return***REMOVED***dtf;
};

export***REMOVED***default***REMOVED***(function***REMOVED***(o,***REMOVED***c,***REMOVED***d)***REMOVED***{
***REMOVED******REMOVED***var***REMOVED***defaultTimezone;

***REMOVED******REMOVED***var***REMOVED***makeFormatParts***REMOVED***=***REMOVED***function***REMOVED***makeFormatParts(timestamp,***REMOVED***timezone,***REMOVED***options)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(options***REMOVED***===***REMOVED***void***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***options***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***date***REMOVED***=***REMOVED***new***REMOVED***Date(timestamp);
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***dtf***REMOVED***=***REMOVED***getDateTimeFormat(timezone,***REMOVED***options);
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***dtf.formatToParts(date);
***REMOVED******REMOVED***};

***REMOVED******REMOVED***var***REMOVED***tzOffset***REMOVED***=***REMOVED***function***REMOVED***tzOffset(timestamp,***REMOVED***timezone)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***formatResult***REMOVED***=***REMOVED***makeFormatParts(timestamp,***REMOVED***timezone);
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***filled***REMOVED***=***REMOVED***[];

***REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(var***REMOVED***i***REMOVED***=***REMOVED***0;***REMOVED***i***REMOVED***<***REMOVED***formatResult.length;***REMOVED***i***REMOVED***+=***REMOVED***1)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_formatResult$i***REMOVED***=***REMOVED***formatResult[i],
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***type***REMOVED***=***REMOVED***_formatResult$i.type,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***value***REMOVED***=***REMOVED***_formatResult$i.value;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***pos***REMOVED***=***REMOVED***typeToPos[type];

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(pos***REMOVED***>=***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***filled[pos]***REMOVED***=***REMOVED***parseInt(value,***REMOVED***10);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***hour***REMOVED***=***REMOVED***filled[3];***REMOVED***//***REMOVED***Workaround***REMOVED***for***REMOVED***the***REMOVED***same***REMOVED***behavior***REMOVED***in***REMOVED***different***REMOVED***node***REMOVED***version
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***https://github.com/nodejs/node/issues/33027

***REMOVED******REMOVED******REMOVED******REMOVED***/****REMOVED***istanbul***REMOVED***ignore***REMOVED***next***REMOVED****/

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***fixedHour***REMOVED***=***REMOVED***hour***REMOVED***===***REMOVED***24***REMOVED***?***REMOVED***0***REMOVED***:***REMOVED***hour;
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***utcString***REMOVED***=***REMOVED***filled[0]***REMOVED***+***REMOVED***"-"***REMOVED***+***REMOVED***filled[1]***REMOVED***+***REMOVED***"-"***REMOVED***+***REMOVED***filled[2]***REMOVED***+***REMOVED***"***REMOVED***"***REMOVED***+***REMOVED***fixedHour***REMOVED***+***REMOVED***":"***REMOVED***+***REMOVED***filled[4]***REMOVED***+***REMOVED***":"***REMOVED***+***REMOVED***filled[5]***REMOVED***+***REMOVED***":000";
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***utcTs***REMOVED***=***REMOVED***d.utc(utcString).valueOf();
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***asTS***REMOVED***=***REMOVED***+timestamp;
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***over***REMOVED***=***REMOVED***asTS***REMOVED***%***REMOVED***1000;
***REMOVED******REMOVED******REMOVED******REMOVED***asTS***REMOVED***-=***REMOVED***over;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(utcTs***REMOVED***-***REMOVED***asTS)***REMOVED***/***REMOVED***(60***REMOVED*******REMOVED***1000);
***REMOVED******REMOVED***};***REMOVED***//***REMOVED***find***REMOVED***the***REMOVED***right***REMOVED***offset***REMOVED***a***REMOVED***given***REMOVED***local***REMOVED***time.***REMOVED***The***REMOVED***o***REMOVED***input***REMOVED***is***REMOVED***our***REMOVED***guess,***REMOVED***which***REMOVED***determines***REMOVED***which
***REMOVED******REMOVED***//***REMOVED***offset***REMOVED***we'll***REMOVED***pick***REMOVED***in***REMOVED***ambiguous***REMOVED***cases***REMOVED***(e.g.***REMOVED***there***REMOVED***are***REMOVED***two***REMOVED***3***REMOVED***AMs***REMOVED***b/c***REMOVED***Fallback***REMOVED***DST)
***REMOVED******REMOVED***//***REMOVED***https://github.com/moment/luxon/blob/master/src/datetime.js#L76


***REMOVED******REMOVED***var***REMOVED***fixOffset***REMOVED***=***REMOVED***function***REMOVED***fixOffset(localTS,***REMOVED***o0,***REMOVED***tz)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Our***REMOVED***UTC***REMOVED***time***REMOVED***is***REMOVED***just***REMOVED***a***REMOVED***guess***REMOVED***because***REMOVED***our***REMOVED***offset***REMOVED***is***REMOVED***just***REMOVED***a***REMOVED***guess
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***utcGuess***REMOVED***=***REMOVED***localTS***REMOVED***-***REMOVED***o0***REMOVED*******REMOVED***60***REMOVED*******REMOVED***1000;***REMOVED***//***REMOVED***Test***REMOVED***whether***REMOVED***the***REMOVED***zone***REMOVED***matches***REMOVED***the***REMOVED***offset***REMOVED***for***REMOVED***this***REMOVED***ts

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***o2***REMOVED***=***REMOVED***tzOffset(utcGuess,***REMOVED***tz);***REMOVED***//***REMOVED***If***REMOVED***so,***REMOVED***offset***REMOVED***didn't***REMOVED***change***REMOVED***and***REMOVED***we're***REMOVED***done

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(o0***REMOVED***===***REMOVED***o2)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[utcGuess,***REMOVED***o0];
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***//***REMOVED***If***REMOVED***not,***REMOVED***change***REMOVED***the***REMOVED***ts***REMOVED***by***REMOVED***the***REMOVED***difference***REMOVED***in***REMOVED***the***REMOVED***offset


***REMOVED******REMOVED******REMOVED******REMOVED***utcGuess***REMOVED***-=***REMOVED***(o2***REMOVED***-***REMOVED***o0)***REMOVED*******REMOVED***60***REMOVED*******REMOVED***1000;***REMOVED***//***REMOVED***If***REMOVED***that***REMOVED***gives***REMOVED***us***REMOVED***the***REMOVED***local***REMOVED***time***REMOVED***we***REMOVED***want,***REMOVED***we're***REMOVED***done

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***o3***REMOVED***=***REMOVED***tzOffset(utcGuess,***REMOVED***tz);

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(o2***REMOVED***===***REMOVED***o3)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[utcGuess,***REMOVED***o2];
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***//***REMOVED***If***REMOVED***it's***REMOVED***different,***REMOVED***we're***REMOVED***in***REMOVED***a***REMOVED***hole***REMOVED***time.
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***The***REMOVED***offset***REMOVED***has***REMOVED***changed,***REMOVED***but***REMOVED***the***REMOVED***we***REMOVED***don't***REMOVED***adjust***REMOVED***the***REMOVED***time


***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[localTS***REMOVED***-***REMOVED***Math.min(o2,***REMOVED***o3)***REMOVED*******REMOVED***60***REMOVED*******REMOVED***1000,***REMOVED***Math.max(o2,***REMOVED***o3)];
***REMOVED******REMOVED***};

***REMOVED******REMOVED***var***REMOVED***proto***REMOVED***=***REMOVED***c.prototype;

***REMOVED******REMOVED***proto.tz***REMOVED***=***REMOVED***function***REMOVED***(timezone,***REMOVED***keepLocalTime)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(timezone***REMOVED***===***REMOVED***void***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***timezone***REMOVED***=***REMOVED***defaultTimezone;
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***oldOffset***REMOVED***=***REMOVED***this.utcOffset();
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***date***REMOVED***=***REMOVED***this.toDate();
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***target***REMOVED***=***REMOVED***date.toLocaleString('en-US',***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***timeZone:***REMOVED***timezone
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***diff***REMOVED***=***REMOVED***Math.round((date***REMOVED***-***REMOVED***new***REMOVED***Date(target))***REMOVED***/***REMOVED***1000***REMOVED***/***REMOVED***60);
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***offset***REMOVED***=***REMOVED***-Math.round(date.getTimezoneOffset()***REMOVED***/***REMOVED***15)***REMOVED*******REMOVED***15***REMOVED***-***REMOVED***diff;
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***isUTC***REMOVED***=***REMOVED***!Number(offset);
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***ins;

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isUTC)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***if***REMOVED***utcOffset***REMOVED***is***REMOVED***0,***REMOVED***turn***REMOVED***it***REMOVED***to***REMOVED***UTC***REMOVED***mode
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ins***REMOVED***=***REMOVED***this.utcOffset(0,***REMOVED***keepLocalTime);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ins***REMOVED***=***REMOVED***d(target,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***locale:***REMOVED***this.$L
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}).$set(MS,***REMOVED***this.$ms).utcOffset(offset,***REMOVED***true);

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(keepLocalTime)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***newOffset***REMOVED***=***REMOVED***ins.utcOffset();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ins***REMOVED***=***REMOVED***ins.add(oldOffset***REMOVED***-***REMOVED***newOffset,***REMOVED***MIN);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***ins.$x.$timezone***REMOVED***=***REMOVED***timezone;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***ins;
***REMOVED******REMOVED***};

***REMOVED******REMOVED***proto.offsetName***REMOVED***=***REMOVED***function***REMOVED***(type)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***type:***REMOVED***short(default)***REMOVED***/***REMOVED***long
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***zone***REMOVED***=***REMOVED***this.$x.$timezone***REMOVED***||***REMOVED***d.tz.guess();
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***result***REMOVED***=***REMOVED***makeFormatParts(this.valueOf(),***REMOVED***zone,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***timeZoneName:***REMOVED***type
***REMOVED******REMOVED******REMOVED******REMOVED***}).find(function***REMOVED***(m)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***m.type.toLowerCase()***REMOVED***===***REMOVED***'timezonename';
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***result***REMOVED***&&***REMOVED***result.value;
***REMOVED******REMOVED***};

***REMOVED******REMOVED***var***REMOVED***oldStartOf***REMOVED***=***REMOVED***proto.startOf;

***REMOVED******REMOVED***proto.startOf***REMOVED***=***REMOVED***function***REMOVED***(units,***REMOVED***startOf)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!this.$x***REMOVED***||***REMOVED***!this.$x.$timezone)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***oldStartOf.call(this,***REMOVED***units,***REMOVED***startOf);
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***withoutTz***REMOVED***=***REMOVED***d(this.format('YYYY-MM-DD***REMOVED***HH:mm:ss:SSS'),***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***locale:***REMOVED***this.$L
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***startOfWithoutTz***REMOVED***=***REMOVED***oldStartOf.call(withoutTz,***REMOVED***units,***REMOVED***startOf);
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***startOfWithoutTz.tz(this.$x.$timezone,***REMOVED***true);
***REMOVED******REMOVED***};

***REMOVED******REMOVED***d.tz***REMOVED***=***REMOVED***function***REMOVED***(input,***REMOVED***arg1,***REMOVED***arg2)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***parseFormat***REMOVED***=***REMOVED***arg2***REMOVED***&&***REMOVED***arg1;
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***timezone***REMOVED***=***REMOVED***arg2***REMOVED***||***REMOVED***arg1***REMOVED***||***REMOVED***defaultTimezone;
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***previousOffset***REMOVED***=***REMOVED***tzOffset(+d(),***REMOVED***timezone);

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***input***REMOVED***!==***REMOVED***'string')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***timestamp***REMOVED***number***REMOVED***||***REMOVED***js***REMOVED***Date***REMOVED***||***REMOVED***Day.js
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***d(input).tz(timezone);
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***localTs***REMOVED***=***REMOVED***d.utc(input,***REMOVED***parseFormat).valueOf();

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_fixOffset***REMOVED***=***REMOVED***fixOffset(localTs,***REMOVED***previousOffset,***REMOVED***timezone),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***targetTs***REMOVED***=***REMOVED***_fixOffset[0],
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***targetOffset***REMOVED***=***REMOVED***_fixOffset[1];

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***ins***REMOVED***=***REMOVED***d(targetTs).utcOffset(targetOffset);
***REMOVED******REMOVED******REMOVED******REMOVED***ins.$x.$timezone***REMOVED***=***REMOVED***timezone;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***ins;
***REMOVED******REMOVED***};

***REMOVED******REMOVED***d.tz.guess***REMOVED***=***REMOVED***function***REMOVED***()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***Intl.DateTimeFormat().resolvedOptions().timeZone;
***REMOVED******REMOVED***};

***REMOVED******REMOVED***d.tz.setDefault***REMOVED***=***REMOVED***function***REMOVED***(timezone)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***defaultTimezone***REMOVED***=***REMOVED***timezone;
***REMOVED******REMOVED***};
});