#***REMOVED***@vitejs/plugin-vue***REMOVED***[![npm](https://img.shields.io/npm/v/@vitejs/plugin-vue.svg)](https://npmjs.com/package/@vitejs/plugin-vue)

>***REMOVED***Note:***REMOVED***as***REMOVED***of***REMOVED***`vue`***REMOVED***3.2.13+***REMOVED***and***REMOVED***`@vitejs/plugin-vue`***REMOVED***1.9.0+,***REMOVED***`@vue/compiler-sfc`***REMOVED***is***REMOVED***no***REMOVED***longer***REMOVED***required***REMOVED***as***REMOVED***a***REMOVED***peer***REMOVED***dependency.

```js
//***REMOVED***vite.config.js
import***REMOVED***vue***REMOVED***from***REMOVED***'@vitejs/plugin-vue'

export***REMOVED***default***REMOVED***{
***REMOVED******REMOVED***plugins:***REMOVED***[vue()],
}
```

For***REMOVED***JSX***REMOVED***/***REMOVED***TSX***REMOVED***support,***REMOVED***[`@vitejs/plugin-vue-jsx`](https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue-jsx)***REMOVED***is***REMOVED***also***REMOVED***needed.

##***REMOVED***Options

```ts
export***REMOVED***interface***REMOVED***Options***REMOVED***{
***REMOVED******REMOVED***include?:***REMOVED***string***REMOVED***|***REMOVED***RegExp***REMOVED***|***REMOVED***(string***REMOVED***|***REMOVED***RegExp)[]
***REMOVED******REMOVED***exclude?:***REMOVED***string***REMOVED***|***REMOVED***RegExp***REMOVED***|***REMOVED***(string***REMOVED***|***REMOVED***RegExp)[]

***REMOVED******REMOVED***isProduction?:***REMOVED***boolean

***REMOVED******REMOVED***//***REMOVED***options***REMOVED***to***REMOVED***pass***REMOVED***on***REMOVED***to***REMOVED***vue/compiler-sfc
***REMOVED******REMOVED***script?:***REMOVED***Partial<
***REMOVED******REMOVED******REMOVED******REMOVED***Pick<
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***SFCScriptCompileOptions,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'babelParserPlugins'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'globalTypeFiles'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'defineModel'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'propsDestructure'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'fs'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'reactivityTransform'
***REMOVED******REMOVED******REMOVED******REMOVED***>
***REMOVED******REMOVED***>

***REMOVED******REMOVED***template?:***REMOVED***Partial<
***REMOVED******REMOVED******REMOVED******REMOVED***Pick<
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***SFCTemplateCompileOptions,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'compiler'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'compilerOptions'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'preprocessOptions'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'preprocessCustomRequire'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***|***REMOVED***'transformAssetUrls'
***REMOVED******REMOVED******REMOVED******REMOVED***>
***REMOVED******REMOVED***>
***REMOVED******REMOVED***style?:***REMOVED***Partial<Pick<SFCStyleCompileOptions,***REMOVED***'trim'>>

***REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED*******REMOVED***Transform***REMOVED***Vue***REMOVED***SFCs***REMOVED***into***REMOVED***custom***REMOVED***elements.
***REMOVED******REMOVED******REMOVED*******REMOVED***-***REMOVED***`true`:***REMOVED***all***REMOVED***`*.vue`***REMOVED***imports***REMOVED***are***REMOVED***converted***REMOVED***into***REMOVED***custom***REMOVED***elements
***REMOVED******REMOVED******REMOVED*******REMOVED***-***REMOVED***`string***REMOVED***|***REMOVED***RegExp`:***REMOVED***matched***REMOVED***files***REMOVED***are***REMOVED***converted***REMOVED***into***REMOVED***custom***REMOVED***elements
***REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED*******REMOVED***@default***REMOVED***/\.ce\.vue$/
***REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED***customElement?:***REMOVED***boolean***REMOVED***|***REMOVED***string***REMOVED***|***REMOVED***RegExp***REMOVED***|***REMOVED***(string***REMOVED***|***REMOVED***RegExp)[]

***REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED*******REMOVED***Enable***REMOVED***Vue***REMOVED***reactivity***REMOVED***transform***REMOVED***(experimental).
***REMOVED******REMOVED******REMOVED*******REMOVED***https://vuejs.org/guide/extras/reactivity-transform.html
***REMOVED******REMOVED******REMOVED*******REMOVED***-***REMOVED***`true`:***REMOVED***transform***REMOVED***will***REMOVED***be***REMOVED***enabled***REMOVED***for***REMOVED***all***REMOVED***vue,js(x),ts(x)***REMOVED***files***REMOVED***except
***REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***those***REMOVED***inside***REMOVED***node_modules
***REMOVED******REMOVED******REMOVED*******REMOVED***-***REMOVED***`string***REMOVED***|***REMOVED***RegExp`:***REMOVED***apply***REMOVED***to***REMOVED***vue***REMOVED***+***REMOVED***only***REMOVED***matched***REMOVED***files***REMOVED***(will***REMOVED***include
***REMOVED******REMOVED******REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***node_modules,***REMOVED***so***REMOVED***specify***REMOVED***directories***REMOVED***if***REMOVED***necessary)
***REMOVED******REMOVED******REMOVED*******REMOVED***-***REMOVED***`false`:***REMOVED***disable***REMOVED***in***REMOVED***all***REMOVED***cases
***REMOVED******REMOVED******REMOVED****
***REMOVED******REMOVED******REMOVED*******REMOVED***@default***REMOVED***false
***REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED***reactivityTransform?:***REMOVED***boolean***REMOVED***|***REMOVED***string***REMOVED***|***REMOVED***RegExp***REMOVED***|***REMOVED***(string***REMOVED***|***REMOVED***RegExp)[]

***REMOVED******REMOVED***/**
***REMOVED******REMOVED******REMOVED*******REMOVED***Use***REMOVED***custom***REMOVED***compiler-sfc***REMOVED***instance.***REMOVED***Can***REMOVED***be***REMOVED***used***REMOVED***to***REMOVED***force***REMOVED***a***REMOVED***specific***REMOVED***version.
***REMOVED******REMOVED******REMOVED****/
***REMOVED******REMOVED***compiler?:***REMOVED***typeof***REMOVED***_compiler
}
```

##***REMOVED***Asset***REMOVED***URL***REMOVED***handling

When***REMOVED***`@vitejs/plugin-vue`***REMOVED***compiles***REMOVED***the***REMOVED***`<template>`***REMOVED***blocks***REMOVED***in***REMOVED***SFCs,***REMOVED***it***REMOVED***also***REMOVED***converts***REMOVED***any***REMOVED***encountered***REMOVED***asset***REMOVED***URLs***REMOVED***into***REMOVED***ESM***REMOVED***imports.

For***REMOVED***example,***REMOVED***the***REMOVED***following***REMOVED***template***REMOVED***snippet:

```vue
<img***REMOVED***src="../image.png"***REMOVED***/>
```

Is***REMOVED***the***REMOVED***same***REMOVED***as:

```vue
<script***REMOVED***setup>
import***REMOVED***_imports_0***REMOVED***from***REMOVED***'../image.png'
</script>

<img***REMOVED***:src="_imports_0"***REMOVED***/>
```

By***REMOVED***default***REMOVED***the***REMOVED***following***REMOVED***tag/attribute***REMOVED***combinations***REMOVED***are***REMOVED***transformed,***REMOVED***and***REMOVED***can***REMOVED***be***REMOVED***configured***REMOVED***using***REMOVED***the***REMOVED***`template.transformAssetUrls`***REMOVED***option.

```js
{
***REMOVED******REMOVED***video:***REMOVED***['src',***REMOVED***'poster'],
***REMOVED******REMOVED***source:***REMOVED***['src'],
***REMOVED******REMOVED***img:***REMOVED***['src'],
***REMOVED******REMOVED***image:***REMOVED***['xlink:href',***REMOVED***'href'],
***REMOVED******REMOVED***use:***REMOVED***['xlink:href',***REMOVED***'href']
}
```

Note***REMOVED***that***REMOVED***only***REMOVED***attribute***REMOVED***values***REMOVED***that***REMOVED***are***REMOVED***static***REMOVED***strings***REMOVED***are***REMOVED***transformed.***REMOVED***Otherwise,***REMOVED***you'd***REMOVED***need***REMOVED***to***REMOVED***import***REMOVED***the***REMOVED***asset***REMOVED***manually,***REMOVED***e.g.***REMOVED***`import***REMOVED***imgUrl***REMOVED***from***REMOVED***'../image.png'`.

##***REMOVED***Example***REMOVED***for***REMOVED***passing***REMOVED***options***REMOVED***to***REMOVED***`vue/compiler-sfc`:

```ts
import***REMOVED***vue***REMOVED***from***REMOVED***'@vitejs/plugin-vue'

export***REMOVED***default***REMOVED***{
***REMOVED******REMOVED***plugins:***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED***vue({
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***template:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***compilerOptions:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***...
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***transformAssetUrls:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***...
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},
***REMOVED******REMOVED******REMOVED******REMOVED***}),
***REMOVED******REMOVED***],
}
```

##***REMOVED***Example***REMOVED***for***REMOVED***transforming***REMOVED***custom***REMOVED***blocks

```ts
import***REMOVED***vue***REMOVED***from***REMOVED***'@vitejs/plugin-vue'
import***REMOVED***yaml***REMOVED***from***REMOVED***'js-yaml'

const***REMOVED***vueI18nPlugin***REMOVED***=***REMOVED***{
***REMOVED******REMOVED***name:***REMOVED***'vue-i18n',
***REMOVED******REMOVED***transform(code,***REMOVED***id)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***if***REMOVED***.vue***REMOVED***file***REMOVED***don't***REMOVED***have***REMOVED***<i18n>***REMOVED***block,***REMOVED***just***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!/vue&type=i18n/.test(id))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***parse***REMOVED***yaml
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(/\.ya?ml$/.test(id))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***code***REMOVED***=***REMOVED***JSON.stringify(yaml.load(code.trim()))
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***mount***REMOVED***the***REMOVED***value***REMOVED***on***REMOVED***the***REMOVED***i18n***REMOVED***property***REMOVED***of***REMOVED***the***REMOVED***component***REMOVED***instance
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***`export***REMOVED***default***REMOVED***Comp***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***Comp.i18n***REMOVED***=***REMOVED***${code}
***REMOVED******REMOVED******REMOVED******REMOVED***}`
***REMOVED******REMOVED***},
}

export***REMOVED***default***REMOVED***{
***REMOVED******REMOVED***plugins:***REMOVED***[vue(),***REMOVED***vueI18nPlugin],
}
```

Create***REMOVED***a***REMOVED***file***REMOVED***named***REMOVED***`Demo.vue`,***REMOVED***add***REMOVED***`lang="yaml"`***REMOVED***to***REMOVED***the***REMOVED***`<i18n>`***REMOVED***blocks,***REMOVED***then***REMOVED***you***REMOVED***can***REMOVED***use***REMOVED***the***REMOVED***syntax***REMOVED***of***REMOVED***`YAML`:

```vue
<template>Hello</template>

<i18n***REMOVED***lang="yaml">
message:***REMOVED***'world'
fullWord:***REMOVED***'hello***REMOVED***world'
</i18n>
```

`message`***REMOVED***is***REMOVED***mounted***REMOVED***on***REMOVED***the***REMOVED***i18n***REMOVED***property***REMOVED***of***REMOVED***the***REMOVED***component***REMOVED***instance,***REMOVED***you***REMOVED***can***REMOVED***use***REMOVED***like***REMOVED***this:

```vue
<script***REMOVED***setup***REMOVED***lang="ts">
import***REMOVED***Demo***REMOVED***from***REMOVED***'components/Demo.vue'
</script>

<template>
***REMOVED******REMOVED***<Demo***REMOVED***/>***REMOVED***{{***REMOVED***Demo.i18n.message***REMOVED***}}
***REMOVED******REMOVED***<div>{{***REMOVED***Demo.i18n.fullWord***REMOVED***}}</div>
</template>
```

##***REMOVED***Using***REMOVED***Vue***REMOVED***SFCs***REMOVED***as***REMOVED***Custom***REMOVED***Elements

>***REMOVED***Requires***REMOVED***`vue@^3.2.0`***REMOVED***&***REMOVED***`@vitejs/plugin-vue@^1.4.0`

Vue***REMOVED***3.2***REMOVED***introduces***REMOVED***the***REMOVED***`defineCustomElement`***REMOVED***method,***REMOVED***which***REMOVED***works***REMOVED***with***REMOVED***SFCs.***REMOVED***By***REMOVED***default,***REMOVED***`<style>`***REMOVED***tags***REMOVED***inside***REMOVED***SFCs***REMOVED***are***REMOVED***extracted***REMOVED***and***REMOVED***merged***REMOVED***into***REMOVED***CSS***REMOVED***files***REMOVED***during***REMOVED***build.***REMOVED***However***REMOVED***when***REMOVED***shipping***REMOVED***a***REMOVED***library***REMOVED***of***REMOVED***custom***REMOVED***elements,***REMOVED***it***REMOVED***may***REMOVED***be***REMOVED***desirable***REMOVED***to***REMOVED***inline***REMOVED***the***REMOVED***styles***REMOVED***as***REMOVED***JavaScript***REMOVED***strings***REMOVED***and***REMOVED***inject***REMOVED***them***REMOVED***into***REMOVED***the***REMOVED***custom***REMOVED***elements'***REMOVED***shadow***REMOVED***root***REMOVED***instead.

Starting***REMOVED***in***REMOVED***1.4.0,***REMOVED***files***REMOVED***ending***REMOVED***with***REMOVED***`*.ce.vue`***REMOVED***will***REMOVED***be***REMOVED***compiled***REMOVED***in***REMOVED***"custom***REMOVED***elements"***REMOVED***mode:***REMOVED***its***REMOVED***`<style>`***REMOVED***tags***REMOVED***are***REMOVED***compiled***REMOVED***into***REMOVED***inlined***REMOVED***CSS***REMOVED***strings***REMOVED***and***REMOVED***attached***REMOVED***to***REMOVED***the***REMOVED***component***REMOVED***as***REMOVED***its***REMOVED***`styles`***REMOVED***property:

```js
import***REMOVED***{***REMOVED***defineCustomElement***REMOVED***}***REMOVED***from***REMOVED***'vue'
import***REMOVED***Example***REMOVED***from***REMOVED***'./Example.ce.vue'

console.log(Example.styles)***REMOVED***//***REMOVED***['/****REMOVED***css***REMOVED***content***REMOVED****/']

//***REMOVED***register
customElements.define('my-example',***REMOVED***defineCustomElement(Example))
```

Note***REMOVED***in***REMOVED***custom***REMOVED***elements***REMOVED***mode***REMOVED***there***REMOVED***is***REMOVED***no***REMOVED***need***REMOVED***to***REMOVED***use***REMOVED***`<style***REMOVED***scoped>`***REMOVED***since***REMOVED***the***REMOVED***CSS***REMOVED***is***REMOVED***already***REMOVED***scoped***REMOVED***inside***REMOVED***the***REMOVED***shadow***REMOVED***DOM.

The***REMOVED***`customElement`***REMOVED***plugin***REMOVED***option***REMOVED***can***REMOVED***be***REMOVED***used***REMOVED***to***REMOVED***configure***REMOVED***the***REMOVED***behavior:

-***REMOVED***`{***REMOVED***customElement:***REMOVED***true***REMOVED***}`***REMOVED***will***REMOVED***import***REMOVED***all***REMOVED***`*.vue`***REMOVED***files***REMOVED***in***REMOVED***custom***REMOVED***element***REMOVED***mode.
-***REMOVED***Use***REMOVED***a***REMOVED***string***REMOVED***or***REMOVED***regex***REMOVED***pattern***REMOVED***to***REMOVED***change***REMOVED***how***REMOVED***files***REMOVED***should***REMOVED***be***REMOVED***loaded***REMOVED***as***REMOVED***Custom***REMOVED***Elements***REMOVED***(this***REMOVED***check***REMOVED***is***REMOVED***applied***REMOVED***after***REMOVED***`include`***REMOVED***and***REMOVED***`exclude`***REMOVED***matches).

##***REMOVED***License

MIT
