'use***REMOVED***strict'

let***REMOVED***pico***REMOVED***=***REMOVED***require('picocolors')

let***REMOVED***terminalHighlight***REMOVED***=***REMOVED***require('./terminal-highlight')

class***REMOVED***CssSyntaxError***REMOVED***extends***REMOVED***Error***REMOVED***{
***REMOVED******REMOVED***constructor(message,***REMOVED***line,***REMOVED***column,***REMOVED***source,***REMOVED***file,***REMOVED***plugin)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***super(message)
***REMOVED******REMOVED******REMOVED******REMOVED***this.name***REMOVED***=***REMOVED***'CssSyntaxError'
***REMOVED******REMOVED******REMOVED******REMOVED***this.reason***REMOVED***=***REMOVED***message

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(file)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.file***REMOVED***=***REMOVED***file
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(source)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.source***REMOVED***=***REMOVED***source
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(plugin)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.plugin***REMOVED***=***REMOVED***plugin
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***line***REMOVED***!==***REMOVED***'undefined'***REMOVED***&&***REMOVED***typeof***REMOVED***column***REMOVED***!==***REMOVED***'undefined')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***line***REMOVED***===***REMOVED***'number')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.line***REMOVED***=***REMOVED***line
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.column***REMOVED***=***REMOVED***column
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.line***REMOVED***=***REMOVED***line.line
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.column***REMOVED***=***REMOVED***line.column
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.endLine***REMOVED***=***REMOVED***column.line
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.endColumn***REMOVED***=***REMOVED***column.column
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***this.setMessage()

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(Error.captureStackTrace)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***Error.captureStackTrace(this,***REMOVED***CssSyntaxError)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***setMessage()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***this.message***REMOVED***=***REMOVED***this.plugin***REMOVED***?***REMOVED***this.plugin***REMOVED***+***REMOVED***':***REMOVED***'***REMOVED***:***REMOVED***''
***REMOVED******REMOVED******REMOVED******REMOVED***this.message***REMOVED***+=***REMOVED***this.file***REMOVED***?***REMOVED***this.file***REMOVED***:***REMOVED***'<css***REMOVED***input>'
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***this.line***REMOVED***!==***REMOVED***'undefined')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.message***REMOVED***+=***REMOVED***':'***REMOVED***+***REMOVED***this.line***REMOVED***+***REMOVED***':'***REMOVED***+***REMOVED***this.column
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***this.message***REMOVED***+=***REMOVED***':***REMOVED***'***REMOVED***+***REMOVED***this.reason
***REMOVED******REMOVED***}

***REMOVED******REMOVED***showSourceCode(color)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!this.source)***REMOVED***return***REMOVED***''

***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***css***REMOVED***=***REMOVED***this.source
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(color***REMOVED***==***REMOVED***null)***REMOVED***color***REMOVED***=***REMOVED***pico.isColorSupported

***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***aside***REMOVED***=***REMOVED***text***REMOVED***=>***REMOVED***text
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***mark***REMOVED***=***REMOVED***text***REMOVED***=>***REMOVED***text
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***highlight***REMOVED***=***REMOVED***text***REMOVED***=>***REMOVED***text
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(color)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***{***REMOVED***bold,***REMOVED***gray,***REMOVED***red***REMOVED***}***REMOVED***=***REMOVED***pico.createColors(true)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***mark***REMOVED***=***REMOVED***text***REMOVED***=>***REMOVED***bold(red(text))
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***aside***REMOVED***=***REMOVED***text***REMOVED***=>***REMOVED***gray(text)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(terminalHighlight)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***highlight***REMOVED***=***REMOVED***text***REMOVED***=>***REMOVED***terminalHighlight(text)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***lines***REMOVED***=***REMOVED***css.split(/\r?\n/)
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***start***REMOVED***=***REMOVED***Math.max(this.line***REMOVED***-***REMOVED***3,***REMOVED***0)
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***end***REMOVED***=***REMOVED***Math.min(this.line***REMOVED***+***REMOVED***2,***REMOVED***lines.length)
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***maxWidth***REMOVED***=***REMOVED***String(end).length

***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***lines
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.slice(start,***REMOVED***end)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.map((line,***REMOVED***index)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***number***REMOVED***=***REMOVED***start***REMOVED***+***REMOVED***1***REMOVED***+***REMOVED***index
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***gutter***REMOVED***=***REMOVED***'***REMOVED***'***REMOVED***+***REMOVED***('***REMOVED***'***REMOVED***+***REMOVED***number).slice(-maxWidth)***REMOVED***+***REMOVED***'***REMOVED***|***REMOVED***'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(number***REMOVED***===***REMOVED***this.line)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(line.length***REMOVED***>***REMOVED***160)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***padding***REMOVED***=***REMOVED***20
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***subLineStart***REMOVED***=***REMOVED***Math.max(0,***REMOVED***this.column***REMOVED***-***REMOVED***padding)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***subLineEnd***REMOVED***=***REMOVED***Math.max(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.column***REMOVED***+***REMOVED***padding,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.endColumn***REMOVED***+***REMOVED***padding
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***subLine***REMOVED***=***REMOVED***line.slice(subLineStart,***REMOVED***subLineEnd)

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***spacing***REMOVED***=
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***aside(gutter.replace(/\d/g,***REMOVED***'***REMOVED***'))***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***line
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.slice(0,***REMOVED***Math.min(this.column***REMOVED***-***REMOVED***1,***REMOVED***padding***REMOVED***-***REMOVED***1))
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.replace(/[^\t]/g,***REMOVED***'***REMOVED***')

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***mark('>')***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***aside(gutter)***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***highlight(subLine)***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'\n***REMOVED***'***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***spacing***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***mark('^')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***spacing***REMOVED***=
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***aside(gutter.replace(/\d/g,***REMOVED***'***REMOVED***'))***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***line.slice(0,***REMOVED***this.column***REMOVED***-***REMOVED***1).replace(/[^\t]/g,***REMOVED***'***REMOVED***')

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***mark('>')***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***aside(gutter)***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***highlight(line)***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'\n***REMOVED***'***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***spacing***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***mark('^')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***'***REMOVED***'***REMOVED***+***REMOVED***aside(gutter)***REMOVED***+***REMOVED***highlight(line)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.join('\n')
***REMOVED******REMOVED***}

***REMOVED******REMOVED***toString()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***code***REMOVED***=***REMOVED***this.showSourceCode()
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(code)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***code***REMOVED***=***REMOVED***'\n\n'***REMOVED***+***REMOVED***code***REMOVED***+***REMOVED***'\n'
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.name***REMOVED***+***REMOVED***':***REMOVED***'***REMOVED***+***REMOVED***this.message***REMOVED***+***REMOVED***code
***REMOVED******REMOVED***}
}

module.exports***REMOVED***=***REMOVED***CssSyntaxError
CssSyntaxError.default***REMOVED***=***REMOVED***CssSyntaxError
