'use***REMOVED***strict'

let***REMOVED***AtRule***REMOVED***=***REMOVED***require('./at-rule')
let***REMOVED***Comment***REMOVED***=***REMOVED***require('./comment')
let***REMOVED***Declaration***REMOVED***=***REMOVED***require('./declaration')
let***REMOVED***Input***REMOVED***=***REMOVED***require('./input')
let***REMOVED***PreviousMap***REMOVED***=***REMOVED***require('./previous-map')
let***REMOVED***Root***REMOVED***=***REMOVED***require('./root')
let***REMOVED***Rule***REMOVED***=***REMOVED***require('./rule')

function***REMOVED***fromJSON(json,***REMOVED***inputs)***REMOVED***{
***REMOVED******REMOVED***if***REMOVED***(Array.isArray(json))***REMOVED***return***REMOVED***json.map(n***REMOVED***=>***REMOVED***fromJSON(n))

***REMOVED******REMOVED***let***REMOVED***{***REMOVED***inputs:***REMOVED***ownInputs,***REMOVED***...defaults***REMOVED***}***REMOVED***=***REMOVED***json
***REMOVED******REMOVED***if***REMOVED***(ownInputs)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***inputs***REMOVED***=***REMOVED***[]
***REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***input***REMOVED***of***REMOVED***ownInputs)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***inputHydrated***REMOVED***=***REMOVED***{***REMOVED***...input,***REMOVED***__proto__:***REMOVED***Input.prototype***REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(inputHydrated.map)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***inputHydrated.map***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***...inputHydrated.map,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***__proto__:***REMOVED***PreviousMap.prototype
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***inputs.push(inputHydrated)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***if***REMOVED***(defaults.nodes)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***defaults.nodes***REMOVED***=***REMOVED***json.nodes.map(n***REMOVED***=>***REMOVED***fromJSON(n,***REMOVED***inputs))
***REMOVED******REMOVED***}
***REMOVED******REMOVED***if***REMOVED***(defaults.source)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***{***REMOVED***inputId,***REMOVED***...source***REMOVED***}***REMOVED***=***REMOVED***defaults.source
***REMOVED******REMOVED******REMOVED******REMOVED***defaults.source***REMOVED***=***REMOVED***source
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(inputId***REMOVED***!=***REMOVED***null)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***defaults.source.input***REMOVED***=***REMOVED***inputs[inputId]
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***if***REMOVED***(defaults.type***REMOVED***===***REMOVED***'root')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***new***REMOVED***Root(defaults)
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(defaults.type***REMOVED***===***REMOVED***'decl')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***new***REMOVED***Declaration(defaults)
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(defaults.type***REMOVED***===***REMOVED***'rule')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***new***REMOVED***Rule(defaults)
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(defaults.type***REMOVED***===***REMOVED***'comment')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***new***REMOVED***Comment(defaults)
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(defaults.type***REMOVED***===***REMOVED***'atrule')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***new***REMOVED***AtRule(defaults)
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error('Unknown***REMOVED***node***REMOVED***type:***REMOVED***'***REMOVED***+***REMOVED***json.type)
***REMOVED******REMOVED***}
}

module.exports***REMOVED***=***REMOVED***fromJSON
fromJSON.default***REMOVED***=***REMOVED***fromJSON
