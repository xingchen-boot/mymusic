/****REMOVED***-*-***REMOVED***Mode:***REMOVED***js;***REMOVED***js-indent-level:***REMOVED***2;***REMOVED***-*-***REMOVED****/
/*
***REMOVED*******REMOVED***Copyright***REMOVED***2014***REMOVED***Mozilla***REMOVED***Foundation***REMOVED***and***REMOVED***contributors
***REMOVED*******REMOVED***Licensed***REMOVED***under***REMOVED***the***REMOVED***New***REMOVED***BSD***REMOVED***license.***REMOVED***See***REMOVED***LICENSE***REMOVED***or:
***REMOVED*******REMOVED***http://opensource.org/licenses/BSD-3-Clause
***REMOVED****/

var***REMOVED***util***REMOVED***=***REMOVED***require('./util');

/**
***REMOVED*******REMOVED***Determine***REMOVED***whether***REMOVED***mappingB***REMOVED***is***REMOVED***after***REMOVED***mappingA***REMOVED***with***REMOVED***respect***REMOVED***to***REMOVED***generated
***REMOVED*******REMOVED***position.
***REMOVED****/
function***REMOVED***generatedPositionAfter(mappingA,***REMOVED***mappingB)***REMOVED***{
***REMOVED******REMOVED***//***REMOVED***Optimized***REMOVED***for***REMOVED***most***REMOVED***common***REMOVED***case
***REMOVED******REMOVED***var***REMOVED***lineA***REMOVED***=***REMOVED***mappingA.generatedLine;
***REMOVED******REMOVED***var***REMOVED***lineB***REMOVED***=***REMOVED***mappingB.generatedLine;
***REMOVED******REMOVED***var***REMOVED***columnA***REMOVED***=***REMOVED***mappingA.generatedColumn;
***REMOVED******REMOVED***var***REMOVED***columnB***REMOVED***=***REMOVED***mappingB.generatedColumn;
***REMOVED******REMOVED***return***REMOVED***lineB***REMOVED***>***REMOVED***lineA***REMOVED***||***REMOVED***lineB***REMOVED***==***REMOVED***lineA***REMOVED***&&***REMOVED***columnB***REMOVED***>=***REMOVED***columnA***REMOVED***||
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***util.compareByGeneratedPositionsInflated(mappingA,***REMOVED***mappingB)***REMOVED***<=***REMOVED***0;
}

/**
***REMOVED*******REMOVED***A***REMOVED***data***REMOVED***structure***REMOVED***to***REMOVED***provide***REMOVED***a***REMOVED***sorted***REMOVED***view***REMOVED***of***REMOVED***accumulated***REMOVED***mappings***REMOVED***in***REMOVED***a
***REMOVED*******REMOVED***performance***REMOVED***conscious***REMOVED***manner.***REMOVED***It***REMOVED***trades***REMOVED***a***REMOVED***neglibable***REMOVED***overhead***REMOVED***in***REMOVED***general
***REMOVED*******REMOVED***case***REMOVED***for***REMOVED***a***REMOVED***large***REMOVED***speedup***REMOVED***in***REMOVED***case***REMOVED***of***REMOVED***mappings***REMOVED***being***REMOVED***added***REMOVED***in***REMOVED***order.
***REMOVED****/
function***REMOVED***MappingList()***REMOVED***{
***REMOVED******REMOVED***this._array***REMOVED***=***REMOVED***[];
***REMOVED******REMOVED***this._sorted***REMOVED***=***REMOVED***true;
***REMOVED******REMOVED***//***REMOVED***Serves***REMOVED***as***REMOVED***infimum
***REMOVED******REMOVED***this._last***REMOVED***=***REMOVED***{generatedLine:***REMOVED***-1,***REMOVED***generatedColumn:***REMOVED***0};
}

/**
***REMOVED*******REMOVED***Iterate***REMOVED***through***REMOVED***internal***REMOVED***items.***REMOVED***This***REMOVED***method***REMOVED***takes***REMOVED***the***REMOVED***same***REMOVED***arguments***REMOVED***that
***REMOVED*******REMOVED***`Array.prototype.forEach`***REMOVED***takes.
***REMOVED****
***REMOVED*******REMOVED***NOTE:***REMOVED***The***REMOVED***order***REMOVED***of***REMOVED***the***REMOVED***mappings***REMOVED***is***REMOVED***NOT***REMOVED***guaranteed.
***REMOVED****/
MappingList.prototype.unsortedForEach***REMOVED***=
***REMOVED******REMOVED***function***REMOVED***MappingList_forEach(aCallback,***REMOVED***aThisArg)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***this._array.forEach(aCallback,***REMOVED***aThisArg);
***REMOVED******REMOVED***};

/**
***REMOVED*******REMOVED***Add***REMOVED***the***REMOVED***given***REMOVED***source***REMOVED***mapping.
***REMOVED****
***REMOVED*******REMOVED***@param***REMOVED***Object***REMOVED***aMapping
***REMOVED****/
MappingList.prototype.add***REMOVED***=***REMOVED***function***REMOVED***MappingList_add(aMapping)***REMOVED***{
***REMOVED******REMOVED***if***REMOVED***(generatedPositionAfter(this._last,***REMOVED***aMapping))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***this._last***REMOVED***=***REMOVED***aMapping;
***REMOVED******REMOVED******REMOVED******REMOVED***this._array.push(aMapping);
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***this._sorted***REMOVED***=***REMOVED***false;
***REMOVED******REMOVED******REMOVED******REMOVED***this._array.push(aMapping);
***REMOVED******REMOVED***}
};

/**
***REMOVED*******REMOVED***Returns***REMOVED***the***REMOVED***flat,***REMOVED***sorted***REMOVED***array***REMOVED***of***REMOVED***mappings.***REMOVED***The***REMOVED***mappings***REMOVED***are***REMOVED***sorted***REMOVED***by
***REMOVED*******REMOVED***generated***REMOVED***position.
***REMOVED****
***REMOVED*******REMOVED***WARNING:***REMOVED***This***REMOVED***method***REMOVED***returns***REMOVED***internal***REMOVED***data***REMOVED***without***REMOVED***copying,***REMOVED***for
***REMOVED*******REMOVED***performance.***REMOVED***The***REMOVED***return***REMOVED***value***REMOVED***must***REMOVED***NOT***REMOVED***be***REMOVED***mutated,***REMOVED***and***REMOVED***should***REMOVED***be***REMOVED***treated***REMOVED***as
***REMOVED*******REMOVED***an***REMOVED***immutable***REMOVED***borrow.***REMOVED***If***REMOVED***you***REMOVED***want***REMOVED***to***REMOVED***take***REMOVED***ownership,***REMOVED***you***REMOVED***must***REMOVED***make***REMOVED***your***REMOVED***own
***REMOVED*******REMOVED***copy.
***REMOVED****/
MappingList.prototype.toArray***REMOVED***=***REMOVED***function***REMOVED***MappingList_toArray()***REMOVED***{
***REMOVED******REMOVED***if***REMOVED***(!this._sorted)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***this._array.sort(util.compareByGeneratedPositionsInflated);
***REMOVED******REMOVED******REMOVED******REMOVED***this._sorted***REMOVED***=***REMOVED***true;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***return***REMOVED***this._array;
};

exports.MappingList***REMOVED***=***REMOVED***MappingList;
