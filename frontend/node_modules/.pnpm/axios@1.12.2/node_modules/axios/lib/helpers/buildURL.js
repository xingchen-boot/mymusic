'use***REMOVED***strict';

import***REMOVED***utils***REMOVED***from***REMOVED***'../utils.js';
import***REMOVED***AxiosURLSearchParams***REMOVED***from***REMOVED***'../helpers/AxiosURLSearchParams.js';

/**
***REMOVED*******REMOVED***It***REMOVED***replaces***REMOVED***all***REMOVED***instances***REMOVED***of***REMOVED***the***REMOVED***characters***REMOVED***`:`,***REMOVED***`$`,***REMOVED***`,`,***REMOVED***`+`,***REMOVED***`[`,***REMOVED***and***REMOVED***`]`***REMOVED***with***REMOVED***their
***REMOVED*******REMOVED***URI***REMOVED***encoded***REMOVED***counterparts
***REMOVED****
***REMOVED*******REMOVED***@param***REMOVED***{string}***REMOVED***val***REMOVED***The***REMOVED***value***REMOVED***to***REMOVED***be***REMOVED***encoded.
***REMOVED****
***REMOVED*******REMOVED***@returns***REMOVED***{string}***REMOVED***The***REMOVED***encoded***REMOVED***value.
***REMOVED****/
function***REMOVED***encode(val)***REMOVED***{
***REMOVED******REMOVED***return***REMOVED***encodeURIComponent(val).
***REMOVED******REMOVED******REMOVED******REMOVED***replace(/%3A/gi,***REMOVED***':').
***REMOVED******REMOVED******REMOVED******REMOVED***replace(/%24/g,***REMOVED***'$').
***REMOVED******REMOVED******REMOVED******REMOVED***replace(/%2C/gi,***REMOVED***',').
***REMOVED******REMOVED******REMOVED******REMOVED***replace(/%20/g,***REMOVED***'+');
}

/**
***REMOVED*******REMOVED***Build***REMOVED***a***REMOVED***URL***REMOVED***by***REMOVED***appending***REMOVED***params***REMOVED***to***REMOVED***the***REMOVED***end
***REMOVED****
***REMOVED*******REMOVED***@param***REMOVED***{string}***REMOVED***url***REMOVED***The***REMOVED***base***REMOVED***of***REMOVED***the***REMOVED***url***REMOVED***(e.g.,***REMOVED***http://www.google.com)
***REMOVED*******REMOVED***@param***REMOVED***{object}***REMOVED***[params]***REMOVED***The***REMOVED***params***REMOVED***to***REMOVED***be***REMOVED***appended
***REMOVED*******REMOVED***@param***REMOVED***{?(object|Function)}***REMOVED***options
***REMOVED****
***REMOVED*******REMOVED***@returns***REMOVED***{string}***REMOVED***The***REMOVED***formatted***REMOVED***url
***REMOVED****/
export***REMOVED***default***REMOVED***function***REMOVED***buildURL(url,***REMOVED***params,***REMOVED***options)***REMOVED***{
***REMOVED******REMOVED***/*eslint***REMOVED***no-param-reassign:0*/
***REMOVED******REMOVED***if***REMOVED***(!params)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***url;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***const***REMOVED***_encode***REMOVED***=***REMOVED***options***REMOVED***&&***REMOVED***options.encode***REMOVED***||***REMOVED***encode;

***REMOVED******REMOVED***if***REMOVED***(utils.isFunction(options))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***options***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***serialize:***REMOVED***options
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED***}***REMOVED***

***REMOVED******REMOVED***const***REMOVED***serializeFn***REMOVED***=***REMOVED***options***REMOVED***&&***REMOVED***options.serialize;

***REMOVED******REMOVED***let***REMOVED***serializedParams;

***REMOVED******REMOVED***if***REMOVED***(serializeFn)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***serializedParams***REMOVED***=***REMOVED***serializeFn(params,***REMOVED***options);
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***serializedParams***REMOVED***=***REMOVED***utils.isURLSearchParams(params)***REMOVED***?
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***params.toString()***REMOVED***:
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***new***REMOVED***AxiosURLSearchParams(params,***REMOVED***options).toString(_encode);
***REMOVED******REMOVED***}

***REMOVED******REMOVED***if***REMOVED***(serializedParams)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***hashmarkIndex***REMOVED***=***REMOVED***url.indexOf("#");

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(hashmarkIndex***REMOVED***!==***REMOVED***-1)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***url***REMOVED***=***REMOVED***url.slice(0,***REMOVED***hashmarkIndex);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***url***REMOVED***+=***REMOVED***(url.indexOf('?')***REMOVED***===***REMOVED***-1***REMOVED***?***REMOVED***'?'***REMOVED***:***REMOVED***'&')***REMOVED***+***REMOVED***serializedParams;
***REMOVED******REMOVED***}

***REMOVED******REMOVED***return***REMOVED***url;
}
