/**
***REMOVED*******REMOVED***Estimate***REMOVED***decoded***REMOVED***byte***REMOVED***length***REMOVED***of***REMOVED***a***REMOVED***data://***REMOVED***URL***REMOVED****without****REMOVED***allocating***REMOVED***large***REMOVED***buffers.
***REMOVED*******REMOVED***-***REMOVED***For***REMOVED***base64:***REMOVED***compute***REMOVED***exact***REMOVED***decoded***REMOVED***size***REMOVED***using***REMOVED***length***REMOVED***and***REMOVED***padding;
***REMOVED*******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handle***REMOVED***%XX***REMOVED***at***REMOVED***the***REMOVED***character-count***REMOVED***level***REMOVED***(no***REMOVED***string***REMOVED***allocation).
***REMOVED*******REMOVED***-***REMOVED***For***REMOVED***non-base64:***REMOVED***use***REMOVED***UTF-8***REMOVED***byteLength***REMOVED***of***REMOVED***the***REMOVED***encoded***REMOVED***body***REMOVED***as***REMOVED***a***REMOVED***safe***REMOVED***upper***REMOVED***bound.
***REMOVED****
***REMOVED*******REMOVED***@param***REMOVED***{string}***REMOVED***url
***REMOVED*******REMOVED***@returns***REMOVED***{number}
***REMOVED****/
export***REMOVED***default***REMOVED***function***REMOVED***estimateDataURLDecodedBytes(url)***REMOVED***{
***REMOVED******REMOVED***if***REMOVED***(!url***REMOVED***||***REMOVED***typeof***REMOVED***url***REMOVED***!==***REMOVED***'string')***REMOVED***return***REMOVED***0;
***REMOVED******REMOVED***if***REMOVED***(!url.startsWith('data:'))***REMOVED***return***REMOVED***0;

***REMOVED******REMOVED***const***REMOVED***comma***REMOVED***=***REMOVED***url.indexOf(',');
***REMOVED******REMOVED***if***REMOVED***(comma***REMOVED***<***REMOVED***0)***REMOVED***return***REMOVED***0;

***REMOVED******REMOVED***const***REMOVED***meta***REMOVED***=***REMOVED***url.slice(5,***REMOVED***comma);
***REMOVED******REMOVED***const***REMOVED***body***REMOVED***=***REMOVED***url.slice(comma***REMOVED***+***REMOVED***1);
***REMOVED******REMOVED***const***REMOVED***isBase64***REMOVED***=***REMOVED***/;base64/i.test(meta);

***REMOVED******REMOVED***if***REMOVED***(isBase64)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***effectiveLen***REMOVED***=***REMOVED***body.length;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***len***REMOVED***=***REMOVED***body.length;***REMOVED***//***REMOVED***cache***REMOVED***length

***REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***i***REMOVED***=***REMOVED***0;***REMOVED***i***REMOVED***<***REMOVED***len;***REMOVED***i++)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(body.charCodeAt(i)***REMOVED***===***REMOVED***37***REMOVED***/****REMOVED***'%'***REMOVED****/***REMOVED***&&***REMOVED***i***REMOVED***+***REMOVED***2***REMOVED***<***REMOVED***len)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***a***REMOVED***=***REMOVED***body.charCodeAt(i***REMOVED***+***REMOVED***1);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***b***REMOVED***=***REMOVED***body.charCodeAt(i***REMOVED***+***REMOVED***2);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isHex***REMOVED***=
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***((a***REMOVED***>=***REMOVED***48***REMOVED***&&***REMOVED***a***REMOVED***<=***REMOVED***57)***REMOVED***||***REMOVED***(a***REMOVED***>=***REMOVED***65***REMOVED***&&***REMOVED***a***REMOVED***<=***REMOVED***70)***REMOVED***||***REMOVED***(a***REMOVED***>=***REMOVED***97***REMOVED***&&***REMOVED***a***REMOVED***<=***REMOVED***102))***REMOVED***&&
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***((b***REMOVED***>=***REMOVED***48***REMOVED***&&***REMOVED***b***REMOVED***<=***REMOVED***57)***REMOVED***||***REMOVED***(b***REMOVED***>=***REMOVED***65***REMOVED***&&***REMOVED***b***REMOVED***<=***REMOVED***70)***REMOVED***||***REMOVED***(b***REMOVED***>=***REMOVED***97***REMOVED***&&***REMOVED***b***REMOVED***<=***REMOVED***102));

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isHex)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***effectiveLen***REMOVED***-=***REMOVED***2;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***i***REMOVED***+=***REMOVED***2;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***pad***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***idx***REMOVED***=***REMOVED***len***REMOVED***-***REMOVED***1;

***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***tailIsPct3D***REMOVED***=***REMOVED***(j)***REMOVED***=>
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***j***REMOVED***>=***REMOVED***2***REMOVED***&&
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***body.charCodeAt(j***REMOVED***-***REMOVED***2)***REMOVED***===***REMOVED***37***REMOVED***&&***REMOVED***//***REMOVED***'%'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***body.charCodeAt(j***REMOVED***-***REMOVED***1)***REMOVED***===***REMOVED***51***REMOVED***&&***REMOVED***//***REMOVED***'3'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(body.charCodeAt(j)***REMOVED***===***REMOVED***68***REMOVED***||***REMOVED***body.charCodeAt(j)***REMOVED***===***REMOVED***100);***REMOVED***//***REMOVED***'D'***REMOVED***or***REMOVED***'d'

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(idx***REMOVED***>=***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(body.charCodeAt(idx)***REMOVED***===***REMOVED***61***REMOVED***/****REMOVED***'='***REMOVED****/)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***pad++;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***idx--;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(tailIsPct3D(idx))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***pad++;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***idx***REMOVED***-=***REMOVED***3;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(pad***REMOVED***===***REMOVED***1***REMOVED***&&***REMOVED***idx***REMOVED***>=***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(body.charCodeAt(idx)***REMOVED***===***REMOVED***61***REMOVED***/****REMOVED***'='***REMOVED****/)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***pad++;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(tailIsPct3D(idx))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***pad++;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***groups***REMOVED***=***REMOVED***Math.floor(effectiveLen***REMOVED***/***REMOVED***4);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***bytes***REMOVED***=***REMOVED***groups***REMOVED*******REMOVED***3***REMOVED***-***REMOVED***(pad***REMOVED***||***REMOVED***0);
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***bytes***REMOVED***>***REMOVED***0***REMOVED***?***REMOVED***bytes***REMOVED***:***REMOVED***0;
***REMOVED******REMOVED***}

***REMOVED******REMOVED***return***REMOVED***Buffer.byteLength(body,***REMOVED***'utf8');
}
