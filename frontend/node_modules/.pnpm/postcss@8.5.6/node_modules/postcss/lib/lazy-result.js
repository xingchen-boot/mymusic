'use***REMOVED***strict'

let***REMOVED***Container***REMOVED***=***REMOVED***require('./container')
let***REMOVED***Document***REMOVED***=***REMOVED***require('./document')
let***REMOVED***MapGenerator***REMOVED***=***REMOVED***require('./map-generator')
let***REMOVED***parse***REMOVED***=***REMOVED***require('./parse')
let***REMOVED***Result***REMOVED***=***REMOVED***require('./result')
let***REMOVED***Root***REMOVED***=***REMOVED***require('./root')
let***REMOVED***stringify***REMOVED***=***REMOVED***require('./stringify')
let***REMOVED***{***REMOVED***isClean,***REMOVED***my***REMOVED***}***REMOVED***=***REMOVED***require('./symbols')
let***REMOVED***warnOnce***REMOVED***=***REMOVED***require('./warn-once')

const***REMOVED***TYPE_TO_CLASS_NAME***REMOVED***=***REMOVED***{
***REMOVED******REMOVED***atrule:***REMOVED***'AtRule',
***REMOVED******REMOVED***comment:***REMOVED***'Comment',
***REMOVED******REMOVED***decl:***REMOVED***'Declaration',
***REMOVED******REMOVED***document:***REMOVED***'Document',
***REMOVED******REMOVED***root:***REMOVED***'Root',
***REMOVED******REMOVED***rule:***REMOVED***'Rule'
}

const***REMOVED***PLUGIN_PROPS***REMOVED***=***REMOVED***{
***REMOVED******REMOVED***AtRule:***REMOVED***true,
***REMOVED******REMOVED***AtRuleExit:***REMOVED***true,
***REMOVED******REMOVED***Comment:***REMOVED***true,
***REMOVED******REMOVED***CommentExit:***REMOVED***true,
***REMOVED******REMOVED***Declaration:***REMOVED***true,
***REMOVED******REMOVED***DeclarationExit:***REMOVED***true,
***REMOVED******REMOVED***Document:***REMOVED***true,
***REMOVED******REMOVED***DocumentExit:***REMOVED***true,
***REMOVED******REMOVED***Once:***REMOVED***true,
***REMOVED******REMOVED***OnceExit:***REMOVED***true,
***REMOVED******REMOVED***postcssPlugin:***REMOVED***true,
***REMOVED******REMOVED***prepare:***REMOVED***true,
***REMOVED******REMOVED***Root:***REMOVED***true,
***REMOVED******REMOVED***RootExit:***REMOVED***true,
***REMOVED******REMOVED***Rule:***REMOVED***true,
***REMOVED******REMOVED***RuleExit:***REMOVED***true
}

const***REMOVED***NOT_VISITORS***REMOVED***=***REMOVED***{
***REMOVED******REMOVED***Once:***REMOVED***true,
***REMOVED******REMOVED***postcssPlugin:***REMOVED***true,
***REMOVED******REMOVED***prepare:***REMOVED***true
}

const***REMOVED***CHILDREN***REMOVED***=***REMOVED***0

function***REMOVED***isPromise(obj)***REMOVED***{
***REMOVED******REMOVED***return***REMOVED***typeof***REMOVED***obj***REMOVED***===***REMOVED***'object'***REMOVED***&&***REMOVED***typeof***REMOVED***obj.then***REMOVED***===***REMOVED***'function'
}

function***REMOVED***getEvents(node)***REMOVED***{
***REMOVED******REMOVED***let***REMOVED***key***REMOVED***=***REMOVED***false
***REMOVED******REMOVED***let***REMOVED***type***REMOVED***=***REMOVED***TYPE_TO_CLASS_NAME[node.type]
***REMOVED******REMOVED***if***REMOVED***(node.type***REMOVED***===***REMOVED***'decl')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***key***REMOVED***=***REMOVED***node.prop.toLowerCase()
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(node.type***REMOVED***===***REMOVED***'atrule')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***key***REMOVED***=***REMOVED***node.name.toLowerCase()
***REMOVED******REMOVED***}

***REMOVED******REMOVED***if***REMOVED***(key***REMOVED***&&***REMOVED***node.append)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***type,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***type***REMOVED***+***REMOVED***'-'***REMOVED***+***REMOVED***key,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***CHILDREN,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***type***REMOVED***+***REMOVED***'Exit',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***type***REMOVED***+***REMOVED***'Exit-'***REMOVED***+***REMOVED***key
***REMOVED******REMOVED******REMOVED******REMOVED***]
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(key)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[type,***REMOVED***type***REMOVED***+***REMOVED***'-'***REMOVED***+***REMOVED***key,***REMOVED***type***REMOVED***+***REMOVED***'Exit',***REMOVED***type***REMOVED***+***REMOVED***'Exit-'***REMOVED***+***REMOVED***key]
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(node.append)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[type,***REMOVED***CHILDREN,***REMOVED***type***REMOVED***+***REMOVED***'Exit']
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[type,***REMOVED***type***REMOVED***+***REMOVED***'Exit']
***REMOVED******REMOVED***}
}

function***REMOVED***toStack(node)***REMOVED***{
***REMOVED******REMOVED***let***REMOVED***events
***REMOVED******REMOVED***if***REMOVED***(node.type***REMOVED***===***REMOVED***'document')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***events***REMOVED***=***REMOVED***['Document',***REMOVED***CHILDREN,***REMOVED***'DocumentExit']
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(node.type***REMOVED***===***REMOVED***'root')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***events***REMOVED***=***REMOVED***['Root',***REMOVED***CHILDREN,***REMOVED***'RootExit']
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***events***REMOVED***=***REMOVED***getEvents(node)
***REMOVED******REMOVED***}

***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***eventIndex:***REMOVED***0,
***REMOVED******REMOVED******REMOVED******REMOVED***events,
***REMOVED******REMOVED******REMOVED******REMOVED***iterator:***REMOVED***0,
***REMOVED******REMOVED******REMOVED******REMOVED***node,
***REMOVED******REMOVED******REMOVED******REMOVED***visitorIndex:***REMOVED***0,
***REMOVED******REMOVED******REMOVED******REMOVED***visitors:***REMOVED***[]
***REMOVED******REMOVED***}
}

function***REMOVED***cleanMarks(node)***REMOVED***{
***REMOVED******REMOVED***node[isClean]***REMOVED***=***REMOVED***false
***REMOVED******REMOVED***if***REMOVED***(node.nodes)***REMOVED***node.nodes.forEach(i***REMOVED***=>***REMOVED***cleanMarks(i))
***REMOVED******REMOVED***return***REMOVED***node
}

let***REMOVED***postcss***REMOVED***=***REMOVED***{}

class***REMOVED***LazyResult***REMOVED***{
***REMOVED******REMOVED***get***REMOVED***content()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.stringify().content
***REMOVED******REMOVED***}

***REMOVED******REMOVED***get***REMOVED***css()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.stringify().css
***REMOVED******REMOVED***}

***REMOVED******REMOVED***get***REMOVED***map()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.stringify().map
***REMOVED******REMOVED***}

***REMOVED******REMOVED***get***REMOVED***messages()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.sync().messages
***REMOVED******REMOVED***}

***REMOVED******REMOVED***get***REMOVED***opts()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.result.opts
***REMOVED******REMOVED***}

***REMOVED******REMOVED***get***REMOVED***processor()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.result.processor
***REMOVED******REMOVED***}

***REMOVED******REMOVED***get***REMOVED***root()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.sync().root
***REMOVED******REMOVED***}

***REMOVED******REMOVED***get***REMOVED***[Symbol.toStringTag]()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***'LazyResult'
***REMOVED******REMOVED***}

***REMOVED******REMOVED***constructor(processor,***REMOVED***css,***REMOVED***opts)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***this.stringified***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED***this.processed***REMOVED***=***REMOVED***false

***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***root
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***typeof***REMOVED***css***REMOVED***===***REMOVED***'object'***REMOVED***&&
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***css***REMOVED***!==***REMOVED***null***REMOVED***&&
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(css.type***REMOVED***===***REMOVED***'root'***REMOVED***||***REMOVED***css.type***REMOVED***===***REMOVED***'document')
***REMOVED******REMOVED******REMOVED******REMOVED***)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***root***REMOVED***=***REMOVED***cleanMarks(css)
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(css***REMOVED***instanceof***REMOVED***LazyResult***REMOVED***||***REMOVED***css***REMOVED***instanceof***REMOVED***Result)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***root***REMOVED***=***REMOVED***cleanMarks(css.root)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(css.map)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***opts.map***REMOVED***===***REMOVED***'undefined')***REMOVED***opts.map***REMOVED***=***REMOVED***{}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!opts.map.inline)***REMOVED***opts.map.inline***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***opts.map.prev***REMOVED***=***REMOVED***css.map
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***parser***REMOVED***=***REMOVED***parse
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(opts.syntax)***REMOVED***parser***REMOVED***=***REMOVED***opts.syntax.parse
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(opts.parser)***REMOVED***parser***REMOVED***=***REMOVED***opts.parser
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(parser.parse)***REMOVED***parser***REMOVED***=***REMOVED***parser.parse

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***root***REMOVED***=***REMOVED***parser(css,***REMOVED***opts)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.processed***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.error***REMOVED***=***REMOVED***error
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(root***REMOVED***&&***REMOVED***!root[my])***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/****REMOVED***c8***REMOVED***ignore***REMOVED***next***REMOVED***2***REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***Container.rebuild(root)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***this.result***REMOVED***=***REMOVED***new***REMOVED***Result(processor,***REMOVED***root,***REMOVED***opts)
***REMOVED******REMOVED******REMOVED******REMOVED***this.helpers***REMOVED***=***REMOVED***{***REMOVED***...postcss,***REMOVED***postcss,***REMOVED***result:***REMOVED***this.result***REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***this.plugins***REMOVED***=***REMOVED***this.processor.plugins.map(plugin***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***plugin***REMOVED***===***REMOVED***'object'***REMOVED***&&***REMOVED***plugin.prepare)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***{***REMOVED***...plugin,***REMOVED***...plugin.prepare(this.result)***REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***plugin
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED***}

***REMOVED******REMOVED***async()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.error)***REMOVED***return***REMOVED***Promise.reject(this.error)
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.processed)***REMOVED***return***REMOVED***Promise.resolve(this.result)
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!this.processing)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.processing***REMOVED***=***REMOVED***this.runAsync()
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.processing
***REMOVED******REMOVED***}

***REMOVED******REMOVED***catch(onRejected)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.async().catch(onRejected)
***REMOVED******REMOVED***}

***REMOVED******REMOVED***finally(onFinally)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.async().then(onFinally,***REMOVED***onFinally)
***REMOVED******REMOVED***}

***REMOVED******REMOVED***getAsyncError()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error('Use***REMOVED***process(css).then(cb)***REMOVED***to***REMOVED***work***REMOVED***with***REMOVED***async***REMOVED***plugins')
***REMOVED******REMOVED***}

***REMOVED******REMOVED***handleError(error,***REMOVED***node)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***plugin***REMOVED***=***REMOVED***this.result.lastPlugin
***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(node)***REMOVED***node.addToError(error)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.error***REMOVED***=***REMOVED***error
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(error.name***REMOVED***===***REMOVED***'CssSyntaxError'***REMOVED***&&***REMOVED***!error.plugin)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***error.plugin***REMOVED***=***REMOVED***plugin.postcssPlugin
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***error.setMessage()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(plugin.postcssVersion)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(process.env.NODE_ENV***REMOVED***!==***REMOVED***'production')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***pluginName***REMOVED***=***REMOVED***plugin.postcssPlugin
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***pluginVer***REMOVED***=***REMOVED***plugin.postcssVersion
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***runtimeVer***REMOVED***=***REMOVED***this.result.processor.version
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***a***REMOVED***=***REMOVED***pluginVer.split('.')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***b***REMOVED***=***REMOVED***runtimeVer.split('.')

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(a[0]***REMOVED***!==***REMOVED***b[0]***REMOVED***||***REMOVED***parseInt(a[1])***REMOVED***>***REMOVED***parseInt(b[1]))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***no-console
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'Unknown***REMOVED***error***REMOVED***from***REMOVED***PostCSS***REMOVED***plugin.***REMOVED***Your***REMOVED***current***REMOVED***PostCSS***REMOVED***'***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'version***REMOVED***is***REMOVED***'***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***runtimeVer***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***',***REMOVED***but***REMOVED***'***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***pluginName***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'***REMOVED***uses***REMOVED***'***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***pluginVer***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'.***REMOVED***Perhaps***REMOVED***this***REMOVED***is***REMOVED***the***REMOVED***source***REMOVED***of***REMOVED***the***REMOVED***error***REMOVED***below.'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(err)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***/****REMOVED***c8***REMOVED***ignore***REMOVED***next***REMOVED***3***REMOVED****/
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***eslint-disable-next-line***REMOVED***no-console
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(console***REMOVED***&&***REMOVED***console.error)***REMOVED***console.error(err)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***error
***REMOVED******REMOVED***}

***REMOVED******REMOVED***prepareVisitors()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***this.listeners***REMOVED***=***REMOVED***{}
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***add***REMOVED***=***REMOVED***(plugin,***REMOVED***type,***REMOVED***cb)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!this.listeners[type])***REMOVED***this.listeners[type]***REMOVED***=***REMOVED***[]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.listeners[type].push([plugin,***REMOVED***cb])
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***plugin***REMOVED***of***REMOVED***this.plugins)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***plugin***REMOVED***===***REMOVED***'object')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***event***REMOVED***in***REMOVED***plugin)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!PLUGIN_PROPS[event]***REMOVED***&&***REMOVED***/^[A-Z]/.test(event))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***`Unknown***REMOVED***event***REMOVED***${event}***REMOVED***in***REMOVED***${plugin.postcssPlugin}.***REMOVED***`***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***`Try***REMOVED***to***REMOVED***update***REMOVED***PostCSS***REMOVED***(${this.processor.version}***REMOVED***now).`
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!NOT_VISITORS[event])***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***plugin[event]***REMOVED***===***REMOVED***'object')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***filter***REMOVED***in***REMOVED***plugin[event])***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(filter***REMOVED***===***REMOVED***'*')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***add(plugin,***REMOVED***event,***REMOVED***plugin[event][filter])
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***add(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***plugin,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***event***REMOVED***+***REMOVED***'-'***REMOVED***+***REMOVED***filter.toLowerCase(),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***plugin[event][filter]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(typeof***REMOVED***plugin[event]***REMOVED***===***REMOVED***'function')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***add(plugin,***REMOVED***event,***REMOVED***plugin[event])
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***this.hasListener***REMOVED***=***REMOVED***Object.keys(this.listeners).length***REMOVED***>***REMOVED***0
***REMOVED******REMOVED***}

***REMOVED******REMOVED***async***REMOVED***runAsync()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***this.plugin***REMOVED***=***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***i***REMOVED***=***REMOVED***0;***REMOVED***i***REMOVED***<***REMOVED***this.plugins.length;***REMOVED***i++)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***plugin***REMOVED***=***REMOVED***this.plugins[i]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***promise***REMOVED***=***REMOVED***this.runOnRoot(plugin)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isPromise(promise))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***promise
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***this.handleError(error)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***this.prepareVisitors()
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.hasListener)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***root***REMOVED***=***REMOVED***this.result.root
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***(!root[isClean])***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***root[isClean]***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***stack***REMOVED***=***REMOVED***[toStack(root)]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***(stack.length***REMOVED***>***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***promise***REMOVED***=***REMOVED***this.visitTick(stack)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isPromise(promise))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***promise
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(e)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***node***REMOVED***=***REMOVED***stack[stack.length***REMOVED***-***REMOVED***1].node
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***this.handleError(e,***REMOVED***node)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.listeners.OnceExit)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***[plugin,***REMOVED***visitor]***REMOVED***of***REMOVED***this.listeners.OnceExit)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.result.lastPlugin***REMOVED***=***REMOVED***plugin
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(root.type***REMOVED***===***REMOVED***'document')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***roots***REMOVED***=***REMOVED***root.nodes.map(subRoot***REMOVED***=>
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***visitor(subRoot,***REMOVED***this.helpers)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***Promise.all(roots)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***visitor(root,***REMOVED***this.helpers)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(e)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***this.handleError(e)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***this.processed***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.stringify()
***REMOVED******REMOVED***}

***REMOVED******REMOVED***runOnRoot(plugin)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***this.result.lastPlugin***REMOVED***=***REMOVED***plugin
***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***plugin***REMOVED***===***REMOVED***'object'***REMOVED***&&***REMOVED***plugin.Once)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.result.root.type***REMOVED***===***REMOVED***'document')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***roots***REMOVED***=***REMOVED***this.result.root.nodes.map(root***REMOVED***=>
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***plugin.Once(root,***REMOVED***this.helpers)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isPromise(roots[0]))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***Promise.all(roots)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***roots
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***plugin.Once(this.result.root,***REMOVED***this.helpers)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(typeof***REMOVED***plugin***REMOVED***===***REMOVED***'function')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***plugin(this.result.root,***REMOVED***this.result)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***this.handleError(error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***stringify()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.error)***REMOVED***throw***REMOVED***this.error
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.stringified)***REMOVED***return***REMOVED***this.result
***REMOVED******REMOVED******REMOVED******REMOVED***this.stringified***REMOVED***=***REMOVED***true

***REMOVED******REMOVED******REMOVED******REMOVED***this.sync()

***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***opts***REMOVED***=***REMOVED***this.result.opts
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***str***REMOVED***=***REMOVED***stringify
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(opts.syntax)***REMOVED***str***REMOVED***=***REMOVED***opts.syntax.stringify
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(opts.stringifier)***REMOVED***str***REMOVED***=***REMOVED***opts.stringifier
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(str.stringify)***REMOVED***str***REMOVED***=***REMOVED***str.stringify

***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***map***REMOVED***=***REMOVED***new***REMOVED***MapGenerator(str,***REMOVED***this.result.root,***REMOVED***this.result.opts)
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***data***REMOVED***=***REMOVED***map.generate()
***REMOVED******REMOVED******REMOVED******REMOVED***this.result.css***REMOVED***=***REMOVED***data[0]
***REMOVED******REMOVED******REMOVED******REMOVED***this.result.map***REMOVED***=***REMOVED***data[1]

***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.result
***REMOVED******REMOVED***}

***REMOVED******REMOVED***sync()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.error)***REMOVED***throw***REMOVED***this.error
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.processed)***REMOVED***return***REMOVED***this.result
***REMOVED******REMOVED******REMOVED******REMOVED***this.processed***REMOVED***=***REMOVED***true

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.processing)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***this.getAsyncError()
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***plugin***REMOVED***of***REMOVED***this.plugins)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***promise***REMOVED***=***REMOVED***this.runOnRoot(plugin)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isPromise(promise))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***this.getAsyncError()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***this.prepareVisitors()
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.hasListener)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***root***REMOVED***=***REMOVED***this.result.root
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***(!root[isClean])***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***root[isClean]***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.walkSync(root)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.listeners.OnceExit)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(root.type***REMOVED***===***REMOVED***'document')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***subRoot***REMOVED***of***REMOVED***root.nodes)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.visitSync(this.listeners.OnceExit,***REMOVED***subRoot)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.visitSync(this.listeners.OnceExit,***REMOVED***root)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.result
***REMOVED******REMOVED***}

***REMOVED******REMOVED***then(onFulfilled,***REMOVED***onRejected)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(process.env.NODE_ENV***REMOVED***!==***REMOVED***'production')***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!('from'***REMOVED***in***REMOVED***this.opts))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***warnOnce(
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'Without***REMOVED***`from`***REMOVED***option***REMOVED***PostCSS***REMOVED***could***REMOVED***generate***REMOVED***wrong***REMOVED***source***REMOVED***map***REMOVED***'***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'and***REMOVED***will***REMOVED***not***REMOVED***find***REMOVED***Browserslist***REMOVED***config.***REMOVED***Set***REMOVED***it***REMOVED***to***REMOVED***CSS***REMOVED***file***REMOVED***path***REMOVED***'***REMOVED***+
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'or***REMOVED***to***REMOVED***`undefined`***REMOVED***to***REMOVED***prevent***REMOVED***this***REMOVED***warning.'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.async().then(onFulfilled,***REMOVED***onRejected)
***REMOVED******REMOVED***}

***REMOVED******REMOVED***toString()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.css
***REMOVED******REMOVED***}

***REMOVED******REMOVED***visitSync(visitors,***REMOVED***node)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***[plugin,***REMOVED***visitor]***REMOVED***of***REMOVED***visitors)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.result.lastPlugin***REMOVED***=***REMOVED***plugin
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***promise
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***promise***REMOVED***=***REMOVED***visitor(node,***REMOVED***this.helpers)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(e)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***this.handleError(e,***REMOVED***node.proxyOf)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(node.type***REMOVED***!==***REMOVED***'root'***REMOVED***&&***REMOVED***node.type***REMOVED***!==***REMOVED***'document'***REMOVED***&&***REMOVED***!node.parent)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isPromise(promise))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***this.getAsyncError()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***visitTick(stack)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***visit***REMOVED***=***REMOVED***stack[stack.length***REMOVED***-***REMOVED***1]
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***{***REMOVED***node,***REMOVED***visitors***REMOVED***}***REMOVED***=***REMOVED***visit

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(node.type***REMOVED***!==***REMOVED***'root'***REMOVED***&&***REMOVED***node.type***REMOVED***!==***REMOVED***'document'***REMOVED***&&***REMOVED***!node.parent)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***stack.pop()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(visitors.length***REMOVED***>***REMOVED***0***REMOVED***&&***REMOVED***visit.visitorIndex***REMOVED***<***REMOVED***visitors.length)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***[plugin,***REMOVED***visitor]***REMOVED***=***REMOVED***visitors[visit.visitorIndex]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***visit.visitorIndex***REMOVED***+=***REMOVED***1
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(visit.visitorIndex***REMOVED***===***REMOVED***visitors.length)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***visit.visitors***REMOVED***=***REMOVED***[]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***visit.visitorIndex***REMOVED***=***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***this.result.lastPlugin***REMOVED***=***REMOVED***plugin
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***visitor(node.toProxy(),***REMOVED***this.helpers)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(e)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***this.handleError(e,***REMOVED***node)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(visit.iterator***REMOVED***!==***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***iterator***REMOVED***=***REMOVED***visit.iterator
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***child
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***((child***REMOVED***=***REMOVED***node.nodes[node.indexes[iterator]]))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***node.indexes[iterator]***REMOVED***+=***REMOVED***1
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!child[isClean])***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***child[isClean]***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***stack.push(toStack(child))
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***visit.iterator***REMOVED***=***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***delete***REMOVED***node.indexes[iterator]
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***events***REMOVED***=***REMOVED***visit.events
***REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***(visit.eventIndex***REMOVED***<***REMOVED***events.length)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***event***REMOVED***=***REMOVED***events[visit.eventIndex]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***visit.eventIndex***REMOVED***+=***REMOVED***1
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(event***REMOVED***===***REMOVED***CHILDREN)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(node.nodes***REMOVED***&&***REMOVED***node.nodes.length)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***node[isClean]***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***visit.iterator***REMOVED***=***REMOVED***node.getIterator()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(this.listeners[event])***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***visit.visitors***REMOVED***=***REMOVED***this.listeners[event]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***stack.pop()
***REMOVED******REMOVED***}

***REMOVED******REMOVED***walkSync(node)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***node[isClean]***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***events***REMOVED***=***REMOVED***getEvents(node)
***REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***event***REMOVED***of***REMOVED***events)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(event***REMOVED***===***REMOVED***CHILDREN)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(node.nodes)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***node.each(child***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!child[isClean])***REMOVED***this.walkSync(child)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***visitors***REMOVED***=***REMOVED***this.listeners[event]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(visitors)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(this.visitSync(visitors,***REMOVED***node.toProxy()))***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***warnings()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.sync().warnings()
***REMOVED******REMOVED***}
}

LazyResult.registerPostcss***REMOVED***=***REMOVED***dependant***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***postcss***REMOVED***=***REMOVED***dependant
}

module.exports***REMOVED***=***REMOVED***LazyResult
LazyResult.default***REMOVED***=***REMOVED***LazyResult

Root.registerLazyResult(LazyResult)
Document.registerLazyResult(LazyResult)
