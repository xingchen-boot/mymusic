import***REMOVED***{***REMOVED***D,***REMOVED***W,***REMOVED***Y***REMOVED***}***REMOVED***from***REMOVED***'../../constant';
var***REMOVED***isoWeekPrettyUnit***REMOVED***=***REMOVED***'isoweek';
export***REMOVED***default***REMOVED***(function***REMOVED***(o,***REMOVED***c,***REMOVED***d)***REMOVED***{
***REMOVED******REMOVED***var***REMOVED***getYearFirstThursday***REMOVED***=***REMOVED***function***REMOVED***getYearFirstThursday(year,***REMOVED***isUtc)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***yearFirstDay***REMOVED***=***REMOVED***(isUtc***REMOVED***?***REMOVED***d.utc***REMOVED***:***REMOVED***d)().year(year).startOf(Y);
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***addDiffDays***REMOVED***=***REMOVED***4***REMOVED***-***REMOVED***yearFirstDay.isoWeekday();

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(yearFirstDay.isoWeekday()***REMOVED***>***REMOVED***4)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***addDiffDays***REMOVED***+=***REMOVED***7;
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***yearFirstDay.add(addDiffDays,***REMOVED***D);
***REMOVED******REMOVED***};

***REMOVED******REMOVED***var***REMOVED***getCurrentWeekThursday***REMOVED***=***REMOVED***function***REMOVED***getCurrentWeekThursday(ins)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***ins.add(4***REMOVED***-***REMOVED***ins.isoWeekday(),***REMOVED***D);
***REMOVED******REMOVED***};

***REMOVED******REMOVED***var***REMOVED***proto***REMOVED***=***REMOVED***c.prototype;

***REMOVED******REMOVED***proto.isoWeekYear***REMOVED***=***REMOVED***function***REMOVED***()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***nowWeekThursday***REMOVED***=***REMOVED***getCurrentWeekThursday(this);
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***nowWeekThursday.year();
***REMOVED******REMOVED***};

***REMOVED******REMOVED***proto.isoWeek***REMOVED***=***REMOVED***function***REMOVED***(week)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!this.$utils().u(week))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.add((week***REMOVED***-***REMOVED***this.isoWeek())***REMOVED*******REMOVED***7,***REMOVED***D);
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***nowWeekThursday***REMOVED***=***REMOVED***getCurrentWeekThursday(this);
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***diffWeekThursday***REMOVED***=***REMOVED***getYearFirstThursday(this.isoWeekYear(),***REMOVED***this.$u);
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***nowWeekThursday.diff(diffWeekThursday,***REMOVED***W)***REMOVED***+***REMOVED***1;
***REMOVED******REMOVED***};

***REMOVED******REMOVED***proto.isoWeekday***REMOVED***=***REMOVED***function***REMOVED***(week)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!this.$utils().u(week))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.day(this.day()***REMOVED***%***REMOVED***7***REMOVED***?***REMOVED***week***REMOVED***:***REMOVED***week***REMOVED***-***REMOVED***7);
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***this.day()***REMOVED***||***REMOVED***7;
***REMOVED******REMOVED***};

***REMOVED******REMOVED***var***REMOVED***oldStartOf***REMOVED***=***REMOVED***proto.startOf;

***REMOVED******REMOVED***proto.startOf***REMOVED***=***REMOVED***function***REMOVED***(units,***REMOVED***startOf)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***utils***REMOVED***=***REMOVED***this.$utils();
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***isStartOf***REMOVED***=***REMOVED***!utils.u(startOf)***REMOVED***?***REMOVED***startOf***REMOVED***:***REMOVED***true;
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***unit***REMOVED***=***REMOVED***utils.p(units);

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(unit***REMOVED***===***REMOVED***isoWeekPrettyUnit)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***isStartOf***REMOVED***?***REMOVED***this.date(this.date()***REMOVED***-***REMOVED***(this.isoWeekday()***REMOVED***-***REMOVED***1)).startOf('day')***REMOVED***:***REMOVED***this.date(this.date()***REMOVED***-***REMOVED***1***REMOVED***-***REMOVED***(this.isoWeekday()***REMOVED***-***REMOVED***1)***REMOVED***+***REMOVED***7).endOf('day');
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***oldStartOf.bind(this)(units,***REMOVED***startOf);
***REMOVED******REMOVED***};
});