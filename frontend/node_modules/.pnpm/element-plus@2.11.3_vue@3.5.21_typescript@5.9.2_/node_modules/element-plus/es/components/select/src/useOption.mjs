import***REMOVED***{***REMOVED***inject,***REMOVED***computed,***REMOVED***getCurrentInstance,***REMOVED***toRaw,***REMOVED***watch***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***castArray,***REMOVED***get,***REMOVED***isEqual***REMOVED***}***REMOVED***from***REMOVED***'lodash-unified';
import***REMOVED***{***REMOVED***selectKey,***REMOVED***selectGroupKey***REMOVED***}***REMOVED***from***REMOVED***'./token.mjs';
import***REMOVED***{***REMOVED***COMPONENT_NAME***REMOVED***}***REMOVED***from***REMOVED***'./option.mjs';
import***REMOVED***{***REMOVED***escapeStringRegexp***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/strings.mjs';
import***REMOVED***{***REMOVED***throwError***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/error.mjs';
import***REMOVED***{***REMOVED***isObject***REMOVED***}***REMOVED***from***REMOVED***'@vue/shared';

function***REMOVED***useOption(props,***REMOVED***states)***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***select***REMOVED***=***REMOVED***inject(selectKey);
***REMOVED******REMOVED***if***REMOVED***(!select)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***throwError(COMPONENT_NAME,***REMOVED***"usage:***REMOVED***<el-select><el-option***REMOVED***/></el-select/>");
***REMOVED******REMOVED***}
***REMOVED******REMOVED***const***REMOVED***selectGroup***REMOVED***=***REMOVED***inject(selectGroupKey,***REMOVED***{***REMOVED***disabled:***REMOVED***false***REMOVED***});
***REMOVED******REMOVED***const***REMOVED***itemSelected***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***contains(castArray(select.props.modelValue),***REMOVED***props.value);
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***limitReached***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(select.props.multiple)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***modelValue***REMOVED***=***REMOVED***castArray((_a***REMOVED***=***REMOVED***select.props.modelValue)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_a***REMOVED***:***REMOVED***[]);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***!itemSelected.value***REMOVED***&&***REMOVED***modelValue.length***REMOVED***>=***REMOVED***select.props.multipleLimit***REMOVED***&&***REMOVED***select.props.multipleLimit***REMOVED***>***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***false;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***currentLabel***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_a***REMOVED***=***REMOVED***props.label)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_a***REMOVED***:***REMOVED***isObject(props.value)***REMOVED***?***REMOVED***""***REMOVED***:***REMOVED***props.value;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***currentValue***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.value***REMOVED***||***REMOVED***props.label***REMOVED***||***REMOVED***"";
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***isDisabled***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.disabled***REMOVED***||***REMOVED***states.groupDisabled***REMOVED***||***REMOVED***limitReached.value;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***instance***REMOVED***=***REMOVED***getCurrentInstance();
***REMOVED******REMOVED***const***REMOVED***contains***REMOVED***=***REMOVED***(arr***REMOVED***=***REMOVED***[],***REMOVED***target)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!isObject(props.value))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***arr***REMOVED***&&***REMOVED***arr.includes(target);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***valueKey***REMOVED***=***REMOVED***select.props.valueKey;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***arr***REMOVED***&&***REMOVED***arr.some((item)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***toRaw(get(item,***REMOVED***valueKey))***REMOVED***===***REMOVED***get(target,***REMOVED***valueKey);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***hoverItem***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.disabled***REMOVED***&&***REMOVED***!selectGroup.disabled)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***select.states.hoveringIndex***REMOVED***=***REMOVED***select.optionsArray.indexOf(instance.proxy);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***updateOption***REMOVED***=***REMOVED***(query)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***regexp***REMOVED***=***REMOVED***new***REMOVED***RegExp(escapeStringRegexp(query),***REMOVED***"i");
***REMOVED******REMOVED******REMOVED******REMOVED***states.visible***REMOVED***=***REMOVED***regexp.test(String(currentLabel.value))***REMOVED***||***REMOVED***props.created;
***REMOVED******REMOVED***};
***REMOVED******REMOVED***watch(()***REMOVED***=>***REMOVED***currentLabel.value,***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.created***REMOVED***&&***REMOVED***!select.props.remote)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***select.setSelected();
***REMOVED******REMOVED***});
***REMOVED******REMOVED***watch(()***REMOVED***=>***REMOVED***props.value,***REMOVED***(val,***REMOVED***oldVal)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***remote,***REMOVED***valueKey***REMOVED***}***REMOVED***=***REMOVED***select.props;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***shouldUpdate***REMOVED***=***REMOVED***remote***REMOVED***?***REMOVED***val***REMOVED***!==***REMOVED***oldVal***REMOVED***:***REMOVED***!isEqual(val,***REMOVED***oldVal);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(shouldUpdate)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***select.onOptionDestroy(oldVal,***REMOVED***instance.proxy);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***select.onOptionCreate(instance.proxy);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.created***REMOVED***&&***REMOVED***!remote)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(valueKey***REMOVED***&&***REMOVED***isObject(val)***REMOVED***&&***REMOVED***isObject(oldVal)***REMOVED***&&***REMOVED***val[valueKey]***REMOVED***===***REMOVED***oldVal[valueKey])***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***select.setSelected();
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***});
***REMOVED******REMOVED***watch(()***REMOVED***=>***REMOVED***selectGroup.disabled,***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***states.groupDisabled***REMOVED***=***REMOVED***selectGroup.disabled;
***REMOVED******REMOVED***},***REMOVED***{***REMOVED***immediate:***REMOVED***true***REMOVED***});
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***select,
***REMOVED******REMOVED******REMOVED******REMOVED***currentLabel,
***REMOVED******REMOVED******REMOVED******REMOVED***currentValue,
***REMOVED******REMOVED******REMOVED******REMOVED***itemSelected,
***REMOVED******REMOVED******REMOVED******REMOVED***isDisabled,
***REMOVED******REMOVED******REMOVED******REMOVED***hoverItem,
***REMOVED******REMOVED******REMOVED******REMOVED***updateOption
***REMOVED******REMOVED***};
}

export***REMOVED***{***REMOVED***useOption***REMOVED***};
//#***REMOVED***sourceMappingURL=useOption.mjs.map
