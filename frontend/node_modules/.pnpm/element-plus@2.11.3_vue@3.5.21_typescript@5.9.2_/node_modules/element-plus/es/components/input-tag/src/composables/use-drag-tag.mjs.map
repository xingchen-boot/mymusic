{"version":3,"file":"use-drag-tag.mjs","sources":["../../../../../../../packages/components/input-tag/src/composables/use-drag-tag.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***ref,***REMOVED***shallowRef***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{***REMOVED***useNamespace***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/hooks'\nimport***REMOVED***{***REMOVED***getStyle,***REMOVED***isUndefined,***REMOVED***setStyle***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***ShallowRef***REMOVED***}***REMOVED***from***REMOVED***'vue'\n\ntype***REMOVED***DropType***REMOVED***=***REMOVED***'before'***REMOVED***|***REMOVED***'after'\n\ninterface***REMOVED***UseDragTagOptions***REMOVED***{\n***REMOVED******REMOVED***wrapperRef:***REMOVED***ShallowRef<HTMLElement***REMOVED***|***REMOVED***undefined>\n***REMOVED******REMOVED***handleDragged:***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED***draggingIndex:***REMOVED***number,\n***REMOVED******REMOVED******REMOVED******REMOVED***dropIndex:***REMOVED***number,\n***REMOVED******REMOVED******REMOVED******REMOVED***type:***REMOVED***DropType\n***REMOVED******REMOVED***)***REMOVED***=>***REMOVED***void\n***REMOVED******REMOVED***afterDragged?:***REMOVED***()***REMOVED***=>***REMOVED***void\n}\n\nexport***REMOVED***function***REMOVED***useDragTag({\n***REMOVED******REMOVED***wrapperRef,\n***REMOVED******REMOVED***handleDragged,\n***REMOVED******REMOVED***afterDragged,\n}:***REMOVED***UseDragTagOptions)***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***ns***REMOVED***=***REMOVED***useNamespace('input-tag')\n***REMOVED******REMOVED***const***REMOVED***dropIndicatorRef***REMOVED***=***REMOVED***shallowRef<HTMLElement>()\n***REMOVED******REMOVED***const***REMOVED***showDropIndicator***REMOVED***=***REMOVED***ref(false)\n\n***REMOVED******REMOVED***let***REMOVED***draggingIndex:***REMOVED***number***REMOVED***|***REMOVED***undefined\n***REMOVED******REMOVED***let***REMOVED***draggingTag:***REMOVED***HTMLElement***REMOVED***|***REMOVED***null\n***REMOVED******REMOVED***let***REMOVED***dropIndex:***REMOVED***number***REMOVED***|***REMOVED***undefined\n***REMOVED******REMOVED***let***REMOVED***dropType:***REMOVED***DropType***REMOVED***|***REMOVED***undefined\n\n***REMOVED******REMOVED***function***REMOVED***getTagClassName(index:***REMOVED***number)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***`.${ns.e('inner')}***REMOVED***.${ns.namespace.value}-tag:nth-child(${\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***index***REMOVED***+***REMOVED***1\n***REMOVED******REMOVED******REMOVED******REMOVED***})`\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***handleDragStart(event:***REMOVED***DragEvent,***REMOVED***index:***REMOVED***number)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***draggingIndex***REMOVED***=***REMOVED***index\n***REMOVED******REMOVED******REMOVED******REMOVED***draggingTag***REMOVED***=***REMOVED***wrapperRef.value!.querySelector<HTMLElement>(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***getTagClassName(index)\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(draggingTag)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***draggingTag.style.opacity***REMOVED***=***REMOVED***'0.5'\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***event.dataTransfer!.effectAllowed***REMOVED***=***REMOVED***'move'\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***handleDragOver(event:***REMOVED***DragEvent,***REMOVED***index:***REMOVED***number)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***dropIndex***REMOVED***=***REMOVED***index\n***REMOVED******REMOVED******REMOVED******REMOVED***event.preventDefault()\n***REMOVED******REMOVED******REMOVED******REMOVED***event.dataTransfer!.dropEffect***REMOVED***=***REMOVED***'move'\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isUndefined(draggingIndex)***REMOVED***||***REMOVED***draggingIndex***REMOVED***===***REMOVED***index)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***showDropIndicator.value***REMOVED***=***REMOVED***false\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dropPosition***REMOVED***=***REMOVED***wrapperRef\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.value!.querySelector<HTMLElement>(getTagClassName(index))!\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.getBoundingClientRect()\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dropPrev***REMOVED***=***REMOVED***!(draggingIndex***REMOVED***+***REMOVED***1***REMOVED***===***REMOVED***index)\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dropNext***REMOVED***=***REMOVED***!(draggingIndex***REMOVED***-***REMOVED***1***REMOVED***===***REMOVED***index)\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***distance***REMOVED***=***REMOVED***event.clientX***REMOVED***-***REMOVED***dropPosition.left\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***prevPercent***REMOVED***=***REMOVED***dropPrev***REMOVED***?***REMOVED***(dropNext***REMOVED***?***REMOVED***0.5***REMOVED***:***REMOVED***1)***REMOVED***:***REMOVED***-1\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***nextPercent***REMOVED***=***REMOVED***dropNext***REMOVED***?***REMOVED***(dropPrev***REMOVED***?***REMOVED***0.5***REMOVED***:***REMOVED***0)***REMOVED***:***REMOVED***1\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(distance***REMOVED***<=***REMOVED***dropPosition.width***REMOVED*******REMOVED***prevPercent)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dropType***REMOVED***=***REMOVED***'before'\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(distance***REMOVED***>***REMOVED***dropPosition.width***REMOVED*******REMOVED***nextPercent)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dropType***REMOVED***=***REMOVED***'after'\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dropType***REMOVED***=***REMOVED***undefined\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***innerEl***REMOVED***=***REMOVED***wrapperRef.value!.querySelector<HTMLElement>(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***`.${ns.e('inner')}`\n***REMOVED******REMOVED******REMOVED******REMOVED***)!\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***innerPosition***REMOVED***=***REMOVED***innerEl.getBoundingClientRect()\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***gap***REMOVED***=***REMOVED***Number.parseFloat(getStyle(innerEl,***REMOVED***'gap'))***REMOVED***/***REMOVED***2\n\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***indicatorTop***REMOVED***=***REMOVED***dropPosition.top***REMOVED***-***REMOVED***innerPosition.top\n***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***indicatorLeft***REMOVED***=***REMOVED***-9999\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(dropType***REMOVED***===***REMOVED***'before')***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***indicatorLeft***REMOVED***=***REMOVED***Math.max(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dropPosition.left***REMOVED***-***REMOVED***innerPosition.left***REMOVED***-***REMOVED***gap,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***Math.floor(-gap***REMOVED***/***REMOVED***2)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(dropType***REMOVED***===***REMOVED***'after')***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***left***REMOVED***=***REMOVED***dropPosition.right***REMOVED***-***REMOVED***innerPosition.left\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***indicatorLeft***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***left***REMOVED***+***REMOVED***(innerPosition.width***REMOVED***===***REMOVED***left***REMOVED***?***REMOVED***Math.floor(gap***REMOVED***/***REMOVED***2)***REMOVED***:***REMOVED***gap)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***setStyle(dropIndicatorRef.value!,***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***top:***REMOVED***`${indicatorTop}px`,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***left:***REMOVED***`${indicatorLeft}px`,\n***REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED***showDropIndicator.value***REMOVED***=***REMOVED***!!dropType\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***handleDragEnd(event:***REMOVED***DragEvent)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***event.preventDefault()\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(draggingTag)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***draggingTag.style.opacity***REMOVED***=***REMOVED***''\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dropType***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***!isUndefined(draggingIndex)***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***!isUndefined(dropIndex)***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***draggingIndex***REMOVED***!==***REMOVED***dropIndex\n***REMOVED******REMOVED******REMOVED******REMOVED***)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleDragged(draggingIndex,***REMOVED***dropIndex,***REMOVED***dropType)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***showDropIndicator.value***REMOVED***=***REMOVED***false\n***REMOVED******REMOVED******REMOVED******REMOVED***draggingIndex***REMOVED***=***REMOVED***undefined\n***REMOVED******REMOVED******REMOVED******REMOVED***draggingTag***REMOVED***=***REMOVED***null\n***REMOVED******REMOVED******REMOVED******REMOVED***dropIndex***REMOVED***=***REMOVED***undefined\n***REMOVED******REMOVED******REMOVED******REMOVED***dropType***REMOVED***=***REMOVED***undefined\n***REMOVED******REMOVED******REMOVED******REMOVED***afterDragged?.()\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***dropIndicatorRef,\n***REMOVED******REMOVED******REMOVED******REMOVED***showDropIndicator,\n***REMOVED******REMOVED******REMOVED******REMOVED***handleDragStart,\n***REMOVED******REMOVED******REMOVED******REMOVED***handleDragOver,\n***REMOVED******REMOVED******REMOVED******REMOVED***handleDragEnd,\n***REMOVED******REMOVED***}\n}\n"],"names":[],"mappings":"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"}