import***REMOVED***{***REMOVED***ref,***REMOVED***inject,***REMOVED***computed,***REMOVED***nextTick***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***getValidDateOfYear,***REMOVED***getValidDateOfMonth***REMOVED***}***REMOVED***from***REMOVED***'../utils.mjs';
import***REMOVED***{***REMOVED***PICKER_BASE_INJECTION_KEY***REMOVED***}***REMOVED***from***REMOVED***'../../../time-picker/src/constants.mjs';
import***REMOVED***{***REMOVED***useLocale***REMOVED***}***REMOVED***from***REMOVED***'../../../../hooks/use-locale/index.mjs';

const***REMOVED***usePanelDateRange***REMOVED***=***REMOVED***(props,***REMOVED***emit,***REMOVED***leftDate,***REMOVED***rightDate)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***leftCurrentView***REMOVED***=***REMOVED***ref("date");
***REMOVED******REMOVED***const***REMOVED***leftCurrentViewRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***rightCurrentView***REMOVED***=***REMOVED***ref("date");
***REMOVED******REMOVED***const***REMOVED***rightCurrentViewRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***pickerBase***REMOVED***=***REMOVED***inject(PICKER_BASE_INJECTION_KEY);
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***disabledDate***REMOVED***}***REMOVED***=***REMOVED***pickerBase.props;
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***t,***REMOVED***lang***REMOVED***}***REMOVED***=***REMOVED***useLocale();
***REMOVED******REMOVED***const***REMOVED***leftYear***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***leftDate.value.year();
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***leftMonth***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***leftDate.value.month();
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***rightYear***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***rightDate.value.year();
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***rightMonth***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***rightDate.value.month();
***REMOVED******REMOVED***});
***REMOVED******REMOVED***function***REMOVED***computedYearLabel(currentView,***REMOVED***yearValue)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***yearTranslation***REMOVED***=***REMOVED***t("el.datepicker.year");
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(currentView.value***REMOVED***===***REMOVED***"year")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***startYear***REMOVED***=***REMOVED***Math.floor(yearValue.value***REMOVED***/***REMOVED***10)***REMOVED*******REMOVED***10;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***yearTranslation***REMOVED***?***REMOVED***`${startYear}***REMOVED***${yearTranslation}***REMOVED***-***REMOVED***${startYear***REMOVED***+***REMOVED***9}***REMOVED***${yearTranslation}`***REMOVED***:***REMOVED***`${startYear}***REMOVED***-***REMOVED***${startYear***REMOVED***+***REMOVED***9}`;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***`${yearValue.value}***REMOVED***${yearTranslation}`;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***focusPicker(currentViewRef)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***currentViewRef***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***currentViewRef.focus();
***REMOVED******REMOVED***}
***REMOVED******REMOVED***async***REMOVED***function***REMOVED***showPicker(pickerType,***REMOVED***view)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.disabled)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentView***REMOVED***=***REMOVED***pickerType***REMOVED***===***REMOVED***"left"***REMOVED***?***REMOVED***leftCurrentView***REMOVED***:***REMOVED***rightCurrentView;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentViewRef***REMOVED***=***REMOVED***pickerType***REMOVED***===***REMOVED***"left"***REMOVED***?***REMOVED***leftCurrentViewRef***REMOVED***:***REMOVED***rightCurrentViewRef;
***REMOVED******REMOVED******REMOVED******REMOVED***currentView.value***REMOVED***=***REMOVED***view;
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***nextTick();
***REMOVED******REMOVED******REMOVED******REMOVED***focusPicker(currentViewRef.value);
***REMOVED******REMOVED***}
***REMOVED******REMOVED***async***REMOVED***function***REMOVED***handlePick(mode,***REMOVED***pickerType,***REMOVED***value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.disabled)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isLeftPicker***REMOVED***=***REMOVED***pickerType***REMOVED***===***REMOVED***"left";
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***startDate***REMOVED***=***REMOVED***isLeftPicker***REMOVED***?***REMOVED***leftDate***REMOVED***:***REMOVED***rightDate;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***endDate***REMOVED***=***REMOVED***isLeftPicker***REMOVED***?***REMOVED***rightDate***REMOVED***:***REMOVED***leftDate;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentView***REMOVED***=***REMOVED***isLeftPicker***REMOVED***?***REMOVED***leftCurrentView***REMOVED***:***REMOVED***rightCurrentView;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentViewRef***REMOVED***=***REMOVED***isLeftPicker***REMOVED***?***REMOVED***leftCurrentViewRef***REMOVED***:***REMOVED***rightCurrentViewRef;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(mode***REMOVED***===***REMOVED***"year")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***data***REMOVED***=***REMOVED***startDate.value.year(value);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***startDate.value***REMOVED***=***REMOVED***getValidDateOfYear(data,***REMOVED***lang.value,***REMOVED***disabledDate);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(mode***REMOVED***===***REMOVED***"month")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***startDate.value***REMOVED***=***REMOVED***getValidDateOfMonth(startDate.value,***REMOVED***startDate.value.year(),***REMOVED***value,***REMOVED***lang.value,***REMOVED***disabledDate);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.unlinkPanels)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***endDate.value***REMOVED***=***REMOVED***pickerType***REMOVED***===***REMOVED***"left"***REMOVED***?***REMOVED***startDate.value.add(1,***REMOVED***"month")***REMOVED***:***REMOVED***startDate.value.subtract(1,***REMOVED***"month");
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***currentView.value***REMOVED***=***REMOVED***mode***REMOVED***===***REMOVED***"year"***REMOVED***?***REMOVED***"month"***REMOVED***:***REMOVED***"date";
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***nextTick();
***REMOVED******REMOVED******REMOVED******REMOVED***focusPicker(currentViewRef.value);
***REMOVED******REMOVED******REMOVED******REMOVED***handlePanelChange(mode);
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***handlePanelChange(mode)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***emit("panel-change",***REMOVED***[leftDate.value.toDate(),***REMOVED***rightDate.value.toDate()],***REMOVED***mode);
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***adjustDateByView(currentView,***REMOVED***date,***REMOVED***forward)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***action***REMOVED***=***REMOVED***forward***REMOVED***?***REMOVED***"add"***REMOVED***:***REMOVED***"subtract";
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***currentView***REMOVED***===***REMOVED***"year"***REMOVED***?***REMOVED***date[action](10,***REMOVED***"year")***REMOVED***:***REMOVED***date[action](1,***REMOVED***"year");
***REMOVED******REMOVED***}
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***leftCurrentView,
***REMOVED******REMOVED******REMOVED******REMOVED***rightCurrentView,
***REMOVED******REMOVED******REMOVED******REMOVED***leftCurrentViewRef,
***REMOVED******REMOVED******REMOVED******REMOVED***rightCurrentViewRef,
***REMOVED******REMOVED******REMOVED******REMOVED***leftYear,
***REMOVED******REMOVED******REMOVED******REMOVED***rightYear,
***REMOVED******REMOVED******REMOVED******REMOVED***leftMonth,
***REMOVED******REMOVED******REMOVED******REMOVED***rightMonth,
***REMOVED******REMOVED******REMOVED******REMOVED***leftYearLabel:***REMOVED***computed(()***REMOVED***=>***REMOVED***computedYearLabel(leftCurrentView,***REMOVED***leftYear)),
***REMOVED******REMOVED******REMOVED******REMOVED***rightYearLabel:***REMOVED***computed(()***REMOVED***=>***REMOVED***computedYearLabel(rightCurrentView,***REMOVED***rightYear)),
***REMOVED******REMOVED******REMOVED******REMOVED***showLeftPicker:***REMOVED***(view)***REMOVED***=>***REMOVED***showPicker("left",***REMOVED***view),
***REMOVED******REMOVED******REMOVED******REMOVED***showRightPicker:***REMOVED***(view)***REMOVED***=>***REMOVED***showPicker("right",***REMOVED***view),
***REMOVED******REMOVED******REMOVED******REMOVED***handleLeftYearPick:***REMOVED***(year)***REMOVED***=>***REMOVED***handlePick("year",***REMOVED***"left",***REMOVED***year),
***REMOVED******REMOVED******REMOVED******REMOVED***handleRightYearPick:***REMOVED***(year)***REMOVED***=>***REMOVED***handlePick("year",***REMOVED***"right",***REMOVED***year),
***REMOVED******REMOVED******REMOVED******REMOVED***handleLeftMonthPick:***REMOVED***(month)***REMOVED***=>***REMOVED***handlePick("month",***REMOVED***"left",***REMOVED***month),
***REMOVED******REMOVED******REMOVED******REMOVED***handleRightMonthPick:***REMOVED***(month)***REMOVED***=>***REMOVED***handlePick("month",***REMOVED***"right",***REMOVED***month),
***REMOVED******REMOVED******REMOVED******REMOVED***handlePanelChange,
***REMOVED******REMOVED******REMOVED******REMOVED***adjustDateByView
***REMOVED******REMOVED***};
};

export***REMOVED***{***REMOVED***usePanelDateRange***REMOVED***};
//#***REMOVED***sourceMappingURL=use-panel-date-range.mjs.map
