import***REMOVED***{***REMOVED***isArray***REMOVED***}***REMOVED***from***REMOVED***'@vue/shared';

const***REMOVED***FontGap***REMOVED***=***REMOVED***3;
const***REMOVED***TEXT_ALIGN_RATIO_MAP***REMOVED***=***REMOVED***{
***REMOVED******REMOVED***left:***REMOVED***[0,***REMOVED***0.5],
***REMOVED******REMOVED***start:***REMOVED***[0,***REMOVED***0.5],
***REMOVED******REMOVED***center:***REMOVED***[0.5,***REMOVED***0],
***REMOVED******REMOVED***right:***REMOVED***[1,***REMOVED***-0.5],
***REMOVED******REMOVED***end:***REMOVED***[1,***REMOVED***-0.5]
};
function***REMOVED***prepareCanvas(width,***REMOVED***height,***REMOVED***ratio***REMOVED***=***REMOVED***1)***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***canvas***REMOVED***=***REMOVED***document.createElement("canvas");
***REMOVED******REMOVED***const***REMOVED***ctx***REMOVED***=***REMOVED***canvas.getContext("2d");
***REMOVED******REMOVED***const***REMOVED***realWidth***REMOVED***=***REMOVED***width***REMOVED*******REMOVED***ratio;
***REMOVED******REMOVED***const***REMOVED***realHeight***REMOVED***=***REMOVED***height***REMOVED*******REMOVED***ratio;
***REMOVED******REMOVED***canvas.setAttribute("width",***REMOVED***`${realWidth}px`);
***REMOVED******REMOVED***canvas.setAttribute("height",***REMOVED***`${realHeight}px`);
***REMOVED******REMOVED***ctx.save();
***REMOVED******REMOVED***return***REMOVED***[ctx,***REMOVED***canvas,***REMOVED***realWidth,***REMOVED***realHeight];
}
function***REMOVED***useClips()***REMOVED***{
***REMOVED******REMOVED***function***REMOVED***getClips(content,***REMOVED***rotate,***REMOVED***ratio,***REMOVED***width,***REMOVED***height,***REMOVED***font,***REMOVED***gapX,***REMOVED***gapY,***REMOVED***space)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***[ctx,***REMOVED***canvas,***REMOVED***contentWidth,***REMOVED***contentHeight]***REMOVED***=***REMOVED***prepareCanvas(width,***REMOVED***height,***REMOVED***ratio);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(content***REMOVED***instanceof***REMOVED***HTMLImageElement)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ctx.drawImage(content,***REMOVED***0,***REMOVED***0,***REMOVED***contentWidth,***REMOVED***contentHeight);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***color,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fontSize,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fontStyle,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fontWeight,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fontFamily,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***textAlign,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***textBaseline
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***=***REMOVED***font;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***mergedFontSize***REMOVED***=***REMOVED***Number(fontSize)***REMOVED*******REMOVED***ratio;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ctx.font***REMOVED***=***REMOVED***`${fontStyle}***REMOVED***normal***REMOVED***${fontWeight}***REMOVED***${mergedFontSize}px/${height}px***REMOVED***${fontFamily}`;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ctx.fillStyle***REMOVED***=***REMOVED***color;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ctx.textAlign***REMOVED***=***REMOVED***textAlign;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ctx.textBaseline***REMOVED***=***REMOVED***textBaseline;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***contents***REMOVED***=***REMOVED***isArray(content)***REMOVED***?***REMOVED***content***REMOVED***:***REMOVED***[content];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***contents***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***contents.forEach((item,***REMOVED***index)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***[alignRatio,***REMOVED***spaceRatio]***REMOVED***=***REMOVED***TEXT_ALIGN_RATIO_MAP[textAlign];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ctx.fillText(item***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***item***REMOVED***:***REMOVED***"",***REMOVED***contentWidth***REMOVED*******REMOVED***alignRatio***REMOVED***+***REMOVED***space***REMOVED*******REMOVED***spaceRatio,***REMOVED***index***REMOVED*******REMOVED***(mergedFontSize***REMOVED***+***REMOVED***FontGap***REMOVED*******REMOVED***ratio));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***angle***REMOVED***=***REMOVED***Math.PI***REMOVED***/***REMOVED***180***REMOVED*******REMOVED***Number(rotate);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***maxSize***REMOVED***=***REMOVED***Math.max(width,***REMOVED***height);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***[rCtx,***REMOVED***rCanvas,***REMOVED***realMaxSize]***REMOVED***=***REMOVED***prepareCanvas(maxSize,***REMOVED***maxSize,***REMOVED***ratio);
***REMOVED******REMOVED******REMOVED******REMOVED***rCtx.translate(realMaxSize***REMOVED***/***REMOVED***2,***REMOVED***realMaxSize***REMOVED***/***REMOVED***2);
***REMOVED******REMOVED******REMOVED******REMOVED***rCtx.rotate(angle);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(contentWidth***REMOVED***>***REMOVED***0***REMOVED***&&***REMOVED***contentHeight***REMOVED***>***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***rCtx.drawImage(canvas,***REMOVED***-contentWidth***REMOVED***/***REMOVED***2,***REMOVED***-contentHeight***REMOVED***/***REMOVED***2);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***function***REMOVED***getRotatePos(x,***REMOVED***y)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***targetX***REMOVED***=***REMOVED***x***REMOVED*******REMOVED***Math.cos(angle)***REMOVED***-***REMOVED***y***REMOVED*******REMOVED***Math.sin(angle);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***targetY***REMOVED***=***REMOVED***x***REMOVED*******REMOVED***Math.sin(angle)***REMOVED***+***REMOVED***y***REMOVED*******REMOVED***Math.cos(angle);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[targetX,***REMOVED***targetY];
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***left***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***right***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***top***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***bottom***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***halfWidth***REMOVED***=***REMOVED***contentWidth***REMOVED***/***REMOVED***2;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***halfHeight***REMOVED***=***REMOVED***contentHeight***REMOVED***/***REMOVED***2;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***points***REMOVED***=***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***[0***REMOVED***-***REMOVED***halfWidth,***REMOVED***0***REMOVED***-***REMOVED***halfHeight],
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***[0***REMOVED***+***REMOVED***halfWidth,***REMOVED***0***REMOVED***-***REMOVED***halfHeight],
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***[0***REMOVED***+***REMOVED***halfWidth,***REMOVED***0***REMOVED***+***REMOVED***halfHeight],
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***[0***REMOVED***-***REMOVED***halfWidth,***REMOVED***0***REMOVED***+***REMOVED***halfHeight]
***REMOVED******REMOVED******REMOVED******REMOVED***];
***REMOVED******REMOVED******REMOVED******REMOVED***points.forEach(([x,***REMOVED***y])***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***[targetX,***REMOVED***targetY]***REMOVED***=***REMOVED***getRotatePos(x,***REMOVED***y);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***left***REMOVED***=***REMOVED***Math.min(left,***REMOVED***targetX);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***right***REMOVED***=***REMOVED***Math.max(right,***REMOVED***targetX);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***top***REMOVED***=***REMOVED***Math.min(top,***REMOVED***targetY);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***bottom***REMOVED***=***REMOVED***Math.max(bottom,***REMOVED***targetY);
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cutLeft***REMOVED***=***REMOVED***left***REMOVED***+***REMOVED***realMaxSize***REMOVED***/***REMOVED***2;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cutTop***REMOVED***=***REMOVED***top***REMOVED***+***REMOVED***realMaxSize***REMOVED***/***REMOVED***2;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cutWidth***REMOVED***=***REMOVED***right***REMOVED***-***REMOVED***left;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cutHeight***REMOVED***=***REMOVED***bottom***REMOVED***-***REMOVED***top;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***realGapX***REMOVED***=***REMOVED***gapX***REMOVED*******REMOVED***ratio;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***realGapY***REMOVED***=***REMOVED***gapY***REMOVED*******REMOVED***ratio;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***filledWidth***REMOVED***=***REMOVED***(cutWidth***REMOVED***+***REMOVED***realGapX)***REMOVED*******REMOVED***2;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***filledHeight***REMOVED***=***REMOVED***cutHeight***REMOVED***+***REMOVED***realGapY;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***[fCtx,***REMOVED***fCanvas]***REMOVED***=***REMOVED***prepareCanvas(filledWidth,***REMOVED***filledHeight);
***REMOVED******REMOVED******REMOVED******REMOVED***function***REMOVED***drawImg(targetX***REMOVED***=***REMOVED***0,***REMOVED***targetY***REMOVED***=***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fCtx.drawImage(rCanvas,***REMOVED***cutLeft,***REMOVED***cutTop,***REMOVED***cutWidth,***REMOVED***cutHeight,***REMOVED***targetX,***REMOVED***targetY,***REMOVED***cutWidth,***REMOVED***cutHeight);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***drawImg();
***REMOVED******REMOVED******REMOVED******REMOVED***drawImg(cutWidth***REMOVED***+***REMOVED***realGapX,***REMOVED***-cutHeight***REMOVED***/***REMOVED***2***REMOVED***-***REMOVED***realGapY***REMOVED***/***REMOVED***2);
***REMOVED******REMOVED******REMOVED******REMOVED***drawImg(cutWidth***REMOVED***+***REMOVED***realGapX,***REMOVED***+cutHeight***REMOVED***/***REMOVED***2***REMOVED***+***REMOVED***realGapY***REMOVED***/***REMOVED***2);
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[fCanvas.toDataURL(),***REMOVED***filledWidth***REMOVED***/***REMOVED***ratio,***REMOVED***filledHeight***REMOVED***/***REMOVED***ratio];
***REMOVED******REMOVED***}
***REMOVED******REMOVED***return***REMOVED***getClips;
}

export***REMOVED***{***REMOVED***FontGap,***REMOVED***useClips***REMOVED***as***REMOVED***default***REMOVED***};
//#***REMOVED***sourceMappingURL=useClips.mjs.map
