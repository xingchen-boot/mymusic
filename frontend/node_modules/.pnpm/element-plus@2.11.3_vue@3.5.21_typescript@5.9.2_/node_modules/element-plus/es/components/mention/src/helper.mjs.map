{"version":3,"file":"helper.mjs","sources":["../../../../../../packages/components/mention/src/helper.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***ensureArray,***REMOVED***isFirefox***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***MentionCtx,***REMOVED***MentionOption***REMOVED***}***REMOVED***from***REMOVED***'./types'\n\nexport***REMOVED***const***REMOVED***filterOption***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***pattern:***REMOVED***string,\n***REMOVED******REMOVED***option:***REMOVED***MentionOption\n):***REMOVED***boolean***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***lowerCase***REMOVED***=***REMOVED***pattern.toLowerCase()\n***REMOVED******REMOVED***const***REMOVED***label***REMOVED***=***REMOVED***option.label***REMOVED***||***REMOVED***option.value***REMOVED***||***REMOVED***''\n***REMOVED******REMOVED***return***REMOVED***label.toLowerCase().includes(lowerCase)\n}\n\nexport***REMOVED***const***REMOVED***getMentionCtx***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***inputEl:***REMOVED***HTMLInputElement***REMOVED***|***REMOVED***HTMLTextAreaElement,\n***REMOVED******REMOVED***prefix:***REMOVED***string***REMOVED***|***REMOVED***string[],\n***REMOVED******REMOVED***split:***REMOVED***string\n)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***{***REMOVED***selectionEnd***REMOVED***}***REMOVED***=***REMOVED***inputEl\n***REMOVED******REMOVED***if***REMOVED***(selectionEnd***REMOVED***===***REMOVED***null)***REMOVED***return\n***REMOVED******REMOVED***const***REMOVED***inputValue***REMOVED***=***REMOVED***inputEl.value\n***REMOVED******REMOVED***const***REMOVED***prefixArray***REMOVED***=***REMOVED***ensureArray(prefix)\n***REMOVED******REMOVED***let***REMOVED***splitIndex***REMOVED***=***REMOVED***-1\n***REMOVED******REMOVED***let***REMOVED***mentionCtx:***REMOVED***MentionCtx***REMOVED***|***REMOVED***undefined\n***REMOVED******REMOVED***for***REMOVED***(let***REMOVED***i***REMOVED***=***REMOVED***selectionEnd***REMOVED***-***REMOVED***1;***REMOVED***i***REMOVED***>=***REMOVED***0;***REMOVED***--i)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***char***REMOVED***=***REMOVED***inputValue[i]\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(char***REMOVED***===***REMOVED***split***REMOVED***||***REMOVED***char***REMOVED***===***REMOVED***'\\n'***REMOVED***||***REMOVED***char***REMOVED***===***REMOVED***'\\r')***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***splitIndex***REMOVED***=***REMOVED***i\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***continue\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(prefixArray.includes(char))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***end***REMOVED***=***REMOVED***splitIndex***REMOVED***===***REMOVED***-1***REMOVED***?***REMOVED***selectionEnd***REMOVED***:***REMOVED***splitIndex\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***pattern***REMOVED***=***REMOVED***inputValue.slice(i***REMOVED***+***REMOVED***1,***REMOVED***end)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***mentionCtx***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***pattern,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***start:***REMOVED***i***REMOVED***+***REMOVED***1,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***end,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prefix:***REMOVED***char,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prefixIndex:***REMOVED***i,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***splitIndex,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***selectionEnd,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***return***REMOVED***mentionCtx\n}\n\n/**\n***REMOVED*******REMOVED***fork***REMOVED***from***REMOVED***textarea-caret-position\n***REMOVED*******REMOVED***https://github.com/component/textarea-caret-position\n***REMOVED*******REMOVED***The***REMOVED***MIT***REMOVED***License***REMOVED***(MIT)\n***REMOVED*******REMOVED***Copyright***REMOVED***(c)***REMOVED***2015***REMOVED***Jonathan***REMOVED***Ong***REMOVED***me@jongleberry.com\n***REMOVED*******REMOVED***Permission***REMOVED***is***REMOVED***hereby***REMOVED***granted,***REMOVED***free***REMOVED***of***REMOVED***charge,***REMOVED***to***REMOVED***any***REMOVED***person***REMOVED***obtaining***REMOVED***a***REMOVED***copy\n***REMOVED*******REMOVED***of***REMOVED***this***REMOVED***software***REMOVED***and***REMOVED***associated***REMOVED***documentation***REMOVED***files***REMOVED***(the***REMOVED***\"Software\"),***REMOVED***to***REMOVED***deal\n***REMOVED*******REMOVED***in***REMOVED***the***REMOVED***Software***REMOVED***without***REMOVED***restriction,***REMOVED***including***REMOVED***without***REMOVED***limitation***REMOVED***the***REMOVED***rights\n***REMOVED*******REMOVED***to***REMOVED***use,***REMOVED***copy,***REMOVED***modify,***REMOVED***merge,***REMOVED***publish,***REMOVED***distribute,***REMOVED***sublicense,***REMOVED***and/or***REMOVED***sell\n***REMOVED*******REMOVED***copies***REMOVED***of***REMOVED***the***REMOVED***Software,***REMOVED***and***REMOVED***to***REMOVED***permit***REMOVED***persons***REMOVED***to***REMOVED***whom***REMOVED***the***REMOVED***Software***REMOVED***is\n***REMOVED*******REMOVED***furnished***REMOVED***to***REMOVED***do***REMOVED***so,***REMOVED***subject***REMOVED***to***REMOVED***the***REMOVED***following***REMOVED***conditions:\n***REMOVED*******REMOVED***The***REMOVED***above***REMOVED***copyright***REMOVED***notice***REMOVED***and***REMOVED***this***REMOVED***permission***REMOVED***notice***REMOVED***shall***REMOVED***be***REMOVED***included***REMOVED***in***REMOVED***all\n***REMOVED*******REMOVED***copies***REMOVED***or***REMOVED***substantial***REMOVED***portions***REMOVED***of***REMOVED***the***REMOVED***Software.\n***REMOVED*******REMOVED***THE***REMOVED***SOFTWARE***REMOVED***IS***REMOVED***PROVIDED***REMOVED***\"AS***REMOVED***IS\",***REMOVED***WITHOUT***REMOVED***WARRANTY***REMOVED***OF***REMOVED***ANY***REMOVED***KIND,***REMOVED***EXPRESS***REMOVED***OR\n***REMOVED*******REMOVED***IMPLIED,***REMOVED***INCLUDING***REMOVED***BUT***REMOVED***NOT***REMOVED***LIMITED***REMOVED***TO***REMOVED***THE***REMOVED***WARRANTIES***REMOVED***OF***REMOVED***MERCHANTABILITY,\n***REMOVED*******REMOVED***FITNESS***REMOVED***FOR***REMOVED***A***REMOVED***PARTICULAR***REMOVED***PURPOSE***REMOVED***AND***REMOVED***NONINFRINGEMENT.***REMOVED***IN***REMOVED***NO***REMOVED***EVENT***REMOVED***SHALL***REMOVED***THE\n***REMOVED*******REMOVED***AUTHORS***REMOVED***OR***REMOVED***COPYRIGHT***REMOVED***HOLDERS***REMOVED***BE***REMOVED***LIABLE***REMOVED***FOR***REMOVED***ANY***REMOVED***CLAIM,***REMOVED***DAMAGES***REMOVED***OR***REMOVED***OTHER\n***REMOVED*******REMOVED***LIABILITY,***REMOVED***WHETHER***REMOVED***IN***REMOVED***AN***REMOVED***ACTION***REMOVED***OF***REMOVED***CONTRACT,***REMOVED***TORT***REMOVED***OR***REMOVED***OTHERWISE,***REMOVED***ARISING***REMOVED***FROM,\n***REMOVED*******REMOVED***OUT***REMOVED***OF***REMOVED***OR***REMOVED***IN***REMOVED***CONNECTION***REMOVED***WITH***REMOVED***THE***REMOVED***SOFTWARE***REMOVED***OR***REMOVED***THE***REMOVED***USE***REMOVED***OR***REMOVED***OTHER***REMOVED***DEALINGS***REMOVED***IN***REMOVED***THE\n***REMOVED*******REMOVED***SOFTWARE.\n***REMOVED****/\nexport***REMOVED***const***REMOVED***getCursorPosition***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***element:***REMOVED***HTMLInputElement***REMOVED***|***REMOVED***HTMLTextAreaElement,\n***REMOVED******REMOVED***options***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***debug:***REMOVED***false,\n***REMOVED******REMOVED******REMOVED******REMOVED***useSelectionEnd:***REMOVED***false,\n***REMOVED******REMOVED***}\n)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***selectionStart***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED***element.selectionStart***REMOVED***!==***REMOVED***null***REMOVED***?***REMOVED***element.selectionStart***REMOVED***:***REMOVED***0\n***REMOVED******REMOVED***const***REMOVED***selectionEnd***REMOVED***=***REMOVED***element.selectionEnd***REMOVED***!==***REMOVED***null***REMOVED***?***REMOVED***element.selectionEnd***REMOVED***:***REMOVED***0\n***REMOVED******REMOVED***const***REMOVED***position***REMOVED***=***REMOVED***options.useSelectionEnd***REMOVED***?***REMOVED***selectionEnd***REMOVED***:***REMOVED***selectionStart\n***REMOVED******REMOVED***//***REMOVED***We'll***REMOVED***copy***REMOVED***the***REMOVED***properties***REMOVED***below***REMOVED***into***REMOVED***the***REMOVED***mirror***REMOVED***div.\n***REMOVED******REMOVED***//***REMOVED***Note***REMOVED***that***REMOVED***some***REMOVED***browsers,***REMOVED***such***REMOVED***as***REMOVED***Firefox,***REMOVED***do***REMOVED***not***REMOVED***concatenate***REMOVED***properties\n***REMOVED******REMOVED***//***REMOVED***into***REMOVED***their***REMOVED***shorthand***REMOVED***(e.g.***REMOVED***padding-top,***REMOVED***padding-bottom***REMOVED***etc.***REMOVED***->***REMOVED***padding),\n***REMOVED******REMOVED***//***REMOVED***so***REMOVED***we***REMOVED***have***REMOVED***to***REMOVED***list***REMOVED***every***REMOVED***single***REMOVED***property***REMOVED***explicitly.\n***REMOVED******REMOVED***const***REMOVED***properties:***REMOVED***string[]***REMOVED***=***REMOVED***[\n***REMOVED******REMOVED******REMOVED******REMOVED***'direction',***REMOVED***//***REMOVED***RTL***REMOVED***support\n***REMOVED******REMOVED******REMOVED******REMOVED***'boxSizing',\n***REMOVED******REMOVED******REMOVED******REMOVED***'width',***REMOVED***//***REMOVED***on***REMOVED***Chrome***REMOVED***and***REMOVED***IE,***REMOVED***exclude***REMOVED***the***REMOVED***scrollbar,***REMOVED***so***REMOVED***the***REMOVED***mirror***REMOVED***div***REMOVED***wraps***REMOVED***exactly***REMOVED***as***REMOVED***the***REMOVED***textarea***REMOVED***does\n***REMOVED******REMOVED******REMOVED******REMOVED***'height',\n***REMOVED******REMOVED******REMOVED******REMOVED***'overflowX',\n***REMOVED******REMOVED******REMOVED******REMOVED***'overflowY',***REMOVED***//***REMOVED***copy***REMOVED***the***REMOVED***scrollbar***REMOVED***for***REMOVED***IE\n***REMOVED******REMOVED******REMOVED******REMOVED***'borderTopWidth',\n***REMOVED******REMOVED******REMOVED******REMOVED***'borderRightWidth',\n***REMOVED******REMOVED******REMOVED******REMOVED***'borderBottomWidth',\n***REMOVED******REMOVED******REMOVED******REMOVED***'borderLeftWidth',\n***REMOVED******REMOVED******REMOVED******REMOVED***'borderStyle',\n***REMOVED******REMOVED******REMOVED******REMOVED***'paddingTop',\n***REMOVED******REMOVED******REMOVED******REMOVED***'paddingRight',\n***REMOVED******REMOVED******REMOVED******REMOVED***'paddingBottom',\n***REMOVED******REMOVED******REMOVED******REMOVED***'paddingLeft',\n***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***https://developer.mozilla.org/en-US/docs/Web/CSS/font\n***REMOVED******REMOVED******REMOVED******REMOVED***'fontStyle',\n***REMOVED******REMOVED******REMOVED******REMOVED***'fontVariant',\n***REMOVED******REMOVED******REMOVED******REMOVED***'fontWeight',\n***REMOVED******REMOVED******REMOVED******REMOVED***'fontStretch',\n***REMOVED******REMOVED******REMOVED******REMOVED***'fontSize',\n***REMOVED******REMOVED******REMOVED******REMOVED***'fontSizeAdjust',\n***REMOVED******REMOVED******REMOVED******REMOVED***'lineHeight',\n***REMOVED******REMOVED******REMOVED******REMOVED***'fontFamily',\n***REMOVED******REMOVED******REMOVED******REMOVED***'textAlign',\n***REMOVED******REMOVED******REMOVED******REMOVED***'textTransform',\n***REMOVED******REMOVED******REMOVED******REMOVED***'textIndent',\n***REMOVED******REMOVED******REMOVED******REMOVED***'textDecoration',***REMOVED***//***REMOVED***might***REMOVED***not***REMOVED***make***REMOVED***a***REMOVED***difference,***REMOVED***but***REMOVED***better***REMOVED***be***REMOVED***safe\n***REMOVED******REMOVED******REMOVED******REMOVED***'letterSpacing',\n***REMOVED******REMOVED******REMOVED******REMOVED***'wordSpacing',\n***REMOVED******REMOVED******REMOVED******REMOVED***'tabSize',\n***REMOVED******REMOVED******REMOVED******REMOVED***'MozTabSize',\n***REMOVED******REMOVED***]\n\n***REMOVED******REMOVED***if***REMOVED***(options.debug)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***el***REMOVED***=***REMOVED***document.querySelector(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'#input-textarea-caret-position-mirror-div'\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(el?.parentNode)***REMOVED***el.parentNode.removeChild(el)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***//***REMOVED***The***REMOVED***mirror***REMOVED***div***REMOVED***will***REMOVED***replicate***REMOVED***the***REMOVED***textareas***REMOVED***style\n***REMOVED******REMOVED***const***REMOVED***div***REMOVED***=***REMOVED***document.createElement('div')\n***REMOVED******REMOVED***div.id***REMOVED***=***REMOVED***'input-textarea-caret-position-mirror-div'\n***REMOVED******REMOVED***document.body.appendChild(div)\n\n***REMOVED******REMOVED***const***REMOVED***style***REMOVED***=***REMOVED***div.style\n***REMOVED******REMOVED***const***REMOVED***computed***REMOVED***=***REMOVED***window.getComputedStyle(element)\n\n***REMOVED******REMOVED***const***REMOVED***isInput***REMOVED***=***REMOVED***element.nodeName***REMOVED***===***REMOVED***'INPUT'\n\n***REMOVED******REMOVED***//***REMOVED***Default***REMOVED***textarea***REMOVED***styles\n***REMOVED******REMOVED***style.whiteSpace***REMOVED***=***REMOVED***isInput***REMOVED***?***REMOVED***'nowrap'***REMOVED***:***REMOVED***'pre-wrap'\n***REMOVED******REMOVED***if***REMOVED***(!isInput)***REMOVED***style.wordWrap***REMOVED***=***REMOVED***'break-word'***REMOVED***//***REMOVED***only***REMOVED***for***REMOVED***textarea-s\n\n***REMOVED******REMOVED***//***REMOVED***Position***REMOVED***off-screen\n***REMOVED******REMOVED***style.position***REMOVED***=***REMOVED***'absolute'***REMOVED***//***REMOVED***required***REMOVED***to***REMOVED***return***REMOVED***coordinates***REMOVED***properly\n***REMOVED******REMOVED***if***REMOVED***(!options.debug)***REMOVED***style.visibility***REMOVED***=***REMOVED***'hidden'***REMOVED***//***REMOVED***not***REMOVED***'display:***REMOVED***none'***REMOVED***because***REMOVED***we***REMOVED***want***REMOVED***rendering\n\n***REMOVED******REMOVED***//***REMOVED***Transfer***REMOVED***the***REMOVED***element's***REMOVED***properties***REMOVED***to***REMOVED***the***REMOVED***div\n***REMOVED******REMOVED***properties.forEach((prop)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isInput***REMOVED***&&***REMOVED***prop***REMOVED***===***REMOVED***'lineHeight')***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Special***REMOVED***case***REMOVED***for***REMOVED***<input>s***REMOVED***because***REMOVED***text***REMOVED***is***REMOVED***rendered***REMOVED***centered***REMOVED***and***REMOVED***line***REMOVED***height***REMOVED***may***REMOVED***be***REMOVED***!=***REMOVED***height\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(computed.boxSizing***REMOVED***===***REMOVED***'border-box')***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***height***REMOVED***=***REMOVED***Number.parseInt(computed.height***REMOVED***as***REMOVED***string)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***outerHeight***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***Number.parseInt(computed.paddingTop***REMOVED***as***REMOVED***string)***REMOVED***+\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***Number.parseInt(computed.paddingBottom***REMOVED***as***REMOVED***string)***REMOVED***+\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***Number.parseInt(computed.borderTopWidth***REMOVED***as***REMOVED***string)***REMOVED***+\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***Number.parseInt(computed.borderBottomWidth***REMOVED***as***REMOVED***string)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***targetHeight***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***outerHeight***REMOVED***+***REMOVED***Number.parseInt(computed.lineHeight***REMOVED***as***REMOVED***string)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(height***REMOVED***>***REMOVED***targetHeight)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***style.lineHeight***REMOVED***=***REMOVED***`${height***REMOVED***-***REMOVED***outerHeight}px`\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(height***REMOVED***===***REMOVED***targetHeight)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***style.lineHeight***REMOVED***=***REMOVED***computed.lineHeight\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***style.lineHeight***REMOVED***=***REMOVED***'0'\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***style.lineHeight***REMOVED***=***REMOVED***computed.height\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***style[prop***REMOVED***as***REMOVED***any]***REMOVED***=***REMOVED***computed[prop***REMOVED***as***REMOVED***any]\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***if***REMOVED***(isFirefox())***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Firefox***REMOVED***lies***REMOVED***about***REMOVED***the***REMOVED***overflow***REMOVED***property***REMOVED***for***REMOVED***textareas:***REMOVED***https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(element.scrollHeight***REMOVED***>***REMOVED***Number.parseInt(computed.height***REMOVED***as***REMOVED***string))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***style.overflowY***REMOVED***=***REMOVED***'scroll'\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***style.overflow***REMOVED***=***REMOVED***'hidden'***REMOVED***//***REMOVED***for***REMOVED***Chrome***REMOVED***to***REMOVED***not***REMOVED***render***REMOVED***a***REMOVED***scrollbar;***REMOVED***IE***REMOVED***keeps***REMOVED***overflowY***REMOVED***=***REMOVED***'scroll'\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***div.textContent***REMOVED***=***REMOVED***element.value.slice(0,***REMOVED***Math.max(0,***REMOVED***position))\n***REMOVED******REMOVED***//***REMOVED***The***REMOVED***second***REMOVED***special***REMOVED***handling***REMOVED***for***REMOVED***input***REMOVED***type=\"text\"***REMOVED***vs***REMOVED***textarea:\n***REMOVED******REMOVED***//***REMOVED***spaces***REMOVED***need***REMOVED***to***REMOVED***be***REMOVED***replaced***REMOVED***with***REMOVED***non-breaking***REMOVED***spaces***REMOVED***-***REMOVED***http://stackoverflow.com/a/13402035/1269037\n***REMOVED******REMOVED***if***REMOVED***(isInput***REMOVED***&&***REMOVED***div.textContent)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***div.textContent***REMOVED***=***REMOVED***div.textContent.replace(/\\s/g,***REMOVED***'\\u00A0')\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***span***REMOVED***=***REMOVED***document.createElement('span')\n***REMOVED******REMOVED***//***REMOVED***Wrapping***REMOVED***must***REMOVED***be***REMOVED***replicated***REMOVED****exactly*,***REMOVED***including***REMOVED***when***REMOVED***a***REMOVED***long***REMOVED***word***REMOVED***gets\n***REMOVED******REMOVED***//***REMOVED***onto***REMOVED***the***REMOVED***next***REMOVED***line,***REMOVED***with***REMOVED***whitespace***REMOVED***at***REMOVED***the***REMOVED***end***REMOVED***of***REMOVED***the***REMOVED***line***REMOVED***before***REMOVED***(#7).\n***REMOVED******REMOVED***//***REMOVED***The***REMOVED******REMOVED****only****REMOVED***reliable***REMOVED***way***REMOVED***to***REMOVED***do***REMOVED***that***REMOVED***is***REMOVED***to***REMOVED***copy***REMOVED***the***REMOVED****entire****REMOVED***rest***REMOVED***of***REMOVED***the\n***REMOVED******REMOVED***//***REMOVED***textareas***REMOVED***content***REMOVED***into***REMOVED***the***REMOVED***<span>***REMOVED***created***REMOVED***at***REMOVED***the***REMOVED***caret***REMOVED***position.\n***REMOVED******REMOVED***//***REMOVED***For***REMOVED***inputs,***REMOVED***just***REMOVED***'.'***REMOVED***would***REMOVED***be***REMOVED***enough,***REMOVED***but***REMOVED***no***REMOVED***need***REMOVED***to***REMOVED***bother.\n***REMOVED******REMOVED***span.textContent***REMOVED***=***REMOVED***element.value.slice(Math.max(0,***REMOVED***position))***REMOVED***||***REMOVED***'.'***REMOVED***//***REMOVED***||***REMOVED***because***REMOVED***a***REMOVED***completely***REMOVED***empty***REMOVED***faux***REMOVED***span***REMOVED***doesn't***REMOVED***render***REMOVED***at***REMOVED***all\n***REMOVED******REMOVED***span.style.position***REMOVED***=***REMOVED***'relative'\n***REMOVED******REMOVED***span.style.left***REMOVED***=***REMOVED***`${-element.scrollLeft}px`\n***REMOVED******REMOVED***span.style.top***REMOVED***=***REMOVED***`${-element.scrollTop}px`\n***REMOVED******REMOVED***div.appendChild(span)\n\n***REMOVED******REMOVED***const***REMOVED***relativePosition***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***top:***REMOVED***span.offsetTop***REMOVED***+***REMOVED***Number.parseInt(computed.borderTopWidth***REMOVED***as***REMOVED***string),\n***REMOVED******REMOVED******REMOVED******REMOVED***left:***REMOVED***span.offsetLeft***REMOVED***+***REMOVED***Number.parseInt(computed.borderLeftWidth***REMOVED***as***REMOVED***string),\n***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***We***REMOVED***don't***REMOVED***use***REMOVED***line-height***REMOVED***since***REMOVED***it***REMOVED***may***REMOVED***be***REMOVED***too***REMOVED***large***REMOVED***for***REMOVED***position.***REMOVED***Eg.***REMOVED***34px\n***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***for***REMOVED***input\n***REMOVED******REMOVED******REMOVED******REMOVED***height:***REMOVED***Number.parseInt(computed.fontSize***REMOVED***as***REMOVED***string)***REMOVED*******REMOVED***1.5,\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***if***REMOVED***(options.debug)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***span.style.backgroundColor***REMOVED***=***REMOVED***'#aaa'\n***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***document.body.removeChild(div)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***if***REMOVED***(relativePosition.left***REMOVED***>=***REMOVED***element.clientWidth)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***relativePosition.left***REMOVED***=***REMOVED***element.clientWidth\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***return***REMOVED***relativePosition\n}\n"],"names":["ensureArray"],"mappings":"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"}