import***REMOVED***{***REMOVED***defineComponent,***REMOVED***computed,***REMOVED***ref,***REMOVED***reactive,***REMOVED***unref,***REMOVED***watch,***REMOVED***onBeforeUnmount,***REMOVED***h,***REMOVED***withModifiers***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***HORIZONTAL,***REMOVED***ScrollbarDirKey,***REMOVED***SCROLLBAR_MIN_SIZE***REMOVED***}***REMOVED***from***REMOVED***'../defaults.mjs';
import***REMOVED***{***REMOVED***virtualizedScrollbarProps***REMOVED***}***REMOVED***from***REMOVED***'../props.mjs';
import***REMOVED***{***REMOVED***renderThumbStyle***REMOVED***}***REMOVED***from***REMOVED***'../utils.mjs';
import***REMOVED***{***REMOVED***BAR_MAP***REMOVED***}***REMOVED***from***REMOVED***'../../../scrollbar/src/util.mjs';
import***REMOVED***{***REMOVED***useNamespace***REMOVED***}***REMOVED***from***REMOVED***'../../../../hooks/use-namespace/index.mjs';
import***REMOVED***{***REMOVED***cAF,***REMOVED***rAF***REMOVED***}***REMOVED***from***REMOVED***'../../../../utils/raf.mjs';

const***REMOVED***ScrollBar***REMOVED***=***REMOVED***defineComponent({
***REMOVED******REMOVED***name:***REMOVED***"ElVirtualScrollBar",
***REMOVED******REMOVED***props:***REMOVED***virtualizedScrollbarProps,
***REMOVED******REMOVED***emits:***REMOVED***["scroll",***REMOVED***"start-move",***REMOVED***"stop-move"],
***REMOVED******REMOVED***setup(props,***REMOVED***{***REMOVED***emit***REMOVED***})***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***GAP***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***props.startGap***REMOVED***+***REMOVED***props.endGap);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***nsVirtualScrollbar***REMOVED***=***REMOVED***useNamespace("virtual-scrollbar");
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***nsScrollbar***REMOVED***=***REMOVED***useNamespace("scrollbar");
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***trackRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***thumbRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***frameHandle***REMOVED***=***REMOVED***null;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***onselectstartStore***REMOVED***=***REMOVED***null;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***state***REMOVED***=***REMOVED***reactive({
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isDragging:***REMOVED***false,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***traveled:***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***bar***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***BAR_MAP[props.layout]);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***trackSize***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***props.clientSize***REMOVED***-***REMOVED***unref(GAP));
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***trackStyle***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***({
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***position:***REMOVED***"absolute",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***width:***REMOVED***`${HORIZONTAL***REMOVED***===***REMOVED***props.layout***REMOVED***?***REMOVED***trackSize.value***REMOVED***:***REMOVED***props.scrollbarSize}px`,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***height:***REMOVED***`${HORIZONTAL***REMOVED***===***REMOVED***props.layout***REMOVED***?***REMOVED***props.scrollbarSize***REMOVED***:***REMOVED***trackSize.value}px`,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***[ScrollbarDirKey[props.layout]]:***REMOVED***"2px",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***right:***REMOVED***"2px",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***bottom:***REMOVED***"2px",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***borderRadius:***REMOVED***"4px"
***REMOVED******REMOVED******REMOVED******REMOVED***}));
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***thumbSize***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***ratio***REMOVED***=***REMOVED***props.ratio;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(ratio***REMOVED***>=***REMOVED***100)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***Number.POSITIVE_INFINITY;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(ratio***REMOVED***>=***REMOVED***50)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***ratio***REMOVED*******REMOVED***trackSize.value***REMOVED***/***REMOVED***100;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***SCROLLBAR_MAX_SIZE***REMOVED***=***REMOVED***trackSize.value***REMOVED***/***REMOVED***3;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***Math.floor(Math.min(Math.max(ratio***REMOVED*******REMOVED***trackSize.value***REMOVED***/***REMOVED***100,***REMOVED***SCROLLBAR_MIN_SIZE),***REMOVED***SCROLLBAR_MAX_SIZE));
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***thumbStyle***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!Number.isFinite(thumbSize.value))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***display:***REMOVED***"none"
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***thumb***REMOVED***=***REMOVED***`${thumbSize.value}px`;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***style***REMOVED***=***REMOVED***renderThumbStyle({
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***bar:***REMOVED***bar.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***size:***REMOVED***thumb,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***move:***REMOVED***state.traveled
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},***REMOVED***props.layout);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***style;
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***totalSteps***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***Math.ceil(props.clientSize***REMOVED***-***REMOVED***thumbSize.value***REMOVED***-***REMOVED***unref(GAP)));
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***attachEvents***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***window.addEventListener("mousemove",***REMOVED***onMouseMove);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***window.addEventListener("mouseup",***REMOVED***onMouseUp);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***thumbEl***REMOVED***=***REMOVED***unref(thumbRef);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!thumbEl)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onselectstartStore***REMOVED***=***REMOVED***document.onselectstart;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***document.onselectstart***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***false;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***thumbEl.addEventListener("touchmove",***REMOVED***onMouseMove,***REMOVED***{***REMOVED***passive:***REMOVED***true***REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***thumbEl.addEventListener("touchend",***REMOVED***onMouseUp);
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***detachEvents***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***window.removeEventListener("mousemove",***REMOVED***onMouseMove);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***window.removeEventListener("mouseup",***REMOVED***onMouseUp);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***document.onselectstart***REMOVED***=***REMOVED***onselectstartStore;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onselectstartStore***REMOVED***=***REMOVED***null;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***thumbEl***REMOVED***=***REMOVED***unref(thumbRef);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!thumbEl)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***thumbEl.removeEventListener("touchmove",***REMOVED***onMouseMove);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***thumbEl.removeEventListener("touchend",***REMOVED***onMouseUp);
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***onThumbMouseDown***REMOVED***=***REMOVED***(e)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***e.stopImmediatePropagation();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(e.ctrlKey***REMOVED***||***REMOVED***[1,***REMOVED***2].includes(e.button))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***state.isDragging***REMOVED***=***REMOVED***true;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***state[bar.value.axis]***REMOVED***=***REMOVED***e.currentTarget[bar.value.offset]***REMOVED***-***REMOVED***(e[bar.value.client]***REMOVED***-***REMOVED***e.currentTarget.getBoundingClientRect()[bar.value.direction]);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("start-move");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***attachEvents();
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***onMouseUp***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***state.isDragging***REMOVED***=***REMOVED***false;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***state[bar.value.axis]***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("stop-move");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***detachEvents();
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***onMouseMove***REMOVED***=***REMOVED***(e)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***isDragging***REMOVED***}***REMOVED***=***REMOVED***state;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!isDragging)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!thumbRef.value***REMOVED***||***REMOVED***!trackRef.value)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***prevPage***REMOVED***=***REMOVED***state[bar.value.axis];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!prevPage)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cAF(frameHandle);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***offset***REMOVED***=***REMOVED***(trackRef.value.getBoundingClientRect()[bar.value.direction]***REMOVED***-***REMOVED***e[bar.value.client])***REMOVED*******REMOVED***-1;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***thumbClickPosition***REMOVED***=***REMOVED***thumbRef.value[bar.value.offset]***REMOVED***-***REMOVED***prevPage;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***distance***REMOVED***=***REMOVED***offset***REMOVED***-***REMOVED***thumbClickPosition;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***frameHandle***REMOVED***=***REMOVED***rAF(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***state.traveled***REMOVED***=***REMOVED***Math.max(0,***REMOVED***Math.min(distance,***REMOVED***totalSteps.value));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("scroll",***REMOVED***distance,***REMOVED***totalSteps.value);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***clickTrackHandler***REMOVED***=***REMOVED***(e)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***offset***REMOVED***=***REMOVED***Math.abs(e.target.getBoundingClientRect()[bar.value.direction]***REMOVED***-***REMOVED***e[bar.value.client]);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***thumbHalf***REMOVED***=***REMOVED***thumbRef.value[bar.value.offset]***REMOVED***/***REMOVED***2;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***distance***REMOVED***=***REMOVED***offset***REMOVED***-***REMOVED***thumbHalf;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***state.traveled***REMOVED***=***REMOVED***Math.max(0,***REMOVED***Math.min(distance,***REMOVED***totalSteps.value));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("scroll",***REMOVED***distance,***REMOVED***totalSteps.value);
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***watch(()***REMOVED***=>***REMOVED***props.scrollFrom,***REMOVED***(v)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(state.isDragging)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***state.traveled***REMOVED***=***REMOVED***Math.ceil(v***REMOVED*******REMOVED***totalSteps.value);
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***onBeforeUnmount(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***detachEvents();
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***h("div",***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***role:***REMOVED***"presentation",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ref:***REMOVED***trackRef,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***class:***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***nsVirtualScrollbar.b(),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***props.class,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(props.alwaysOn***REMOVED***||***REMOVED***state.isDragging)***REMOVED***&&***REMOVED***"always-on"
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***],
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***style:***REMOVED***trackStyle.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onMousedown:***REMOVED***withModifiers(clickTrackHandler,***REMOVED***["stop",***REMOVED***"prevent"]),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onTouchstartPrevent:***REMOVED***onThumbMouseDown
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},***REMOVED***h("div",***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ref:***REMOVED***thumbRef,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***class:***REMOVED***nsScrollbar.e("thumb"),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***style:***REMOVED***thumbStyle.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onMousedown:***REMOVED***onThumbMouseDown
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},***REMOVED***[]));
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED***}
});

export***REMOVED***{***REMOVED***ScrollBar***REMOVED***as***REMOVED***default***REMOVED***};
//#***REMOVED***sourceMappingURL=scrollbar.mjs.map
