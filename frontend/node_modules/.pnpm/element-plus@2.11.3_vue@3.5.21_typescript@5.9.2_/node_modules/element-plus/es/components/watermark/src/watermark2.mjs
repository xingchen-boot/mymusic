import***REMOVED***{***REMOVED***defineComponent,***REMOVED***computed,***REMOVED***shallowRef,***REMOVED***ref,***REMOVED***onMounted,***REMOVED***watch,***REMOVED***onBeforeUnmount,***REMOVED***openBlock,***REMOVED***createElementBlock,***REMOVED***normalizeStyle,***REMOVED***renderSlot***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***useMutationObserver***REMOVED***}***REMOVED***from***REMOVED***'@vueuse/core';
import***REMOVED***{***REMOVED***watermarkProps***REMOVED***}***REMOVED***from***REMOVED***'./watermark.mjs';
import***REMOVED***{***REMOVED***reRendering,***REMOVED***getStyleStr,***REMOVED***getPixelRatio***REMOVED***}***REMOVED***from***REMOVED***'./utils.mjs';
import***REMOVED***useClips,***REMOVED***{***REMOVED***FontGap***REMOVED***}***REMOVED***from***REMOVED***'./useClips.mjs';
import***REMOVED***_export_sfc***REMOVED***from***REMOVED***'../../../_virtual/plugin-vue_export-helper.mjs';
import***REMOVED***{***REMOVED***isArray***REMOVED***}***REMOVED***from***REMOVED***'@vue/shared';
import***REMOVED***{***REMOVED***isUndefined***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/types.mjs';

const***REMOVED***__default__***REMOVED***=***REMOVED***defineComponent({
***REMOVED******REMOVED***name:***REMOVED***"ElWatermark"
});
const***REMOVED***_sfc_main***REMOVED***=***REMOVED***/****REMOVED***@__PURE__***REMOVED****/***REMOVED***defineComponent({
***REMOVED******REMOVED***...__default__,
***REMOVED******REMOVED***props:***REMOVED***watermarkProps,
***REMOVED******REMOVED***setup(__props)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***props***REMOVED***=***REMOVED***__props;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***style***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***position:***REMOVED***"relative"
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***color***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***props.font)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.color)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_b***REMOVED***:***REMOVED***"rgba(0,0,0,.15)";
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***fontSize***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***props.font)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.fontSize)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_b***REMOVED***:***REMOVED***16;
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***fontWeight***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***props.font)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.fontWeight)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_b***REMOVED***:***REMOVED***"normal";
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***fontStyle***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***props.font)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.fontStyle)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_b***REMOVED***:***REMOVED***"normal";
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***fontFamily***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***props.font)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.fontFamily)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_b***REMOVED***:***REMOVED***"sans-serif";
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***textAlign***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***props.font)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.textAlign)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_b***REMOVED***:***REMOVED***"center";
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***textBaseline***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***props.font)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.textBaseline)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_b***REMOVED***:***REMOVED***"hanging";
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***gapX***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***props.gap[0]);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***gapY***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***props.gap[1]);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***gapXCenter***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***gapX.value***REMOVED***/***REMOVED***2);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***gapYCenter***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***gapY.value***REMOVED***/***REMOVED***2);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***offsetLeft***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***props.offset)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a[0])***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_b***REMOVED***:***REMOVED***gapXCenter.value;
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***offsetTop***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***props.offset)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a[1])***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_b***REMOVED***:***REMOVED***gapYCenter.value;
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***getMarkStyle***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***markStyle***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***zIndex:***REMOVED***props.zIndex,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***position:***REMOVED***"absolute",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***left:***REMOVED***0,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***top:***REMOVED***0,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***width:***REMOVED***"100%",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***height:***REMOVED***"100%",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***pointerEvents:***REMOVED***"none",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***backgroundRepeat:***REMOVED***"repeat"
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***positionLeft***REMOVED***=***REMOVED***offsetLeft.value***REMOVED***-***REMOVED***gapXCenter.value;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***positionTop***REMOVED***=***REMOVED***offsetTop.value***REMOVED***-***REMOVED***gapYCenter.value;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(positionLeft***REMOVED***>***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***markStyle.left***REMOVED***=***REMOVED***`${positionLeft}px`;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***markStyle.width***REMOVED***=***REMOVED***`calc(100%***REMOVED***-***REMOVED***${positionLeft}px)`;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***positionLeft***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(positionTop***REMOVED***>***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***markStyle.top***REMOVED***=***REMOVED***`${positionTop}px`;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***markStyle.height***REMOVED***=***REMOVED***`calc(100%***REMOVED***-***REMOVED***${positionTop}px)`;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***positionTop***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***markStyle.backgroundPosition***REMOVED***=***REMOVED***`${positionLeft}px***REMOVED***${positionTop}px`;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***markStyle;
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***containerRef***REMOVED***=***REMOVED***shallowRef(null);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***watermarkRef***REMOVED***=***REMOVED***shallowRef();
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***stopObservation***REMOVED***=***REMOVED***ref(false);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***destroyWatermark***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(watermarkRef.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***watermarkRef.value.remove();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***watermarkRef.value***REMOVED***=***REMOVED***void***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***appendWatermark***REMOVED***=***REMOVED***(base64Url,***REMOVED***markWidth)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(containerRef.value***REMOVED***&&***REMOVED***watermarkRef.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***stopObservation.value***REMOVED***=***REMOVED***true;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***watermarkRef.value.setAttribute("style",***REMOVED***getStyleStr({
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***...getMarkStyle(),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***backgroundImage:***REMOVED***`url('${base64Url}')`,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***backgroundSize:***REMOVED***`${Math.floor(markWidth)}px`
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(_a***REMOVED***=***REMOVED***containerRef.value)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.append(watermarkRef.value);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***setTimeout(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***stopObservation.value***REMOVED***=***REMOVED***false;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***getMarkSize***REMOVED***=***REMOVED***(ctx)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***defaultWidth***REMOVED***=***REMOVED***120;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***defaultHeight***REMOVED***=***REMOVED***64;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***space***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***image,***REMOVED***content,***REMOVED***width,***REMOVED***height,***REMOVED***rotate***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!image***REMOVED***&&***REMOVED***ctx.measureText)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ctx.font***REMOVED***=***REMOVED***`${Number(fontSize.value)}px***REMOVED***${fontFamily.value}`;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***contents***REMOVED***=***REMOVED***isArray(content)***REMOVED***?***REMOVED***content***REMOVED***:***REMOVED***[content];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***maxWidth***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***maxHeight***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***contents.forEach((item)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***width:***REMOVED***width2,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fontBoundingBoxAscent,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fontBoundingBoxDescent,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***actualBoundingBoxAscent,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***actualBoundingBoxDescent
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***=***REMOVED***ctx.measureText(item);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***height2***REMOVED***=***REMOVED***isUndefined(fontBoundingBoxAscent)***REMOVED***?***REMOVED***actualBoundingBoxAscent***REMOVED***+***REMOVED***actualBoundingBoxDescent***REMOVED***:***REMOVED***fontBoundingBoxAscent***REMOVED***+***REMOVED***fontBoundingBoxDescent;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(width2***REMOVED***>***REMOVED***maxWidth)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***maxWidth***REMOVED***=***REMOVED***Math.ceil(width2);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(height2***REMOVED***>***REMOVED***maxHeight)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***maxHeight***REMOVED***=***REMOVED***Math.ceil(height2);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***defaultWidth***REMOVED***=***REMOVED***maxWidth;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***defaultHeight***REMOVED***=***REMOVED***maxHeight***REMOVED*******REMOVED***contents.length***REMOVED***+***REMOVED***(contents.length***REMOVED***-***REMOVED***1)***REMOVED*******REMOVED***FontGap;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***angle***REMOVED***=***REMOVED***Math.PI***REMOVED***/***REMOVED***180***REMOVED*******REMOVED***Number(rotate);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***space***REMOVED***=***REMOVED***Math.ceil(Math.abs(Math.sin(angle)***REMOVED*******REMOVED***defaultHeight)***REMOVED***/***REMOVED***2);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***defaultWidth***REMOVED***+=***REMOVED***space;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[width***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***width***REMOVED***:***REMOVED***defaultWidth,***REMOVED***height***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***height***REMOVED***:***REMOVED***defaultHeight,***REMOVED***space];
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***getClips***REMOVED***=***REMOVED***useClips();
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***renderWatermark***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***canvas***REMOVED***=***REMOVED***document.createElement("canvas");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***ctx***REMOVED***=***REMOVED***canvas.getContext("2d");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***image***REMOVED***=***REMOVED***props.image;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***content***REMOVED***=***REMOVED***props.content;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rotate***REMOVED***=***REMOVED***props.rotate;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(ctx)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!watermarkRef.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***watermarkRef.value***REMOVED***=***REMOVED***document.createElement("div");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***ratio***REMOVED***=***REMOVED***getPixelRatio();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***[markWidth,***REMOVED***markHeight,***REMOVED***space]***REMOVED***=***REMOVED***getMarkSize(ctx);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***drawCanvas***REMOVED***=***REMOVED***(drawContent)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***[textClips,***REMOVED***clipWidth]***REMOVED***=***REMOVED***getClips(drawContent***REMOVED***||***REMOVED***"",***REMOVED***rotate,***REMOVED***ratio,***REMOVED***markWidth,***REMOVED***markHeight,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***color:***REMOVED***color.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fontSize:***REMOVED***fontSize.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fontStyle:***REMOVED***fontStyle.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fontWeight:***REMOVED***fontWeight.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fontFamily:***REMOVED***fontFamily.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***textAlign:***REMOVED***textAlign.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***textBaseline:***REMOVED***textBaseline.value
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},***REMOVED***gapX.value,***REMOVED***gapY.value,***REMOVED***space);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***appendWatermark(textClips,***REMOVED***clipWidth);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(image)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***img***REMOVED***=***REMOVED***new***REMOVED***Image();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***img.onload***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***drawCanvas(img);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***img.onerror***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***drawCanvas(content);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***img.crossOrigin***REMOVED***=***REMOVED***"anonymous";
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***img.referrerPolicy***REMOVED***=***REMOVED***"no-referrer";
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***img.src***REMOVED***=***REMOVED***image;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***drawCanvas(content);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***onMounted(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***renderWatermark();
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***watch(()***REMOVED***=>***REMOVED***props,***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***renderWatermark();
***REMOVED******REMOVED******REMOVED******REMOVED***},***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***deep:***REMOVED***true,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***flush:***REMOVED***"post"
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***onBeforeUnmount(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***destroyWatermark();
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***onMutate***REMOVED***=***REMOVED***(mutations)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(stopObservation.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***mutations.forEach((mutation)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(reRendering(mutation,***REMOVED***watermarkRef.value))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***destroyWatermark();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***renderWatermark();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***useMutationObserver(containerRef,***REMOVED***onMutate,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***attributes:***REMOVED***true,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***subtree:***REMOVED***true,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***childList:***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_ctx,***REMOVED***_cache)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***openBlock(),***REMOVED***createElementBlock("div",***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ref_key:***REMOVED***"containerRef",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ref:***REMOVED***containerRef,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***style:***REMOVED***normalizeStyle([style])
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***renderSlot(_ctx.$slots,***REMOVED***"default")
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***],***REMOVED***4);
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED***}
});
var***REMOVED***Watermark***REMOVED***=***REMOVED***/****REMOVED***@__PURE__***REMOVED****/***REMOVED***_export_sfc(_sfc_main,***REMOVED***[["__file",***REMOVED***"watermark.vue"]]);

export***REMOVED***{***REMOVED***Watermark***REMOVED***as***REMOVED***default***REMOVED***};
//#***REMOVED***sourceMappingURL=watermark2.mjs.map
