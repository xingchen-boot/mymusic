import***REMOVED***{***REMOVED***isFirefox***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/browser.mjs';
import***REMOVED***{***REMOVED***isNumber***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/types.mjs';

let***REMOVED***hiddenTextarea***REMOVED***=***REMOVED***void***REMOVED***0;
const***REMOVED***HIDDEN_STYLE***REMOVED***=***REMOVED***{
***REMOVED******REMOVED***height:***REMOVED***"0",
***REMOVED******REMOVED***visibility:***REMOVED***"hidden",
***REMOVED******REMOVED***overflow:***REMOVED***isFirefox()***REMOVED***?***REMOVED***""***REMOVED***:***REMOVED***"hidden",
***REMOVED******REMOVED***position:***REMOVED***"absolute",
***REMOVED******REMOVED***"z-index":***REMOVED***"-1000",
***REMOVED******REMOVED***top:***REMOVED***"0",
***REMOVED******REMOVED***right:***REMOVED***"0"
};
const***REMOVED***CONTEXT_STYLE***REMOVED***=***REMOVED***[
***REMOVED******REMOVED***"letter-spacing",
***REMOVED******REMOVED***"line-height",
***REMOVED******REMOVED***"padding-top",
***REMOVED******REMOVED***"padding-bottom",
***REMOVED******REMOVED***"font-family",
***REMOVED******REMOVED***"font-weight",
***REMOVED******REMOVED***"font-size",
***REMOVED******REMOVED***"text-rendering",
***REMOVED******REMOVED***"text-transform",
***REMOVED******REMOVED***"width",
***REMOVED******REMOVED***"text-indent",
***REMOVED******REMOVED***"padding-left",
***REMOVED******REMOVED***"padding-right",
***REMOVED******REMOVED***"border-width",
***REMOVED******REMOVED***"box-sizing",
***REMOVED******REMOVED***"word-break"
];
function***REMOVED***calculateNodeStyling(targetElement)***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***style***REMOVED***=***REMOVED***window.getComputedStyle(targetElement);
***REMOVED******REMOVED***const***REMOVED***boxSizing***REMOVED***=***REMOVED***style.getPropertyValue("box-sizing");
***REMOVED******REMOVED***const***REMOVED***paddingSize***REMOVED***=***REMOVED***Number.parseFloat(style.getPropertyValue("padding-bottom"))***REMOVED***+***REMOVED***Number.parseFloat(style.getPropertyValue("padding-top"));
***REMOVED******REMOVED***const***REMOVED***borderSize***REMOVED***=***REMOVED***Number.parseFloat(style.getPropertyValue("border-bottom-width"))***REMOVED***+***REMOVED***Number.parseFloat(style.getPropertyValue("border-top-width"));
***REMOVED******REMOVED***const***REMOVED***contextStyle***REMOVED***=***REMOVED***CONTEXT_STYLE.map((name)***REMOVED***=>***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED***name,
***REMOVED******REMOVED******REMOVED******REMOVED***style.getPropertyValue(name)
***REMOVED******REMOVED***]);
***REMOVED******REMOVED***return***REMOVED***{***REMOVED***contextStyle,***REMOVED***paddingSize,***REMOVED***borderSize,***REMOVED***boxSizing***REMOVED***};
}
function***REMOVED***calcTextareaHeight(targetElement,***REMOVED***minRows***REMOVED***=***REMOVED***1,***REMOVED***maxRows)***REMOVED***{
***REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED***if***REMOVED***(!hiddenTextarea)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***hiddenTextarea***REMOVED***=***REMOVED***document.createElement("textarea");
***REMOVED******REMOVED******REMOVED******REMOVED***((_a***REMOVED***=***REMOVED***targetElement.parentNode)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_a***REMOVED***:***REMOVED***document.body).appendChild(hiddenTextarea);
***REMOVED******REMOVED***}
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***paddingSize,***REMOVED***borderSize,***REMOVED***boxSizing,***REMOVED***contextStyle***REMOVED***}***REMOVED***=***REMOVED***calculateNodeStyling(targetElement);
***REMOVED******REMOVED***contextStyle.forEach(([key,***REMOVED***value])***REMOVED***=>***REMOVED***hiddenTextarea***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***hiddenTextarea.style.setProperty(key,***REMOVED***value));
***REMOVED******REMOVED***Object.entries(HIDDEN_STYLE).forEach(([key,***REMOVED***value])***REMOVED***=>***REMOVED***hiddenTextarea***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***hiddenTextarea.style.setProperty(key,***REMOVED***value,***REMOVED***"important"));
***REMOVED******REMOVED***hiddenTextarea.value***REMOVED***=***REMOVED***targetElement.value***REMOVED***||***REMOVED***targetElement.placeholder***REMOVED***||***REMOVED***"";
***REMOVED******REMOVED***let***REMOVED***height***REMOVED***=***REMOVED***hiddenTextarea.scrollHeight;
***REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED***if***REMOVED***(boxSizing***REMOVED***===***REMOVED***"border-box")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***height***REMOVED***=***REMOVED***height***REMOVED***+***REMOVED***borderSize;
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(boxSizing***REMOVED***===***REMOVED***"content-box")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***height***REMOVED***=***REMOVED***height***REMOVED***-***REMOVED***paddingSize;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***hiddenTextarea.value***REMOVED***=***REMOVED***"";
***REMOVED******REMOVED***const***REMOVED***singleRowHeight***REMOVED***=***REMOVED***hiddenTextarea.scrollHeight***REMOVED***-***REMOVED***paddingSize;
***REMOVED******REMOVED***if***REMOVED***(isNumber(minRows))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***minHeight***REMOVED***=***REMOVED***singleRowHeight***REMOVED*******REMOVED***minRows;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(boxSizing***REMOVED***===***REMOVED***"border-box")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***minHeight***REMOVED***=***REMOVED***minHeight***REMOVED***+***REMOVED***paddingSize***REMOVED***+***REMOVED***borderSize;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***height***REMOVED***=***REMOVED***Math.max(minHeight,***REMOVED***height);
***REMOVED******REMOVED******REMOVED******REMOVED***result.minHeight***REMOVED***=***REMOVED***`${minHeight}px`;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***if***REMOVED***(isNumber(maxRows))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***maxHeight***REMOVED***=***REMOVED***singleRowHeight***REMOVED*******REMOVED***maxRows;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(boxSizing***REMOVED***===***REMOVED***"border-box")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***maxHeight***REMOVED***=***REMOVED***maxHeight***REMOVED***+***REMOVED***paddingSize***REMOVED***+***REMOVED***borderSize;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***height***REMOVED***=***REMOVED***Math.min(maxHeight,***REMOVED***height);
***REMOVED******REMOVED***}
***REMOVED******REMOVED***result.height***REMOVED***=***REMOVED***`${height}px`;
***REMOVED******REMOVED***(_b***REMOVED***=***REMOVED***hiddenTextarea.parentNode)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_b.removeChild(hiddenTextarea);
***REMOVED******REMOVED***hiddenTextarea***REMOVED***=***REMOVED***void***REMOVED***0;
***REMOVED******REMOVED***return***REMOVED***result;
}

export***REMOVED***{***REMOVED***calcTextareaHeight***REMOVED***};
//#***REMOVED***sourceMappingURL=utils.mjs.map
