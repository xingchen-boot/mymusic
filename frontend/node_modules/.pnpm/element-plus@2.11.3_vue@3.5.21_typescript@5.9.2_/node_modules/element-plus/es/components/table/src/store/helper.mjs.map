{"version":3,"file":"helper.mjs","sources":["../../../../../../../packages/components/table/src/store/helper.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***watch***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{***REMOVED***debounce***REMOVED***}***REMOVED***from***REMOVED***'lodash-unified'\nimport***REMOVED***{***REMOVED***isObject***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\nimport***REMOVED***useStore***REMOVED***from***REMOVED***'.'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***Store***REMOVED***}***REMOVED***from***REMOVED***'.'\nimport***REMOVED***type***REMOVED***{***REMOVED***DefaultRow,***REMOVED***Table,***REMOVED***TableProps***REMOVED***}***REMOVED***from***REMOVED***'../table/defaults'\n\nconst***REMOVED***InitialStateMap***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED***rowKey:***REMOVED***'rowKey',\n***REMOVED******REMOVED***defaultExpandAll:***REMOVED***'defaultExpandAll',\n***REMOVED******REMOVED***selectOnIndeterminate:***REMOVED***'selectOnIndeterminate',\n***REMOVED******REMOVED***indent:***REMOVED***'indent',\n***REMOVED******REMOVED***lazy:***REMOVED***'lazy',\n***REMOVED******REMOVED***data:***REMOVED***'data',\n***REMOVED******REMOVED***['treeProps.hasChildren']:***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***key:***REMOVED***'lazyColumnIdentifier',\n***REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***'hasChildren',\n***REMOVED******REMOVED***},\n***REMOVED******REMOVED***['treeProps.children']:***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***key:***REMOVED***'childrenColumnName',\n***REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***'children',\n***REMOVED******REMOVED***},\n***REMOVED******REMOVED***['treeProps.checkStrictly']:***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***key:***REMOVED***'checkStrictly',\n***REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***false,\n***REMOVED******REMOVED***},\n}\n\nexport***REMOVED***function***REMOVED***createStore<T***REMOVED***extends***REMOVED***DefaultRow>(\n***REMOVED******REMOVED***table:***REMOVED***Table<T>,\n***REMOVED******REMOVED***props:***REMOVED***TableProps<T>\n)***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(!table)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error('Table***REMOVED***is***REMOVED***required.')\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***store***REMOVED***=***REMOVED***useStore<T>()\n***REMOVED******REMOVED***//***REMOVED***fix***REMOVED***https://github.com/ElemeFE/element/issues/14075\n***REMOVED******REMOVED***//***REMOVED***related***REMOVED***pr***REMOVED***https://github.com/ElemeFE/element/pull/14146\n***REMOVED******REMOVED***store.toggleAllSelection***REMOVED***=***REMOVED***debounce(store._toggleAllSelection,***REMOVED***10)\n***REMOVED******REMOVED***Object.keys(InitialStateMap).forEach((key)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***handleValue(getArrKeysValue(props,***REMOVED***key),***REMOVED***key,***REMOVED***store)\n***REMOVED******REMOVED***})\n***REMOVED******REMOVED***proxyTableProps(store,***REMOVED***props)\n***REMOVED******REMOVED***return***REMOVED***store\n}\n\nfunction***REMOVED***proxyTableProps<T***REMOVED***extends***REMOVED***DefaultRow>(\n***REMOVED******REMOVED***store:***REMOVED***Store<T>,\n***REMOVED******REMOVED***props:***REMOVED***TableProps<T>\n)***REMOVED***{\n***REMOVED******REMOVED***Object.keys(InitialStateMap).forEach((key)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***watch(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***()***REMOVED***=>***REMOVED***getArrKeysValue(props,***REMOVED***key),\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(value)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleValue(value,***REMOVED***key,***REMOVED***store)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED***})\n}\n\nfunction***REMOVED***handleValue<T***REMOVED***extends***REMOVED***DefaultRow>(\n***REMOVED******REMOVED***value:***REMOVED***string***REMOVED***|***REMOVED***boolean***REMOVED***|***REMOVED***Record<string,***REMOVED***any>,\n***REMOVED******REMOVED***propsKey:***REMOVED***string,\n***REMOVED******REMOVED***store:***REMOVED***Store<T>\n)***REMOVED***{\n***REMOVED******REMOVED***let***REMOVED***newVal***REMOVED***=***REMOVED***value\n***REMOVED******REMOVED***let***REMOVED***storeKey***REMOVED***=***REMOVED***InitialStateMap[propsKey***REMOVED***as***REMOVED***keyof***REMOVED***typeof***REMOVED***InitialStateMap]\n***REMOVED******REMOVED***if***REMOVED***(isObject(storeKey))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***newVal***REMOVED***=***REMOVED***newVal***REMOVED***||***REMOVED***storeKey.default\n***REMOVED******REMOVED******REMOVED******REMOVED***storeKey***REMOVED***=***REMOVED***storeKey.key\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***;((store.states***REMOVED***as***REMOVED***any)[storeKey]***REMOVED***as***REMOVED***any).value***REMOVED***=***REMOVED***newVal\n}\n\nfunction***REMOVED***getArrKeysValue<T***REMOVED***extends***REMOVED***DefaultRow>(\n***REMOVED******REMOVED***props:***REMOVED***TableProps<T>,\n***REMOVED******REMOVED***key:***REMOVED***string\n)***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***((key***REMOVED***as***REMOVED***keyof***REMOVED***typeof***REMOVED***props).includes('.'))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***keyList***REMOVED***=***REMOVED***(key***REMOVED***as***REMOVED***keyof***REMOVED***typeof***REMOVED***props).split('.')\n***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***value:***REMOVED***string***REMOVED***|***REMOVED***Record<string,***REMOVED***any>***REMOVED***=***REMOVED***props\n***REMOVED******REMOVED******REMOVED******REMOVED***keyList.forEach((k)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***value***REMOVED***=***REMOVED***(value***REMOVED***as***REMOVED***Record<string,***REMOVED***any>)[k]\n***REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***value\n***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(props***REMOVED***as***REMOVED***any)[key]***REMOVED***as***REMOVED***boolean***REMOVED***|***REMOVED***string\n***REMOVED******REMOVED***}\n}\n"],"names":[],"mappings":"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"}