{"version":3,"file":"use-scrollbar.js","sources":["../../../../../../../packages/components/table-v2/src/composables/use-scrollbar.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***ref,***REMOVED***unref,***REMOVED***watch***REMOVED***}***REMOVED***from***REMOVED***'vue'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***Ref***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***type***REMOVED***{***REMOVED***Alignment***REMOVED***as***REMOVED***ScrollStrategy***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/components/virtual-list'\nimport***REMOVED***type***REMOVED***{***REMOVED***TableV2Props***REMOVED***}***REMOVED***from***REMOVED***'../table'\nimport***REMOVED***type***REMOVED***{***REMOVED***TableGridInstance***REMOVED***}***REMOVED***from***REMOVED***'../table-grid'\n\nexport***REMOVED***type***REMOVED***ScrollPos***REMOVED***=***REMOVED***{***REMOVED***scrollLeft:***REMOVED***number;***REMOVED***scrollTop:***REMOVED***number***REMOVED***}\ntype***REMOVED***GridInstanceRef***REMOVED***=***REMOVED***Ref<TableGridInstance***REMOVED***|***REMOVED***undefined>\n\ntype***REMOVED***UseScrollBarProps***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED***mainTableRef:***REMOVED***GridInstanceRef\n***REMOVED******REMOVED***leftTableRef:***REMOVED***GridInstanceRef\n***REMOVED******REMOVED***rightTableRef:***REMOVED***GridInstanceRef\n\n***REMOVED******REMOVED***onMaybeEndReached:***REMOVED***()***REMOVED***=>***REMOVED***void\n}\n\nexport***REMOVED***type***REMOVED***{***REMOVED***ScrollStrategy***REMOVED***}\n\nexport***REMOVED***const***REMOVED***useScrollbar***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***props:***REMOVED***TableV2Props,\n***REMOVED******REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***mainTableRef,\n***REMOVED******REMOVED******REMOVED******REMOVED***leftTableRef,\n***REMOVED******REMOVED******REMOVED******REMOVED***rightTableRef,\n***REMOVED******REMOVED******REMOVED******REMOVED***onMaybeEndReached,\n***REMOVED******REMOVED***}:***REMOVED***UseScrollBarProps\n)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***scrollPos***REMOVED***=***REMOVED***ref<ScrollPos>({***REMOVED***scrollLeft:***REMOVED***0,***REMOVED***scrollTop:***REMOVED***0***REMOVED***})\n\n***REMOVED******REMOVED***function***REMOVED***doScroll(params:***REMOVED***ScrollPos)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***scrollTop***REMOVED***}***REMOVED***=***REMOVED***params\n\n***REMOVED******REMOVED******REMOVED******REMOVED***mainTableRef.value?.scrollTo(params)\n***REMOVED******REMOVED******REMOVED******REMOVED***leftTableRef.value?.scrollToTop(scrollTop)\n***REMOVED******REMOVED******REMOVED******REMOVED***rightTableRef.value?.scrollToTop(scrollTop)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***//***REMOVED***methods\n***REMOVED******REMOVED***function***REMOVED***scrollTo(params:***REMOVED***ScrollPos)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollPos.value***REMOVED***=***REMOVED***params\n\n***REMOVED******REMOVED******REMOVED******REMOVED***doScroll(params)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***scrollToTop(scrollTop:***REMOVED***number)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollPos.value.scrollTop***REMOVED***=***REMOVED***scrollTop\n\n***REMOVED******REMOVED******REMOVED******REMOVED***doScroll(unref(scrollPos))\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***scrollToLeft(scrollLeft:***REMOVED***number)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollPos.value.scrollLeft***REMOVED***=***REMOVED***scrollLeft\n\n***REMOVED******REMOVED******REMOVED******REMOVED***mainTableRef.value?.scrollTo?.(unref(scrollPos))\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***onScroll(params:***REMOVED***ScrollPos)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollTo(params)\n***REMOVED******REMOVED******REMOVED******REMOVED***props.onScroll?.(params)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***onVerticalScroll({***REMOVED***scrollTop***REMOVED***}:***REMOVED***ScrollPos)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***scrollTop:***REMOVED***currentScrollTop***REMOVED***}***REMOVED***=***REMOVED***unref(scrollPos)\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(scrollTop***REMOVED***!==***REMOVED***currentScrollTop)***REMOVED***scrollToTop(scrollTop)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***scrollToRow(row:***REMOVED***number,***REMOVED***strategy:***REMOVED***ScrollStrategy***REMOVED***=***REMOVED***'auto')***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***mainTableRef.value?.scrollToRow(row,***REMOVED***strategy)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***//***REMOVED***When***REMOVED***scrollTop***REMOVED***changes,***REMOVED***maybe***REMOVED***reaching***REMOVED***the***REMOVED***bottom\n***REMOVED******REMOVED***watch(\n***REMOVED******REMOVED******REMOVED******REMOVED***()***REMOVED***=>***REMOVED***unref(scrollPos).scrollTop,\n***REMOVED******REMOVED******REMOVED******REMOVED***(cur,***REMOVED***prev)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cur***REMOVED***>***REMOVED***prev)***REMOVED***onMaybeEndReached()\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollPos,\n\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollTo,\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollToLeft,\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollToTop,\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollToRow,\n***REMOVED******REMOVED******REMOVED******REMOVED***onScroll,\n***REMOVED******REMOVED******REMOVED******REMOVED***onVerticalScroll,\n***REMOVED******REMOVED***}\n}\n"],"names":["ref","unref","watch"],"mappings":"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"}