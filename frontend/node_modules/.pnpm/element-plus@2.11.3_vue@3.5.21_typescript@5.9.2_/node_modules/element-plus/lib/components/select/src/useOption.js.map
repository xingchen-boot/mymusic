{"version":3,"file":"useOption.js","sources":["../../../../../../packages/components/select/src/useOption.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***computed,***REMOVED***getCurrentInstance,***REMOVED***inject,***REMOVED***toRaw,***REMOVED***watch***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{***REMOVED***get,***REMOVED***isEqual***REMOVED***}***REMOVED***from***REMOVED***'lodash-unified'\nimport***REMOVED***{\n***REMOVED******REMOVED***ensureArray,\n***REMOVED******REMOVED***escapeStringRegexp,\n***REMOVED******REMOVED***isObject,\n***REMOVED******REMOVED***throwError,\n}***REMOVED***from***REMOVED***'@element-plus/utils'\nimport***REMOVED***{***REMOVED***selectGroupKey,***REMOVED***selectKey***REMOVED***}***REMOVED***from***REMOVED***'./token'\nimport***REMOVED***{***REMOVED***COMPONENT_NAME***REMOVED***}***REMOVED***from***REMOVED***'./option'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***OptionInternalInstance,***REMOVED***OptionProps,***REMOVED***OptionStates***REMOVED***}***REMOVED***from***REMOVED***'./type'\n\nexport***REMOVED***function***REMOVED***useOption(props:***REMOVED***OptionProps,***REMOVED***states:***REMOVED***OptionStates)***REMOVED***{\n***REMOVED******REMOVED***//***REMOVED***inject\n***REMOVED******REMOVED***const***REMOVED***select***REMOVED***=***REMOVED***inject(selectKey)\n***REMOVED******REMOVED***if***REMOVED***(!select)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***throwError(COMPONENT_NAME,***REMOVED***'usage:***REMOVED***<el-select><el-option***REMOVED***/></el-select/>')\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***const***REMOVED***selectGroup***REMOVED***=***REMOVED***inject(selectGroupKey,***REMOVED***{***REMOVED***disabled:***REMOVED***false***REMOVED***})\n\n***REMOVED******REMOVED***//***REMOVED***computed\n***REMOVED******REMOVED***const***REMOVED***itemSelected***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***contains(ensureArray(select.props.modelValue),***REMOVED***props.value)\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***const***REMOVED***limitReached***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(select.props.multiple)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***modelValue***REMOVED***=***REMOVED***ensureArray(select.props.modelValue***REMOVED***??***REMOVED***[])\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***!itemSelected.value***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***modelValue.length***REMOVED***>=***REMOVED***select.props.multipleLimit***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***select.props.multipleLimit***REMOVED***>***REMOVED***0\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***false\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***const***REMOVED***currentLabel***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.label***REMOVED***??***REMOVED***(isObject(props.value)***REMOVED***?***REMOVED***''***REMOVED***:***REMOVED***props.value)\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***const***REMOVED***currentValue***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.value***REMOVED***||***REMOVED***props.label***REMOVED***||***REMOVED***''\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***const***REMOVED***isDisabled***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.disabled***REMOVED***||***REMOVED***states.groupDisabled***REMOVED***||***REMOVED***limitReached.value\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***const***REMOVED***instance***REMOVED***=***REMOVED***getCurrentInstance()!***REMOVED***as***REMOVED***OptionInternalInstance\n***REMOVED******REMOVED***const***REMOVED***contains***REMOVED***=***REMOVED***<T>(arr:***REMOVED***T[]***REMOVED***=***REMOVED***[],***REMOVED***target:***REMOVED***T)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!isObject(props.value))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***arr***REMOVED***&&***REMOVED***arr.includes(target)\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***valueKey***REMOVED***=***REMOVED***select.props.valueKey\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***arr***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***arr.some((item)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***toRaw(get(item,***REMOVED***valueKey))***REMOVED***===***REMOVED***get(target,***REMOVED***valueKey)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***hoverItem***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.disabled***REMOVED***&&***REMOVED***!selectGroup.disabled)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***select.states.hoveringIndex***REMOVED***=***REMOVED***select.optionsArray.indexOf(instance.proxy)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***updateOption***REMOVED***=***REMOVED***(query:***REMOVED***string)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***regexp***REMOVED***=***REMOVED***new***REMOVED***RegExp(escapeStringRegexp(query),***REMOVED***'i')\n***REMOVED******REMOVED******REMOVED******REMOVED***states.visible***REMOVED***=***REMOVED***regexp.test(String(currentLabel.value))***REMOVED***||***REMOVED***props.created\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***watch(\n***REMOVED******REMOVED******REMOVED******REMOVED***()***REMOVED***=>***REMOVED***currentLabel.value,\n***REMOVED******REMOVED******REMOVED******REMOVED***()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.created***REMOVED***&&***REMOVED***!select.props.remote)***REMOVED***select.setSelected()\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***watch(\n***REMOVED******REMOVED******REMOVED******REMOVED***()***REMOVED***=>***REMOVED***props.value,\n***REMOVED******REMOVED******REMOVED******REMOVED***(val,***REMOVED***oldVal)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***remote,***REMOVED***valueKey***REMOVED***}***REMOVED***=***REMOVED***select.props\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***shouldUpdate***REMOVED***=***REMOVED***remote***REMOVED***?***REMOVED***val***REMOVED***!==***REMOVED***oldVal***REMOVED***:***REMOVED***!isEqual(val,***REMOVED***oldVal)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(shouldUpdate)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***select.onOptionDestroy(oldVal,***REMOVED***instance.proxy)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***select.onOptionCreate(instance.proxy)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.created***REMOVED***&&***REMOVED***!remote)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***valueKey***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isObject(val)***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isObject(oldVal)***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***val[valueKey]***REMOVED***===***REMOVED***oldVal[valueKey]\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***select.setSelected()\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***watch(\n***REMOVED******REMOVED******REMOVED******REMOVED***()***REMOVED***=>***REMOVED***selectGroup.disabled,\n***REMOVED******REMOVED******REMOVED******REMOVED***()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***states.groupDisabled***REMOVED***=***REMOVED***selectGroup.disabled\n***REMOVED******REMOVED******REMOVED******REMOVED***},\n***REMOVED******REMOVED******REMOVED******REMOVED***{***REMOVED***immediate:***REMOVED***true***REMOVED***}\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***select,\n***REMOVED******REMOVED******REMOVED******REMOVED***currentLabel,\n***REMOVED******REMOVED******REMOVED******REMOVED***currentValue,\n***REMOVED******REMOVED******REMOVED******REMOVED***itemSelected,\n***REMOVED******REMOVED******REMOVED******REMOVED***isDisabled,\n***REMOVED******REMOVED******REMOVED******REMOVED***hoverItem,\n***REMOVED******REMOVED******REMOVED******REMOVED***updateOption,\n***REMOVED******REMOVED***}\n}\n"],"names":["inject","selectKey","throwError","COMPONENT_NAME","selectGroupKey","computed","ensureArray","isObject","getCurrentInstance","toRaw","get","escapeStringRegexp","watch","isEqual"],"mappings":"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"}