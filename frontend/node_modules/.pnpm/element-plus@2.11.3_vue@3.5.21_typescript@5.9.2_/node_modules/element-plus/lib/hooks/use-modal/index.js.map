{"version":3,"file":"index.js","sources":["../../../../../packages/hooks/use-modal/index.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***watch***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{***REMOVED***isClient,***REMOVED***useEventListener***REMOVED***}***REMOVED***from***REMOVED***'@vueuse/core'\nimport***REMOVED***{***REMOVED***EVENT_CODE***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/constants'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***Ref***REMOVED***}***REMOVED***from***REMOVED***'vue'\n\ntype***REMOVED***ModalInstance***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED***handleClose:***REMOVED***()***REMOVED***=>***REMOVED***void\n}\n\nconst***REMOVED***modalStack:***REMOVED***ModalInstance[]***REMOVED***=***REMOVED***[]\n\nconst***REMOVED***closeModal***REMOVED***=***REMOVED***(e:***REMOVED***KeyboardEvent)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(modalStack.length***REMOVED***===***REMOVED***0)***REMOVED***return\n***REMOVED******REMOVED***if***REMOVED***(e.code***REMOVED***===***REMOVED***EVENT_CODE.esc)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***e.stopPropagation()\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***topModal***REMOVED***=***REMOVED***modalStack[modalStack.length***REMOVED***-***REMOVED***1]\n***REMOVED******REMOVED******REMOVED******REMOVED***topModal.handleClose()\n***REMOVED******REMOVED***}\n}\n\nexport***REMOVED***const***REMOVED***useModal***REMOVED***=***REMOVED***(instance:***REMOVED***ModalInstance,***REMOVED***visibleRef:***REMOVED***Ref<boolean>)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***watch(visibleRef,***REMOVED***(val)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(val)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***modalStack.push(instance)\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***modalStack.splice(modalStack.indexOf(instance),***REMOVED***1)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***})\n}\n\nif***REMOVED***(isClient)***REMOVED***useEventListener(document,***REMOVED***'keydown',***REMOVED***closeModal)\n"],"names":["EVENT_CODE","watch","isClient","useEventListener"],"mappings":";;;;;;;;AAGA,MAAM,UAAU,GAAG,EAAE,CAAC;AACtB,MAAM,UAAU,GAAG,CAAC,CAAC,KAAK;AAC1B,EAAE,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC;AAC7B,IAAI,OAAO;AACX,EAAE,IAAI,CAAC,CAAC,IAAI,KAAKA,eAAU,CAAC,GAAG,EAAE;AACjC,IAAI,CAAC,CAAC,eAAe,EAAE,CAAC;AACxB,IAAI,MAAM,QAAQ,GAAG,UAAU,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACvD,IAAI,QAAQ,CAAC,WAAW,EAAE,CAAC;AAC3B,GAAG;AACH,CAAC,CAAC;AACU,MAAC,QAAQ,GAAG,CAAC,QAAQ,EAAE,UAAU,KAAK;AAClD,EAAEC,SAAK,CAAC,UAAU,EAAE,CAAC,GAAG,KAAK;AAC7B,IAAI,IAAI,GAAG,EAAE;AACb,MAAM,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAChC,KAAK,MAAM;AACX,MAAM,UAAU,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;AACzD,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE;AACF,IAAIC,aAAQ;AACZ,EAAEC,qBAAgB,CAAC,QAAQ,EAAE,SAAS,EAAE,UAAU,CAAC;;;;"}