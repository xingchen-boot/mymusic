{"version":3,"file":"index.js","sources":["../../../../../packages/hooks/use-id/index.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***getCurrentInstance,***REMOVED***inject,***REMOVED***unref***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{***REMOVED***computedEager***REMOVED***}***REMOVED***from***REMOVED***'@vueuse/core'\nimport***REMOVED***{***REMOVED***debugWarn,***REMOVED***isClient***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\nimport***REMOVED***{***REMOVED***useGetDerivedNamespace***REMOVED***}***REMOVED***from***REMOVED***'../use-namespace'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***MaybeRef***REMOVED***}***REMOVED***from***REMOVED***'@vueuse/core'\nimport***REMOVED***type***REMOVED***{***REMOVED***InjectionKey,***REMOVED***Ref***REMOVED***}***REMOVED***from***REMOVED***'vue'\n\nexport***REMOVED***type***REMOVED***ElIdInjectionContext***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED***prefix:***REMOVED***number\n***REMOVED******REMOVED***current:***REMOVED***number\n}\n\nconst***REMOVED***defaultIdInjection***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED***prefix:***REMOVED***Math.floor(Math.random()***REMOVED*******REMOVED***10000),\n***REMOVED******REMOVED***current:***REMOVED***0,\n}\n\nexport***REMOVED***const***REMOVED***ID_INJECTION_KEY:***REMOVED***InjectionKey<ElIdInjectionContext>***REMOVED***=\n***REMOVED******REMOVED***Symbol('elIdInjection')\n\nexport***REMOVED***const***REMOVED***useIdInjection***REMOVED***=***REMOVED***():***REMOVED***ElIdInjectionContext***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***return***REMOVED***getCurrentInstance()\n***REMOVED******REMOVED******REMOVED******REMOVED***?***REMOVED***inject(ID_INJECTION_KEY,***REMOVED***defaultIdInjection)\n***REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***defaultIdInjection\n}\n\nexport***REMOVED***const***REMOVED***useId***REMOVED***=***REMOVED***(deterministicId?:***REMOVED***MaybeRef<string>):***REMOVED***Ref<string>***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***idInjection***REMOVED***=***REMOVED***useIdInjection()\n***REMOVED******REMOVED***if***REMOVED***(!isClient***REMOVED***&&***REMOVED***idInjection***REMOVED***===***REMOVED***defaultIdInjection)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***debugWarn(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'IdInjection',\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***`Looks***REMOVED***like***REMOVED***you***REMOVED***are***REMOVED***using***REMOVED***server***REMOVED***rendering,***REMOVED***you***REMOVED***must***REMOVED***provide***REMOVED***a***REMOVED***id***REMOVED***provider***REMOVED***to***REMOVED***ensure***REMOVED***the***REMOVED***hydration***REMOVED***process***REMOVED***to***REMOVED***be***REMOVED***succeed\nusage:***REMOVED***app.provide(ID_INJECTION_KEY,***REMOVED***{\n***REMOVED******REMOVED***prefix:***REMOVED***number,\n***REMOVED******REMOVED***current:***REMOVED***number,\n})`\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***namespace***REMOVED***=***REMOVED***useGetDerivedNamespace()\n\n***REMOVED******REMOVED***//***REMOVED***NOTE:***REMOVED***Here***REMOVED***we***REMOVED***use***REMOVED***`computedEager`***REMOVED***to***REMOVED***calculate***REMOVED***the***REMOVED***id***REMOVED***value***REMOVED***immediately,***REMOVED***avoiding***REMOVED***inconsistent***REMOVED***id***REMOVED***generation***REMOVED***due***REMOVED***to***REMOVED***the***REMOVED***lazy***REMOVED***feature***REMOVED***of***REMOVED***`computed`***REMOVED***when***REMOVED***server***REMOVED***rendering.\n***REMOVED******REMOVED***const***REMOVED***idRef***REMOVED***=***REMOVED***computedEager(\n***REMOVED******REMOVED******REMOVED******REMOVED***()***REMOVED***=>\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***unref(deterministicId)***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***`${namespace.value}-id-${idInjection.prefix}-${idInjection.current++}`\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***return***REMOVED***idRef\n}\n"],"names":["getCurrentInstance","inject","useGetDerivedNamespace","computedEager","unref"],"mappings":";;;;;;;;AAIA,MAAM,kBAAkB,GAAG;AAC3B,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC;AACzC,EAAE,OAAO,EAAE,CAAC;AACZ,CAAC,CAAC;AACU,MAAC,gBAAgB,GAAG,MAAM,CAAC,eAAe,EAAE;AAC5C,MAAC,cAAc,GAAG,MAAM;AACpC,EAAE,OAAOA,sBAAkB,EAAE,GAAGC,UAAM,CAAC,gBAAgB,EAAE,kBAAkB,CAAC,GAAG,kBAAkB,CAAC;AAClG,EAAE;AACU,MAAC,KAAK,GAAG,CAAC,eAAe,KAAK;AAC1C,EAAE,MAAM,WAAW,GAAG,cAAc,EAAE,CAAC;AAQvC,EAAE,MAAM,SAAS,GAAGC,4BAAsB,EAAE,CAAC;AAC7C,EAAE,MAAM,KAAK,GAAGC,kBAAa,CAAC,MAAMC,SAAK,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC,EAAE,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;AACtI,EAAE,OAAO,KAAK,CAAC;AACf;;;;;;"}