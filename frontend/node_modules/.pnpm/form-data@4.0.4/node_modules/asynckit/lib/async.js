var***REMOVED***defer***REMOVED***=***REMOVED***require('./defer.js');

//***REMOVED***API
module.exports***REMOVED***=***REMOVED***async;

/**
***REMOVED*******REMOVED***Runs***REMOVED***provided***REMOVED***callback***REMOVED***asynchronously
***REMOVED*******REMOVED***even***REMOVED***if***REMOVED***callback***REMOVED***itself***REMOVED***is***REMOVED***not
***REMOVED****
***REMOVED*******REMOVED***@param***REMOVED******REMOVED******REMOVED***{function}***REMOVED***callback***REMOVED***-***REMOVED***callback***REMOVED***to***REMOVED***invoke
***REMOVED*******REMOVED***@returns***REMOVED***{function}***REMOVED***-***REMOVED***augmented***REMOVED***callback
***REMOVED****/
function***REMOVED***async(callback)
{
***REMOVED******REMOVED***var***REMOVED***isAsync***REMOVED***=***REMOVED***false;

***REMOVED******REMOVED***//***REMOVED***check***REMOVED***if***REMOVED***async***REMOVED***happened
***REMOVED******REMOVED***defer(function()***REMOVED***{***REMOVED***isAsync***REMOVED***=***REMOVED***true;***REMOVED***});

***REMOVED******REMOVED***return***REMOVED***function***REMOVED***async_callback(err,***REMOVED***result)
***REMOVED******REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isAsync)
***REMOVED******REMOVED******REMOVED******REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***callback(err,***REMOVED***result);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***else
***REMOVED******REMOVED******REMOVED******REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***defer(function***REMOVED***nextTick_callback()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***callback(err,***REMOVED***result);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
}
