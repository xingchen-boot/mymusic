#***REMOVED***@vue/server-renderer

**Note:***REMOVED***as***REMOVED***of***REMOVED***3.2.13+,***REMOVED***this***REMOVED***package***REMOVED***is***REMOVED***included***REMOVED***as***REMOVED***a***REMOVED***dependency***REMOVED***of***REMOVED***the***REMOVED***main***REMOVED***`vue`***REMOVED***package***REMOVED***and***REMOVED***can***REMOVED***be***REMOVED***accessed***REMOVED***as***REMOVED***`vue/server-renderer`.***REMOVED***This***REMOVED***means***REMOVED***you***REMOVED***no***REMOVED***longer***REMOVED***need***REMOVED***to***REMOVED***explicitly***REMOVED***install***REMOVED***this***REMOVED***package***REMOVED***and***REMOVED***ensure***REMOVED***its***REMOVED***version***REMOVED***match***REMOVED***that***REMOVED***of***REMOVED***`vue`'s.***REMOVED***Just***REMOVED***use***REMOVED***the***REMOVED***`vue/server-renderer`***REMOVED***deep***REMOVED***import***REMOVED***instead.**

##***REMOVED***Basic***REMOVED***API

###***REMOVED***`renderToString`

**Signature**

```ts
function***REMOVED***renderToString(
***REMOVED******REMOVED***input:***REMOVED***App***REMOVED***|***REMOVED***VNode,
***REMOVED******REMOVED***context?:***REMOVED***SSRContext,
):***REMOVED***Promise<string>
```

**Usage**

```js
const***REMOVED***{***REMOVED***createSSRApp***REMOVED***}***REMOVED***=***REMOVED***require('vue')
const***REMOVED***{***REMOVED***renderToString***REMOVED***}***REMOVED***=***REMOVED***require('@vue/server-renderer')

const***REMOVED***app***REMOVED***=***REMOVED***createSSRApp({
***REMOVED******REMOVED***data:***REMOVED***()***REMOVED***=>***REMOVED***({***REMOVED***msg:***REMOVED***'hello'***REMOVED***}),
***REMOVED******REMOVED***template:***REMOVED***`<div>{{***REMOVED***msg***REMOVED***}}</div>`,
})

;(async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***html***REMOVED***=***REMOVED***await***REMOVED***renderToString(app)
***REMOVED******REMOVED***console.log(html)
})()
```

###***REMOVED***Handling***REMOVED***Teleports

If***REMOVED***the***REMOVED***rendered***REMOVED***app***REMOVED***contains***REMOVED***teleports,***REMOVED***the***REMOVED***teleported***REMOVED***content***REMOVED***will***REMOVED***not***REMOVED***be***REMOVED***part***REMOVED***of***REMOVED***the***REMOVED***rendered***REMOVED***string.***REMOVED***Instead,***REMOVED***they***REMOVED***are***REMOVED***exposed***REMOVED***under***REMOVED***the***REMOVED***`teleports`***REMOVED***property***REMOVED***of***REMOVED***the***REMOVED***ssr***REMOVED***context***REMOVED***object:

```js
const***REMOVED***ctx***REMOVED***=***REMOVED***{}
const***REMOVED***html***REMOVED***=***REMOVED***await***REMOVED***renderToString(app,***REMOVED***ctx)

console.log(ctx.teleports)***REMOVED***//***REMOVED***{***REMOVED***'#teleported':***REMOVED***'teleported***REMOVED***content'***REMOVED***}
```

##***REMOVED***Streaming***REMOVED***API

###***REMOVED***`renderToNodeStream`

Renders***REMOVED***input***REMOVED***as***REMOVED***a***REMOVED***[Node.js***REMOVED***Readable***REMOVED***stream](https://nodejs.org/api/stream.html#stream_class_stream_readable).

**Signature**

```ts
function***REMOVED***renderToNodeStream(input:***REMOVED***App***REMOVED***|***REMOVED***VNode,***REMOVED***context?:***REMOVED***SSRContext):***REMOVED***Readable
```

**Usage**

```js
//***REMOVED***inside***REMOVED***a***REMOVED***Node.js***REMOVED***http***REMOVED***handler
renderToNodeStream(app).pipe(res)
```

**Note:*****REMOVED***This***REMOVED***method***REMOVED***is***REMOVED***not***REMOVED***supported***REMOVED***in***REMOVED***the***REMOVED***ESM***REMOVED***build***REMOVED***of***REMOVED***`@vue/server-renderer`,***REMOVED***which***REMOVED***is***REMOVED***decoupled***REMOVED***from***REMOVED***Node.js***REMOVED***environments.***REMOVED***Use***REMOVED***`pipeToNodeWritable`***REMOVED***instead.

###***REMOVED***`pipeToNodeWritable`

Render***REMOVED***and***REMOVED***pipe***REMOVED***to***REMOVED***an***REMOVED***existing***REMOVED***[Node.js***REMOVED***Writable***REMOVED***stream](https://nodejs.org/api/stream.html#stream_writable_streams)***REMOVED***instance.

**Signature**

```ts
function***REMOVED***pipeToNodeWritable(
***REMOVED******REMOVED***input:***REMOVED***App***REMOVED***|***REMOVED***VNode,
***REMOVED******REMOVED***context:***REMOVED***SSRContext***REMOVED***=***REMOVED***{},
***REMOVED******REMOVED***writable:***REMOVED***Writable,
):***REMOVED***void
```

**Usage**

```js
//***REMOVED***inside***REMOVED***a***REMOVED***Node.js***REMOVED***http***REMOVED***handler
pipeToNodeWritable(app,***REMOVED***{},***REMOVED***res)
```

###***REMOVED***`renderToWebStream`

Renders***REMOVED***input***REMOVED***as***REMOVED***a***REMOVED***[Web***REMOVED***ReadableStream](https://developer.mozilla.org/en-US/docs/Web/API/Streams_API).

**Signature**

```ts
function***REMOVED***renderToWebStream(
***REMOVED******REMOVED***input:***REMOVED***App***REMOVED***|***REMOVED***VNode,
***REMOVED******REMOVED***context?:***REMOVED***SSRContext,
):***REMOVED***ReadableStream
```

**Usage**

```js
//***REMOVED***inside***REMOVED***an***REMOVED***environment***REMOVED***with***REMOVED***ReadableStream***REMOVED***support
return***REMOVED***new***REMOVED***Response(renderToWebStream(app))
```

**Note:*****REMOVED***in***REMOVED***environments***REMOVED***that***REMOVED***do***REMOVED***not***REMOVED***expose***REMOVED***`ReadableStream`***REMOVED***constructor***REMOVED***in***REMOVED***the***REMOVED***global***REMOVED***scope,***REMOVED***`pipeToWebWritable`***REMOVED***should***REMOVED***be***REMOVED***used***REMOVED***instead.

###***REMOVED***`pipeToWebWritable`

Render***REMOVED***and***REMOVED***pipe***REMOVED***to***REMOVED***an***REMOVED***existing***REMOVED***[Web***REMOVED***WritableStream](https://developer.mozilla.org/en-US/docs/Web/API/WritableStream)***REMOVED***instance.

**Signature**

```ts
function***REMOVED***pipeToWebWritable(
***REMOVED******REMOVED***input:***REMOVED***App***REMOVED***|***REMOVED***VNode,
***REMOVED******REMOVED***context:***REMOVED***SSRContext***REMOVED***=***REMOVED***{},
***REMOVED******REMOVED***writable:***REMOVED***WritableStream,
):***REMOVED***void
```

**Usage**

This***REMOVED***is***REMOVED***typically***REMOVED***used***REMOVED***in***REMOVED***combination***REMOVED***with***REMOVED***[`TransformStream`](https://developer.mozilla.org/en-US/docs/Web/API/TransformStream):

```js
//***REMOVED***TransformStream***REMOVED***is***REMOVED***available***REMOVED***in***REMOVED***environments***REMOVED***such***REMOVED***as***REMOVED***CloudFlare***REMOVED***workers.
//***REMOVED***in***REMOVED***Node.js,***REMOVED***TransformStream***REMOVED***needs***REMOVED***to***REMOVED***be***REMOVED***explicitly***REMOVED***imported***REMOVED***from***REMOVED***'stream/web'
const***REMOVED***{***REMOVED***readable,***REMOVED***writable***REMOVED***}***REMOVED***=***REMOVED***new***REMOVED***TransformStream()
pipeToWebWritable(app,***REMOVED***{},***REMOVED***writable)

return***REMOVED***new***REMOVED***Response(readable)
```

###***REMOVED***`renderToSimpleStream`

Renders***REMOVED***input***REMOVED***in***REMOVED***streaming***REMOVED***mode***REMOVED***using***REMOVED***a***REMOVED***simple***REMOVED***readable***REMOVED***interface.

**Signature**

```ts
function***REMOVED***renderToSimpleStream(
***REMOVED******REMOVED***input:***REMOVED***App***REMOVED***|***REMOVED***VNode,
***REMOVED******REMOVED***context:***REMOVED***SSRContext,
***REMOVED******REMOVED***options:***REMOVED***SimpleReadable,
):***REMOVED***SimpleReadable

interface***REMOVED***SimpleReadable***REMOVED***{
***REMOVED******REMOVED***push(content:***REMOVED***string***REMOVED***|***REMOVED***null):***REMOVED***void
***REMOVED******REMOVED***destroy(err:***REMOVED***any):***REMOVED***void
}
```

**Usage**

```js
let***REMOVED***res***REMOVED***=***REMOVED***''

renderToSimpleStream(
***REMOVED******REMOVED***app,
***REMOVED******REMOVED***{},
***REMOVED******REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***push(chunk)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(chunk***REMOVED***===***REMOVED***null)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***done
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console(`render***REMOVED***complete:***REMOVED***${res}`)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***res***REMOVED***+=***REMOVED***chunk
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***},
***REMOVED******REMOVED******REMOVED******REMOVED***destroy(err)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***error***REMOVED***encountered
***REMOVED******REMOVED******REMOVED******REMOVED***},
***REMOVED******REMOVED***},
)
```
