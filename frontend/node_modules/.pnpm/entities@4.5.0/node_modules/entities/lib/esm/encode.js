import***REMOVED***htmlTrie***REMOVED***from***REMOVED***"./generated/encode-html.js";
import***REMOVED***{***REMOVED***xmlReplacer,***REMOVED***getCodePoint***REMOVED***}***REMOVED***from***REMOVED***"./escape.js";
const***REMOVED***htmlReplacer***REMOVED***=***REMOVED***/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;
/**
***REMOVED*******REMOVED***Encodes***REMOVED***all***REMOVED***characters***REMOVED***in***REMOVED***the***REMOVED***input***REMOVED***using***REMOVED***HTML***REMOVED***entities.***REMOVED***This***REMOVED***includes
***REMOVED*******REMOVED***characters***REMOVED***that***REMOVED***are***REMOVED***valid***REMOVED***ASCII***REMOVED***characters***REMOVED***in***REMOVED***HTML***REMOVED***documents,***REMOVED***such***REMOVED***as***REMOVED***`#`.
***REMOVED****
***REMOVED*******REMOVED***To***REMOVED***get***REMOVED***a***REMOVED***more***REMOVED***compact***REMOVED***output,***REMOVED***consider***REMOVED***using***REMOVED***the***REMOVED***`encodeNonAsciiHTML`
***REMOVED*******REMOVED***function,***REMOVED***which***REMOVED***will***REMOVED***only***REMOVED***encode***REMOVED***characters***REMOVED***that***REMOVED***are***REMOVED***not***REMOVED***valid***REMOVED***in***REMOVED***HTML
***REMOVED*******REMOVED***documents,***REMOVED***as***REMOVED***well***REMOVED***as***REMOVED***non-ASCII***REMOVED***characters.
***REMOVED****
***REMOVED*******REMOVED***If***REMOVED***a***REMOVED***character***REMOVED***has***REMOVED***no***REMOVED***equivalent***REMOVED***entity,***REMOVED***a***REMOVED***numeric***REMOVED***hexadecimal***REMOVED***reference
***REMOVED*******REMOVED***(eg.***REMOVED***`&#xfc;`)***REMOVED***will***REMOVED***be***REMOVED***used.
***REMOVED****/
export***REMOVED***function***REMOVED***encodeHTML(data)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***encodeHTMLTrieRe(htmlReplacer,***REMOVED***data);
}
/**
***REMOVED*******REMOVED***Encodes***REMOVED***all***REMOVED***non-ASCII***REMOVED***characters,***REMOVED***as***REMOVED***well***REMOVED***as***REMOVED***characters***REMOVED***not***REMOVED***valid***REMOVED***in***REMOVED***HTML
***REMOVED*******REMOVED***documents***REMOVED***using***REMOVED***HTML***REMOVED***entities.***REMOVED***This***REMOVED***function***REMOVED***will***REMOVED***not***REMOVED***encode***REMOVED***characters***REMOVED***that
***REMOVED*******REMOVED***are***REMOVED***valid***REMOVED***in***REMOVED***HTML***REMOVED***documents,***REMOVED***such***REMOVED***as***REMOVED***`#`.
***REMOVED****
***REMOVED*******REMOVED***If***REMOVED***a***REMOVED***character***REMOVED***has***REMOVED***no***REMOVED***equivalent***REMOVED***entity,***REMOVED***a***REMOVED***numeric***REMOVED***hexadecimal***REMOVED***reference
***REMOVED*******REMOVED***(eg.***REMOVED***`&#xfc;`)***REMOVED***will***REMOVED***be***REMOVED***used.
***REMOVED****/
export***REMOVED***function***REMOVED***encodeNonAsciiHTML(data)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***encodeHTMLTrieRe(xmlReplacer,***REMOVED***data);
}
function***REMOVED***encodeHTMLTrieRe(regExp,***REMOVED***str)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***ret***REMOVED***=***REMOVED***"";
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***lastIdx***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***match;
***REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***((match***REMOVED***=***REMOVED***regExp.exec(str))***REMOVED***!==***REMOVED***null)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***i***REMOVED***=***REMOVED***match.index;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ret***REMOVED***+=***REMOVED***str.substring(lastIdx,***REMOVED***i);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***char***REMOVED***=***REMOVED***str.charCodeAt(i);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***next***REMOVED***=***REMOVED***htmlTrie.get(char);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***next***REMOVED***===***REMOVED***"object")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***We***REMOVED***are***REMOVED***in***REMOVED***a***REMOVED***branch.***REMOVED***Try***REMOVED***to***REMOVED***match***REMOVED***the***REMOVED***next***REMOVED***char.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(i***REMOVED***+***REMOVED***1***REMOVED***<***REMOVED***str.length)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***nextChar***REMOVED***=***REMOVED***str.charCodeAt(i***REMOVED***+***REMOVED***1);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***value***REMOVED***=***REMOVED***typeof***REMOVED***next.n***REMOVED***===***REMOVED***"number"
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***?***REMOVED***next.n***REMOVED***===***REMOVED***nextChar
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***?***REMOVED***next.o
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***undefined
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***next.n.get(nextChar);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(value***REMOVED***!==***REMOVED***undefined)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ret***REMOVED***+=***REMOVED***value;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***lastIdx***REMOVED***=***REMOVED***regExp.lastIndex***REMOVED***+=***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***continue;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***next***REMOVED***=***REMOVED***next.v;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***We***REMOVED***might***REMOVED***have***REMOVED***a***REMOVED***tree***REMOVED***node***REMOVED***without***REMOVED***a***REMOVED***value;***REMOVED***skip***REMOVED***and***REMOVED***use***REMOVED***a***REMOVED***numeric***REMOVED***entity.
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(next***REMOVED***!==***REMOVED***undefined)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ret***REMOVED***+=***REMOVED***next;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***lastIdx***REMOVED***=***REMOVED***i***REMOVED***+***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cp***REMOVED***=***REMOVED***getCodePoint(str,***REMOVED***i);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ret***REMOVED***+=***REMOVED***`&#x${cp.toString(16)};`;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Increase***REMOVED***by***REMOVED***1***REMOVED***if***REMOVED***we***REMOVED***have***REMOVED***a***REMOVED***surrogate***REMOVED***pair
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***lastIdx***REMOVED***=***REMOVED***regExp.lastIndex***REMOVED***+=***REMOVED***Number(cp***REMOVED***!==***REMOVED***char);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***ret***REMOVED***+***REMOVED***str.substr(lastIdx);
}
//#***REMOVED***sourceMappingURL=encode.js.map