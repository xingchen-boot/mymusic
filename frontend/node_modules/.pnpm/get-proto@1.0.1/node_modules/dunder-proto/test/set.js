'use***REMOVED***strict';

var***REMOVED***test***REMOVED***=***REMOVED***require('tape');

var***REMOVED***setDunderProto***REMOVED***=***REMOVED***require('../set');

test('setDunderProto',***REMOVED***{***REMOVED***skip:***REMOVED***!setDunderProto***REMOVED***},***REMOVED***function***REMOVED***(t)***REMOVED***{
	if***REMOVED***(!setDunderProto)***REMOVED***{
		throw***REMOVED***'should***REMOVED***never***REMOVED***happen;***REMOVED***this***REMOVED***is***REMOVED***just***REMOVED***for***REMOVED***type***REMOVED***narrowing';***REMOVED***//***REMOVED***eslint-disable-line***REMOVED***no-throw-literal
	}

	//***REMOVED***@ts-expect-error
	t['throws'](function***REMOVED***()***REMOVED***{***REMOVED***setDunderProto();***REMOVED***},***REMOVED***TypeError,***REMOVED***'throws***REMOVED***if***REMOVED***no***REMOVED***arguments');
	//***REMOVED***@ts-expect-error
	t['throws'](function***REMOVED***()***REMOVED***{***REMOVED***setDunderProto(undefined);***REMOVED***},***REMOVED***TypeError,***REMOVED***'throws***REMOVED***with***REMOVED***undefined***REMOVED***and***REMOVED***nothing');
	//***REMOVED***@ts-expect-error
	t['throws'](function***REMOVED***()***REMOVED***{***REMOVED***setDunderProto(undefined,***REMOVED***undefined);***REMOVED***},***REMOVED***TypeError,***REMOVED***'throws***REMOVED***with***REMOVED***undefined***REMOVED***and***REMOVED***undefined');
	//***REMOVED***@ts-expect-error
	t['throws'](function***REMOVED***()***REMOVED***{***REMOVED***setDunderProto(null);***REMOVED***},***REMOVED***TypeError,***REMOVED***'throws***REMOVED***with***REMOVED***null***REMOVED***and***REMOVED***undefined');
	//***REMOVED***@ts-expect-error
	t['throws'](function***REMOVED***()***REMOVED***{***REMOVED***setDunderProto(null,***REMOVED***undefined);***REMOVED***},***REMOVED***TypeError,***REMOVED***'throws***REMOVED***with***REMOVED***null***REMOVED***and***REMOVED***undefined');

	/*****REMOVED***@type***REMOVED***{{***REMOVED***inherited?:***REMOVED***boolean***REMOVED***}}***REMOVED****/
	var***REMOVED***obj***REMOVED***=***REMOVED***{};
	t.ok('toString'***REMOVED***in***REMOVED***obj,***REMOVED***'object***REMOVED***initially***REMOVED***has***REMOVED***toString');

	setDunderProto(obj,***REMOVED***null);
	t.notOk('toString'***REMOVED***in***REMOVED***obj,***REMOVED***'object***REMOVED***no***REMOVED***longer***REMOVED***has***REMOVED***toString');

	t.notOk('inherited'***REMOVED***in***REMOVED***obj,***REMOVED***'object***REMOVED***lacks***REMOVED***inherited***REMOVED***property');
	setDunderProto(obj,***REMOVED***{***REMOVED***inherited:***REMOVED***true***REMOVED***});
	t.equal(obj.inherited,***REMOVED***true,***REMOVED***'object***REMOVED***has***REMOVED***inherited***REMOVED***property');

	t.end();
});

test('no***REMOVED***dunder***REMOVED***proto',***REMOVED***{***REMOVED***skip:***REMOVED***!!setDunderProto***REMOVED***},***REMOVED***function***REMOVED***(t)***REMOVED***{
	if***REMOVED***('__proto__'***REMOVED***in***REMOVED***Object.prototype)***REMOVED***{
		t['throws'](
			//***REMOVED***@ts-expect-error
			function***REMOVED***()***REMOVED***{***REMOVED***({}).__proto__***REMOVED***=***REMOVED***null;***REMOVED***},***REMOVED***//***REMOVED***eslint-disable-line***REMOVED***no-proto
			Error,
			'throws***REMOVED***when***REMOVED***setting***REMOVED***Object.prototype.__proto__'
		);
	}***REMOVED***else***REMOVED***{
		t.notOk('__proto__'***REMOVED***in***REMOVED***Object.prototype,***REMOVED***'no***REMOVED***__proto__***REMOVED***in***REMOVED***Object.prototype');
	}

	t.end();
});
