import***REMOVED***{***REMOVED***shallowRef,***REMOVED***ref***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***getStyle,***REMOVED***setStyle***REMOVED***}***REMOVED***from***REMOVED***'../../../../utils/dom/style.mjs';
import***REMOVED***{***REMOVED***useNamespace***REMOVED***}***REMOVED***from***REMOVED***'../../../../hooks/use-namespace/index.mjs';
import***REMOVED***{***REMOVED***isUndefined***REMOVED***}***REMOVED***from***REMOVED***'../../../../utils/types.mjs';

function***REMOVED***useDragTag({
***REMOVED******REMOVED***wrapperRef,
***REMOVED******REMOVED***handleDragged,
***REMOVED******REMOVED***afterDragged
})***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***ns***REMOVED***=***REMOVED***useNamespace("input-tag");
***REMOVED******REMOVED***const***REMOVED***dropIndicatorRef***REMOVED***=***REMOVED***shallowRef();
***REMOVED******REMOVED***const***REMOVED***showDropIndicator***REMOVED***=***REMOVED***ref(false);
***REMOVED******REMOVED***let***REMOVED***draggingIndex;
***REMOVED******REMOVED***let***REMOVED***draggingTag;
***REMOVED******REMOVED***let***REMOVED***dropIndex;
***REMOVED******REMOVED***let***REMOVED***dropType;
***REMOVED******REMOVED***function***REMOVED***getTagClassName(index)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***`.${ns.e("inner")}***REMOVED***.${ns.namespace.value}-tag:nth-child(${index***REMOVED***+***REMOVED***1})`;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***handleDragStart(event,***REMOVED***index)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***draggingIndex***REMOVED***=***REMOVED***index;
***REMOVED******REMOVED******REMOVED******REMOVED***draggingTag***REMOVED***=***REMOVED***wrapperRef.value.querySelector(getTagClassName(index));
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(draggingTag)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***draggingTag.style.opacity***REMOVED***=***REMOVED***"0.5";
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***event.dataTransfer.effectAllowed***REMOVED***=***REMOVED***"move";
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***handleDragOver(event,***REMOVED***index)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***dropIndex***REMOVED***=***REMOVED***index;
***REMOVED******REMOVED******REMOVED******REMOVED***event.preventDefault();
***REMOVED******REMOVED******REMOVED******REMOVED***event.dataTransfer.dropEffect***REMOVED***=***REMOVED***"move";
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isUndefined(draggingIndex)***REMOVED***||***REMOVED***draggingIndex***REMOVED***===***REMOVED***index)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***showDropIndicator.value***REMOVED***=***REMOVED***false;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dropPosition***REMOVED***=***REMOVED***wrapperRef.value.querySelector(getTagClassName(index)).getBoundingClientRect();
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dropPrev***REMOVED***=***REMOVED***!(draggingIndex***REMOVED***+***REMOVED***1***REMOVED***===***REMOVED***index);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dropNext***REMOVED***=***REMOVED***!(draggingIndex***REMOVED***-***REMOVED***1***REMOVED***===***REMOVED***index);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***distance***REMOVED***=***REMOVED***event.clientX***REMOVED***-***REMOVED***dropPosition.left;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***prevPercent***REMOVED***=***REMOVED***dropPrev***REMOVED***?***REMOVED***dropNext***REMOVED***?***REMOVED***0.5***REMOVED***:***REMOVED***1***REMOVED***:***REMOVED***-1;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***nextPercent***REMOVED***=***REMOVED***dropNext***REMOVED***?***REMOVED***dropPrev***REMOVED***?***REMOVED***0.5***REMOVED***:***REMOVED***0***REMOVED***:***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(distance***REMOVED***<=***REMOVED***dropPosition.width***REMOVED*******REMOVED***prevPercent)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dropType***REMOVED***=***REMOVED***"before";
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(distance***REMOVED***>***REMOVED***dropPosition.width***REMOVED*******REMOVED***nextPercent)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dropType***REMOVED***=***REMOVED***"after";
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dropType***REMOVED***=***REMOVED***void***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***innerEl***REMOVED***=***REMOVED***wrapperRef.value.querySelector(`.${ns.e("inner")}`);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***innerPosition***REMOVED***=***REMOVED***innerEl.getBoundingClientRect();
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***gap***REMOVED***=***REMOVED***Number.parseFloat(getStyle(innerEl,***REMOVED***"gap"))***REMOVED***/***REMOVED***2;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***indicatorTop***REMOVED***=***REMOVED***dropPosition.top***REMOVED***-***REMOVED***innerPosition.top;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***indicatorLeft***REMOVED***=***REMOVED***-9999;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(dropType***REMOVED***===***REMOVED***"before")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***indicatorLeft***REMOVED***=***REMOVED***Math.max(dropPosition.left***REMOVED***-***REMOVED***innerPosition.left***REMOVED***-***REMOVED***gap,***REMOVED***Math.floor(-gap***REMOVED***/***REMOVED***2));
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(dropType***REMOVED***===***REMOVED***"after")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***left***REMOVED***=***REMOVED***dropPosition.right***REMOVED***-***REMOVED***innerPosition.left;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***indicatorLeft***REMOVED***=***REMOVED***left***REMOVED***+***REMOVED***(innerPosition.width***REMOVED***===***REMOVED***left***REMOVED***?***REMOVED***Math.floor(gap***REMOVED***/***REMOVED***2)***REMOVED***:***REMOVED***gap);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***setStyle(dropIndicatorRef.value,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***top:***REMOVED***`${indicatorTop}px`,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***left:***REMOVED***`${indicatorLeft}px`
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***showDropIndicator.value***REMOVED***=***REMOVED***!!dropType;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***handleDragEnd(event)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***event.preventDefault();
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(draggingTag)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***draggingTag.style.opacity***REMOVED***=***REMOVED***"";
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(dropType***REMOVED***&&***REMOVED***!isUndefined(draggingIndex)***REMOVED***&&***REMOVED***!isUndefined(dropIndex)***REMOVED***&&***REMOVED***draggingIndex***REMOVED***!==***REMOVED***dropIndex)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleDragged(draggingIndex,***REMOVED***dropIndex,***REMOVED***dropType);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***showDropIndicator.value***REMOVED***=***REMOVED***false;
***REMOVED******REMOVED******REMOVED******REMOVED***draggingIndex***REMOVED***=***REMOVED***void***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***draggingTag***REMOVED***=***REMOVED***null;
***REMOVED******REMOVED******REMOVED******REMOVED***dropIndex***REMOVED***=***REMOVED***void***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***dropType***REMOVED***=***REMOVED***void***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***afterDragged***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***afterDragged();
***REMOVED******REMOVED***}
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***dropIndicatorRef,
***REMOVED******REMOVED******REMOVED******REMOVED***showDropIndicator,
***REMOVED******REMOVED******REMOVED******REMOVED***handleDragStart,
***REMOVED******REMOVED******REMOVED******REMOVED***handleDragOver,
***REMOVED******REMOVED******REMOVED******REMOVED***handleDragEnd
***REMOVED******REMOVED***};
}

export***REMOVED***{***REMOVED***useDragTag***REMOVED***};
//#***REMOVED***sourceMappingURL=use-drag-tag.mjs.map
