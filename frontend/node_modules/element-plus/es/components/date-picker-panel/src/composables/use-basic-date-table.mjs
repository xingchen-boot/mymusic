import***REMOVED***{***REMOVED***ref,***REMOVED***computed,***REMOVED***unref,***REMOVED***watch,***REMOVED***nextTick***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***dayjs***REMOVED***from***REMOVED***'dayjs';
import***REMOVED***{***REMOVED***flatten***REMOVED***}***REMOVED***from***REMOVED***'lodash-unified';
import***REMOVED***{***REMOVED***buildPickerTable***REMOVED***}***REMOVED***from***REMOVED***'../utils.mjs';
import***REMOVED***{***REMOVED***useLocale***REMOVED***}***REMOVED***from***REMOVED***'../../../../hooks/use-locale/index.mjs';
import***REMOVED***{***REMOVED***castArray***REMOVED***}***REMOVED***from***REMOVED***'../../../../utils/arrays.mjs';
import***REMOVED***{***REMOVED***useNamespace***REMOVED***}***REMOVED***from***REMOVED***'../../../../hooks/use-namespace/index.mjs';
import***REMOVED***{***REMOVED***isArray***REMOVED***}***REMOVED***from***REMOVED***'@vue/shared';

const***REMOVED***isNormalDay***REMOVED***=***REMOVED***(type***REMOVED***=***REMOVED***"")***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***return***REMOVED***["normal",***REMOVED***"today"].includes(type);
};
const***REMOVED***useBasicDateTable***REMOVED***=***REMOVED***(props,***REMOVED***emit)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***lang***REMOVED***}***REMOVED***=***REMOVED***useLocale();
***REMOVED******REMOVED***const***REMOVED***tbodyRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***currentCellRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***lastRow***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***lastColumn***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***tableRows***REMOVED***=***REMOVED***ref([[],***REMOVED***[],***REMOVED***[],***REMOVED***[],***REMOVED***[],***REMOVED***[]]);
***REMOVED******REMOVED***let***REMOVED***focusWithClick***REMOVED***=***REMOVED***false;
***REMOVED******REMOVED***const***REMOVED***firstDayOfWeek***REMOVED***=***REMOVED***props.date.$locale().weekStart***REMOVED***||***REMOVED***7;
***REMOVED******REMOVED***const***REMOVED***WEEKS_CONSTANT***REMOVED***=***REMOVED***props.date.locale("en").localeData().weekdaysShort().map((_)***REMOVED***=>***REMOVED***_.toLowerCase());
***REMOVED******REMOVED***const***REMOVED***offsetDay***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***firstDayOfWeek***REMOVED***>***REMOVED***3***REMOVED***?***REMOVED***7***REMOVED***-***REMOVED***firstDayOfWeek***REMOVED***:***REMOVED***-firstDayOfWeek;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***startDate***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***startDayOfMonth***REMOVED***=***REMOVED***props.date.startOf("month");
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***startDayOfMonth.subtract(startDayOfMonth.day()***REMOVED***||***REMOVED***7,***REMOVED***"day");
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***WEEKS***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***WEEKS_CONSTANT.concat(WEEKS_CONSTANT).slice(firstDayOfWeek,***REMOVED***firstDayOfWeek***REMOVED***+***REMOVED***7);
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***hasCurrent***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***flatten(unref(rows)).some((row)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***row.isCurrent;
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***days***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***startOfMonth***REMOVED***=***REMOVED***props.date.startOf("month");
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***startOfMonthDay***REMOVED***=***REMOVED***startOfMonth.day()***REMOVED***||***REMOVED***7;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dateCountOfMonth***REMOVED***=***REMOVED***startOfMonth.daysInMonth();
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dateCountOfLastMonth***REMOVED***=***REMOVED***startOfMonth.subtract(1,***REMOVED***"month").daysInMonth();
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***startOfMonthDay,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dateCountOfMonth,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***dateCountOfLastMonth
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***selectedDate***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.selectionMode***REMOVED***===***REMOVED***"dates"***REMOVED***?***REMOVED***castArray(props.parsedValue)***REMOVED***:***REMOVED***[];
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***setDateText***REMOVED***=***REMOVED***(cell,***REMOVED***{***REMOVED***count,***REMOVED***rowIndex,***REMOVED***columnIndex***REMOVED***})***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***startOfMonthDay,***REMOVED***dateCountOfMonth,***REMOVED***dateCountOfLastMonth***REMOVED***}***REMOVED***=***REMOVED***unref(days);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***offset***REMOVED***=***REMOVED***unref(offsetDay);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(rowIndex***REMOVED***>=***REMOVED***0***REMOVED***&&***REMOVED***rowIndex***REMOVED***<=***REMOVED***1)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***numberOfDaysFromPreviousMonth***REMOVED***=***REMOVED***startOfMonthDay***REMOVED***+***REMOVED***offset***REMOVED***<***REMOVED***0***REMOVED***?***REMOVED***7***REMOVED***+***REMOVED***startOfMonthDay***REMOVED***+***REMOVED***offset***REMOVED***:***REMOVED***startOfMonthDay***REMOVED***+***REMOVED***offset;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(columnIndex***REMOVED***+***REMOVED***rowIndex***REMOVED*******REMOVED***7***REMOVED***>=***REMOVED***numberOfDaysFromPreviousMonth)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cell.text***REMOVED***=***REMOVED***count;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***true;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cell.text***REMOVED***=***REMOVED***dateCountOfLastMonth***REMOVED***-***REMOVED***(numberOfDaysFromPreviousMonth***REMOVED***-***REMOVED***columnIndex***REMOVED***%***REMOVED***7)***REMOVED***+***REMOVED***1***REMOVED***+***REMOVED***rowIndex***REMOVED*******REMOVED***7;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cell.type***REMOVED***=***REMOVED***"prev-month";
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(count***REMOVED***<=***REMOVED***dateCountOfMonth)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cell.text***REMOVED***=***REMOVED***count;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cell.text***REMOVED***=***REMOVED***count***REMOVED***-***REMOVED***dateCountOfMonth;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cell.type***REMOVED***=***REMOVED***"next-month";
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***true;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***false;
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***setCellMetadata***REMOVED***=***REMOVED***(cell,***REMOVED***{***REMOVED***columnIndex,***REMOVED***rowIndex***REMOVED***},***REMOVED***count)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***disabledDate,***REMOVED***cellClassName***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***_selectedDate***REMOVED***=***REMOVED***unref(selectedDate);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***shouldIncrement***REMOVED***=***REMOVED***setDateText(cell,***REMOVED***{***REMOVED***count,***REMOVED***rowIndex,***REMOVED***columnIndex***REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cellDate***REMOVED***=***REMOVED***cell.dayjs.toDate();
***REMOVED******REMOVED******REMOVED******REMOVED***cell.selected***REMOVED***=***REMOVED***_selectedDate.find((d)***REMOVED***=>***REMOVED***d.isSame(cell.dayjs,***REMOVED***"day"));
***REMOVED******REMOVED******REMOVED******REMOVED***cell.isSelected***REMOVED***=***REMOVED***!!cell.selected;
***REMOVED******REMOVED******REMOVED******REMOVED***cell.isCurrent***REMOVED***=***REMOVED***isCurrent(cell);
***REMOVED******REMOVED******REMOVED******REMOVED***cell.disabled***REMOVED***=***REMOVED***disabledDate***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***disabledDate(cellDate);
***REMOVED******REMOVED******REMOVED******REMOVED***cell.customClass***REMOVED***=***REMOVED***cellClassName***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***cellClassName(cellDate);
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***shouldIncrement;
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***setRowMetadata***REMOVED***=***REMOVED***(row)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.selectionMode***REMOVED***===***REMOVED***"week")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***[start,***REMOVED***end]***REMOVED***=***REMOVED***props.showWeekNumber***REMOVED***?***REMOVED***[1,***REMOVED***7]***REMOVED***:***REMOVED***[0,***REMOVED***6];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isActive***REMOVED***=***REMOVED***isWeekActive(row[start***REMOVED***+***REMOVED***1]);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***row[start].inRange***REMOVED***=***REMOVED***isActive;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***row[start].start***REMOVED***=***REMOVED***isActive;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***row[end].inRange***REMOVED***=***REMOVED***isActive;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***row[end].end***REMOVED***=***REMOVED***isActive;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***rows***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***minDate,***REMOVED***maxDate,***REMOVED***rangeState,***REMOVED***showWeekNumber***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***offset***REMOVED***=***REMOVED***unref(offsetDay);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rows_***REMOVED***=***REMOVED***unref(tableRows);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dateUnit***REMOVED***=***REMOVED***"day";
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***count***REMOVED***=***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED***buildPickerTable({***REMOVED***row:***REMOVED***6,***REMOVED***column:***REMOVED***7***REMOVED***},***REMOVED***rows_,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***startDate:***REMOVED***minDate,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***columnIndexOffset:***REMOVED***showWeekNumber***REMOVED***?***REMOVED***1***REMOVED***:***REMOVED***0,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***nextEndDate:***REMOVED***rangeState.endDate***REMOVED***||***REMOVED***maxDate***REMOVED***||***REMOVED***rangeState.selecting***REMOVED***&&***REMOVED***minDate***REMOVED***||***REMOVED***null,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***now:***REMOVED***dayjs().locale(unref(lang)).startOf(dateUnit),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***unit:***REMOVED***dateUnit,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***relativeDateGetter:***REMOVED***(idx)***REMOVED***=>***REMOVED***unref(startDate).add(idx***REMOVED***-***REMOVED***offset,***REMOVED***dateUnit),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***setCellMetadata:***REMOVED***(...args)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(setCellMetadata(...args,***REMOVED***count))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***count***REMOVED***+=***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***setRowMetadata
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(showWeekNumber)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***rowIndex***REMOVED***=***REMOVED***0;***REMOVED***rowIndex***REMOVED***<***REMOVED***6;***REMOVED***rowIndex++)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(rows_[rowIndex][1].dayjs)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***rows_[rowIndex][0]***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***type:***REMOVED***"week",
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***text:***REMOVED***rows_[rowIndex][1].dayjs.week()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***rows_;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***watch(()***REMOVED***=>***REMOVED***props.date,***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***((_a***REMOVED***=***REMOVED***unref(tbodyRef))***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.contains(document.activeElement))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***nextTick();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***focus();
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***focus***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(_a***REMOVED***=***REMOVED***unref(currentCellRef))***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.focus();
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***isCurrent***REMOVED***=***REMOVED***(cell)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.selectionMode***REMOVED***===***REMOVED***"date"***REMOVED***&&***REMOVED***isNormalDay(cell.type)***REMOVED***&&***REMOVED***cellMatchesDate(cell,***REMOVED***props.parsedValue);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***cellMatchesDate***REMOVED***=***REMOVED***(cell,***REMOVED***date)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!date)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***false;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***dayjs(date).locale(unref(lang)).isSame(props.date.date(Number(cell.text)),***REMOVED***"day");
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***getDateOfCell***REMOVED***=***REMOVED***(row,***REMOVED***column)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***offsetFromStart***REMOVED***=***REMOVED***row***REMOVED*******REMOVED***7***REMOVED***+***REMOVED***(column***REMOVED***-***REMOVED***(props.showWeekNumber***REMOVED***?***REMOVED***1***REMOVED***:***REMOVED***0))***REMOVED***-***REMOVED***unref(offsetDay);
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***unref(startDate).add(offsetFromStart,***REMOVED***"day");
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handleMouseMove***REMOVED***=***REMOVED***(event)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.rangeState.selecting)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***target***REMOVED***=***REMOVED***event.target;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(target.tagName***REMOVED***===***REMOVED***"SPAN")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***target***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***target.parentNode)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.parentNode;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(target.tagName***REMOVED***===***REMOVED***"DIV")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***target***REMOVED***=***REMOVED***target.parentNode;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(target.tagName***REMOVED***!==***REMOVED***"TD")
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***row***REMOVED***=***REMOVED***target.parentNode.rowIndex***REMOVED***-***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***column***REMOVED***=***REMOVED***target.cellIndex;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(unref(rows)[row][column].disabled)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(row***REMOVED***!==***REMOVED***unref(lastRow)***REMOVED***||***REMOVED***column***REMOVED***!==***REMOVED***unref(lastColumn))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***lastRow.value***REMOVED***=***REMOVED***row;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***lastColumn.value***REMOVED***=***REMOVED***column;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("changerange",***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***selecting:***REMOVED***true,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***endDate:***REMOVED***getDateOfCell(row,***REMOVED***column)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***isSelectedCell***REMOVED***=***REMOVED***(cell)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***!unref(hasCurrent)***REMOVED***&&***REMOVED***(cell***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***cell.text)***REMOVED***===***REMOVED***1***REMOVED***&&***REMOVED***cell.type***REMOVED***===***REMOVED***"normal"***REMOVED***||***REMOVED***cell.isCurrent;
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handleFocus***REMOVED***=***REMOVED***(event)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(focusWithClick***REMOVED***||***REMOVED***unref(hasCurrent)***REMOVED***||***REMOVED***props.selectionMode***REMOVED***!==***REMOVED***"date")
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***handlePickDate(event,***REMOVED***true);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handleMouseDown***REMOVED***=***REMOVED***(event)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***target***REMOVED***=***REMOVED***event.target.closest("td");
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!target)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***focusWithClick***REMOVED***=***REMOVED***true;
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handleMouseUp***REMOVED***=***REMOVED***(event)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***target***REMOVED***=***REMOVED***event.target.closest("td");
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!target)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***focusWithClick***REMOVED***=***REMOVED***false;
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handleRangePick***REMOVED***=***REMOVED***(newDate)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.rangeState.selecting***REMOVED***||***REMOVED***!props.minDate)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("pick",***REMOVED***{***REMOVED***minDate:***REMOVED***newDate,***REMOVED***maxDate:***REMOVED***null***REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("select",***REMOVED***true);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(newDate***REMOVED***>=***REMOVED***props.minDate)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("pick",***REMOVED***{***REMOVED***minDate:***REMOVED***props.minDate,***REMOVED***maxDate:***REMOVED***newDate***REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("pick",***REMOVED***{***REMOVED***minDate:***REMOVED***newDate,***REMOVED***maxDate:***REMOVED***props.minDate***REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("select",***REMOVED***false);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handleWeekPick***REMOVED***=***REMOVED***(newDate)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***weekNumber***REMOVED***=***REMOVED***newDate.week();
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***value***REMOVED***=***REMOVED***`${newDate.year()}w${weekNumber}`;
***REMOVED******REMOVED******REMOVED******REMOVED***emit("pick",***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***year:***REMOVED***newDate.year(),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***week:***REMOVED***weekNumber,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***date:***REMOVED***newDate.startOf("week")
***REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handleDatesPick***REMOVED***=***REMOVED***(newDate,***REMOVED***selected)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***newValue***REMOVED***=***REMOVED***selected***REMOVED***?***REMOVED***castArray(props.parsedValue).filter((d)***REMOVED***=>***REMOVED***(d***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***d.valueOf())***REMOVED***!==***REMOVED***newDate.valueOf())***REMOVED***:***REMOVED***castArray(props.parsedValue).concat([newDate]);
***REMOVED******REMOVED******REMOVED******REMOVED***emit("pick",***REMOVED***newValue);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handlePickDate***REMOVED***=***REMOVED***(event,***REMOVED***isKeyboardMovement***REMOVED***=***REMOVED***false)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.disabled)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***target***REMOVED***=***REMOVED***event.target.closest("td");
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!target)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***row***REMOVED***=***REMOVED***target.parentNode.rowIndex***REMOVED***-***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***column***REMOVED***=***REMOVED***target.cellIndex;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cell***REMOVED***=***REMOVED***unref(rows)[row][column];
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cell.disabled***REMOVED***||***REMOVED***cell.type***REMOVED***===***REMOVED***"week")
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***newDate***REMOVED***=***REMOVED***getDateOfCell(row,***REMOVED***column);
***REMOVED******REMOVED******REMOVED******REMOVED***switch***REMOVED***(props.selectionMode)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***"range":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleRangePick(newDate);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***"date":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit("pick",***REMOVED***newDate,***REMOVED***isKeyboardMovement);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***"week":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleWeekPick(newDate);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***"dates":***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleDatesPick(newDate,***REMOVED***!!cell.selected);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***isWeekActive***REMOVED***=***REMOVED***(cell)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.selectionMode***REMOVED***!==***REMOVED***"week")
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***false;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***newDate***REMOVED***=***REMOVED***props.date.startOf("day");
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cell.type***REMOVED***===***REMOVED***"prev-month")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***newDate***REMOVED***=***REMOVED***newDate.subtract(1,***REMOVED***"month");
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cell.type***REMOVED***===***REMOVED***"next-month")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***newDate***REMOVED***=***REMOVED***newDate.add(1,***REMOVED***"month");
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***newDate***REMOVED***=***REMOVED***newDate.date(Number.parseInt(cell.text,***REMOVED***10));
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.parsedValue***REMOVED***&&***REMOVED***!isArray(props.parsedValue))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dayOffset***REMOVED***=***REMOVED***(props.parsedValue.day()***REMOVED***-***REMOVED***firstDayOfWeek***REMOVED***+***REMOVED***7)***REMOVED***%***REMOVED***7***REMOVED***-***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***weekDate***REMOVED***=***REMOVED***props.parsedValue.subtract(dayOffset,***REMOVED***"day");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***weekDate.isSame(newDate,***REMOVED***"day");
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***false;
***REMOVED******REMOVED***};
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***WEEKS,
***REMOVED******REMOVED******REMOVED******REMOVED***rows,
***REMOVED******REMOVED******REMOVED******REMOVED***tbodyRef,
***REMOVED******REMOVED******REMOVED******REMOVED***currentCellRef,
***REMOVED******REMOVED******REMOVED******REMOVED***focus,
***REMOVED******REMOVED******REMOVED******REMOVED***isCurrent,
***REMOVED******REMOVED******REMOVED******REMOVED***isWeekActive,
***REMOVED******REMOVED******REMOVED******REMOVED***isSelectedCell,
***REMOVED******REMOVED******REMOVED******REMOVED***handlePickDate,
***REMOVED******REMOVED******REMOVED******REMOVED***handleMouseUp,
***REMOVED******REMOVED******REMOVED******REMOVED***handleMouseDown,
***REMOVED******REMOVED******REMOVED******REMOVED***handleMouseMove,
***REMOVED******REMOVED******REMOVED******REMOVED***handleFocus
***REMOVED******REMOVED***};
};
const***REMOVED***useBasicDateTableDOM***REMOVED***=***REMOVED***(props,***REMOVED***{
***REMOVED******REMOVED***isCurrent,
***REMOVED******REMOVED***isWeekActive
})***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***ns***REMOVED***=***REMOVED***useNamespace("date-table");
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***t***REMOVED***}***REMOVED***=***REMOVED***useLocale();
***REMOVED******REMOVED***const***REMOVED***tableKls***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED***ns.b(),
***REMOVED******REMOVED******REMOVED******REMOVED***{***REMOVED***"is-week-mode":***REMOVED***props.selectionMode***REMOVED***===***REMOVED***"week"***REMOVED***&&***REMOVED***!props.disabled***REMOVED***}
***REMOVED******REMOVED***]);
***REMOVED******REMOVED***const***REMOVED***tableLabel***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***t("el.datepicker.dateTablePrompt"));
***REMOVED******REMOVED***const***REMOVED***getCellClasses***REMOVED***=***REMOVED***(cell)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***classes***REMOVED***=***REMOVED***[];
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isNormalDay(cell.type)***REMOVED***&&***REMOVED***!cell.disabled)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***classes.push("available");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cell.type***REMOVED***===***REMOVED***"today")***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***classes.push("today");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***classes.push(cell.type);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isCurrent(cell))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***classes.push("current");
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cell.inRange***REMOVED***&&***REMOVED***(isNormalDay(cell.type)***REMOVED***||***REMOVED***props.selectionMode***REMOVED***===***REMOVED***"week"))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***classes.push("in-range");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cell.start)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***classes.push("start-date");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cell.end)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***classes.push("end-date");
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cell.disabled***REMOVED***||***REMOVED***props.disabled)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***classes.push("disabled");
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cell.selected)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***classes.push("selected");
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(cell.customClass)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***classes.push(cell.customClass);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***classes.join("***REMOVED***");
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***getRowKls***REMOVED***=***REMOVED***(cell)***REMOVED***=>***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED***ns.e("row"),
***REMOVED******REMOVED******REMOVED******REMOVED***{***REMOVED***current:***REMOVED***isWeekActive(cell)***REMOVED***}
***REMOVED******REMOVED***];
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***tableKls,
***REMOVED******REMOVED******REMOVED******REMOVED***tableLabel,
***REMOVED******REMOVED******REMOVED******REMOVED***weekHeaderClass:***REMOVED***ns.e("week-header"),
***REMOVED******REMOVED******REMOVED******REMOVED***getCellClasses,
***REMOVED******REMOVED******REMOVED******REMOVED***getRowKls,
***REMOVED******REMOVED******REMOVED******REMOVED***t
***REMOVED******REMOVED***};
};

export***REMOVED***{***REMOVED***useBasicDateTable,***REMOVED***useBasicDateTableDOM***REMOVED***};
//#***REMOVED***sourceMappingURL=use-basic-date-table.mjs.map
