import***REMOVED***{***REMOVED***ref,***REMOVED***toRef,***REMOVED***getCurrentInstance,***REMOVED***shallowRef,***REMOVED***computed,***REMOVED***unref,***REMOVED***watch***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***useColumns***REMOVED***}***REMOVED***from***REMOVED***'./composables/use-columns.mjs';
import***REMOVED***{***REMOVED***useScrollbar***REMOVED***}***REMOVED***from***REMOVED***'./composables/use-scrollbar.mjs';
import***REMOVED***{***REMOVED***useRow***REMOVED***}***REMOVED***from***REMOVED***'./composables/use-row.mjs';
import***REMOVED***{***REMOVED***useData***REMOVED***}***REMOVED***from***REMOVED***'./composables/use-data.mjs';
import***REMOVED***{***REMOVED***useStyles***REMOVED***}***REMOVED***from***REMOVED***'./composables/use-styles.mjs';
import***REMOVED***{***REMOVED***useNamespace***REMOVED***}***REMOVED***from***REMOVED***'../../../hooks/use-namespace/index.mjs';
import***REMOVED***{***REMOVED***isNumber***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/types.mjs';
import***REMOVED***{***REMOVED***isArray***REMOVED***}***REMOVED***from***REMOVED***'@vue/shared';

function***REMOVED***useTable(props)***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***mainTableRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***leftTableRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***rightTableRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***columns,
***REMOVED******REMOVED******REMOVED******REMOVED***columnsStyles,
***REMOVED******REMOVED******REMOVED******REMOVED***columnsTotalWidth,
***REMOVED******REMOVED******REMOVED******REMOVED***fixedColumnsOnLeft,
***REMOVED******REMOVED******REMOVED******REMOVED***fixedColumnsOnRight,
***REMOVED******REMOVED******REMOVED******REMOVED***hasFixedColumns,
***REMOVED******REMOVED******REMOVED******REMOVED***mainColumns,
***REMOVED******REMOVED******REMOVED******REMOVED***onColumnSorted
***REMOVED******REMOVED***}***REMOVED***=***REMOVED***useColumns(props,***REMOVED***toRef(props,***REMOVED***"columns"),***REMOVED***toRef(props,***REMOVED***"fixed"));
***REMOVED******REMOVED***const***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***scrollTo,
***REMOVED******REMOVED******REMOVED******REMOVED***scrollToLeft,
***REMOVED******REMOVED******REMOVED******REMOVED***scrollToTop,
***REMOVED******REMOVED******REMOVED******REMOVED***scrollToRow,
***REMOVED******REMOVED******REMOVED******REMOVED***onScroll,
***REMOVED******REMOVED******REMOVED******REMOVED***onVerticalScroll,
***REMOVED******REMOVED******REMOVED******REMOVED***scrollPos
***REMOVED******REMOVED***}***REMOVED***=***REMOVED***useScrollbar(props,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***mainTableRef,
***REMOVED******REMOVED******REMOVED******REMOVED***leftTableRef,
***REMOVED******REMOVED******REMOVED******REMOVED***rightTableRef,
***REMOVED******REMOVED******REMOVED******REMOVED***onMaybeEndReached
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***ns***REMOVED***=***REMOVED***useNamespace("table-v2");
***REMOVED******REMOVED***const***REMOVED***instance***REMOVED***=***REMOVED***getCurrentInstance();
***REMOVED******REMOVED***const***REMOVED***isScrolling***REMOVED***=***REMOVED***shallowRef(false);
***REMOVED******REMOVED***const***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***expandedRowKeys,
***REMOVED******REMOVED******REMOVED******REMOVED***lastRenderedRowIndex,
***REMOVED******REMOVED******REMOVED******REMOVED***isDynamic,
***REMOVED******REMOVED******REMOVED******REMOVED***isResetting,
***REMOVED******REMOVED******REMOVED******REMOVED***rowHeights,
***REMOVED******REMOVED******REMOVED******REMOVED***resetAfterIndex,
***REMOVED******REMOVED******REMOVED******REMOVED***onRowExpanded,
***REMOVED******REMOVED******REMOVED******REMOVED***onRowHeightChange,
***REMOVED******REMOVED******REMOVED******REMOVED***onRowHovered,
***REMOVED******REMOVED******REMOVED******REMOVED***onRowsRendered
***REMOVED******REMOVED***}***REMOVED***=***REMOVED***useRow(props,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***mainTableRef,
***REMOVED******REMOVED******REMOVED******REMOVED***leftTableRef,
***REMOVED******REMOVED******REMOVED******REMOVED***rightTableRef,
***REMOVED******REMOVED******REMOVED******REMOVED***tableInstance:***REMOVED***instance,
***REMOVED******REMOVED******REMOVED******REMOVED***ns,
***REMOVED******REMOVED******REMOVED******REMOVED***isScrolling
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***data,***REMOVED***depthMap***REMOVED***}***REMOVED***=***REMOVED***useData(props,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***expandedRowKeys,
***REMOVED******REMOVED******REMOVED******REMOVED***lastRenderedRowIndex,
***REMOVED******REMOVED******REMOVED******REMOVED***resetAfterIndex
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***rowsHeight***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***estimatedRowHeight,***REMOVED***rowHeight***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***_data***REMOVED***=***REMOVED***unref(data);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isNumber(estimatedRowHeight))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***Object.values(unref(rowHeights)).reduce((acc,***REMOVED***curr)***REMOVED***=>***REMOVED***acc***REMOVED***+***REMOVED***curr,***REMOVED***0);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***_data.length***REMOVED*******REMOVED***rowHeight;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***bodyWidth,
***REMOVED******REMOVED******REMOVED******REMOVED***fixedTableHeight,
***REMOVED******REMOVED******REMOVED******REMOVED***mainTableHeight,
***REMOVED******REMOVED******REMOVED******REMOVED***leftTableWidth,
***REMOVED******REMOVED******REMOVED******REMOVED***rightTableWidth,
***REMOVED******REMOVED******REMOVED******REMOVED***windowHeight,
***REMOVED******REMOVED******REMOVED******REMOVED***footerHeight,
***REMOVED******REMOVED******REMOVED******REMOVED***emptyStyle,
***REMOVED******REMOVED******REMOVED******REMOVED***rootStyle,
***REMOVED******REMOVED******REMOVED******REMOVED***headerHeight
***REMOVED******REMOVED***}***REMOVED***=***REMOVED***useStyles(props,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***columnsTotalWidth,
***REMOVED******REMOVED******REMOVED******REMOVED***fixedColumnsOnLeft,
***REMOVED******REMOVED******REMOVED******REMOVED***fixedColumnsOnRight,
***REMOVED******REMOVED******REMOVED******REMOVED***rowsHeight
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***containerRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***showEmpty***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***noData***REMOVED***=***REMOVED***unref(data).length***REMOVED***===***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***isArray(props.fixedData)***REMOVED***?***REMOVED***props.fixedData.length***REMOVED***===***REMOVED***0***REMOVED***&&***REMOVED***noData***REMOVED***:***REMOVED***noData;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***function***REMOVED***getRowHeight(rowIndex)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***estimatedRowHeight,***REMOVED***rowHeight,***REMOVED***rowKey***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!estimatedRowHeight)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***rowHeight;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***unref(rowHeights)[unref(data)[rowIndex][rowKey]]***REMOVED***||***REMOVED***estimatedRowHeight;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***const***REMOVED***isEndReached***REMOVED***=***REMOVED***ref(false);
***REMOVED******REMOVED***function***REMOVED***onMaybeEndReached()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***onEndReached***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!onEndReached)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***scrollTop***REMOVED***}***REMOVED***=***REMOVED***unref(scrollPos);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***_totalHeight***REMOVED***=***REMOVED***unref(rowsHeight);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***clientHeight***REMOVED***=***REMOVED***unref(windowHeight);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***remainDistance***REMOVED***=***REMOVED***_totalHeight***REMOVED***-***REMOVED***(scrollTop***REMOVED***+***REMOVED***clientHeight)***REMOVED***+***REMOVED***props.hScrollbarSize;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!isEndReached.value***REMOVED***&&***REMOVED***unref(lastRenderedRowIndex)***REMOVED***>=***REMOVED***0***REMOVED***&&***REMOVED***_totalHeight***REMOVED***<=***REMOVED***scrollTop***REMOVED***+***REMOVED***unref(mainTableHeight)***REMOVED***-***REMOVED***unref(headerHeight))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isEndReached.value***REMOVED***=***REMOVED***true;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onEndReached(remainDistance);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isEndReached.value***REMOVED***=***REMOVED***false;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***watch(()***REMOVED***=>***REMOVED***unref(rowsHeight),***REMOVED***()***REMOVED***=>***REMOVED***isEndReached.value***REMOVED***=***REMOVED***false);
***REMOVED******REMOVED***watch(()***REMOVED***=>***REMOVED***props.expandedRowKeys,***REMOVED***(val)***REMOVED***=>***REMOVED***expandedRowKeys.value***REMOVED***=***REMOVED***val,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***deep:***REMOVED***true
***REMOVED******REMOVED***});
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***columns,
***REMOVED******REMOVED******REMOVED******REMOVED***containerRef,
***REMOVED******REMOVED******REMOVED******REMOVED***mainTableRef,
***REMOVED******REMOVED******REMOVED******REMOVED***leftTableRef,
***REMOVED******REMOVED******REMOVED******REMOVED***rightTableRef,
***REMOVED******REMOVED******REMOVED******REMOVED***isDynamic,
***REMOVED******REMOVED******REMOVED******REMOVED***isResetting,
***REMOVED******REMOVED******REMOVED******REMOVED***isScrolling,
***REMOVED******REMOVED******REMOVED******REMOVED***hasFixedColumns,
***REMOVED******REMOVED******REMOVED******REMOVED***columnsStyles,
***REMOVED******REMOVED******REMOVED******REMOVED***columnsTotalWidth,
***REMOVED******REMOVED******REMOVED******REMOVED***data,
***REMOVED******REMOVED******REMOVED******REMOVED***expandedRowKeys,
***REMOVED******REMOVED******REMOVED******REMOVED***depthMap,
***REMOVED******REMOVED******REMOVED******REMOVED***fixedColumnsOnLeft,
***REMOVED******REMOVED******REMOVED******REMOVED***fixedColumnsOnRight,
***REMOVED******REMOVED******REMOVED******REMOVED***mainColumns,
***REMOVED******REMOVED******REMOVED******REMOVED***bodyWidth,
***REMOVED******REMOVED******REMOVED******REMOVED***emptyStyle,
***REMOVED******REMOVED******REMOVED******REMOVED***rootStyle,
***REMOVED******REMOVED******REMOVED******REMOVED***footerHeight,
***REMOVED******REMOVED******REMOVED******REMOVED***mainTableHeight,
***REMOVED******REMOVED******REMOVED******REMOVED***fixedTableHeight,
***REMOVED******REMOVED******REMOVED******REMOVED***leftTableWidth,
***REMOVED******REMOVED******REMOVED******REMOVED***rightTableWidth,
***REMOVED******REMOVED******REMOVED******REMOVED***showEmpty,
***REMOVED******REMOVED******REMOVED******REMOVED***getRowHeight,
***REMOVED******REMOVED******REMOVED******REMOVED***onColumnSorted,
***REMOVED******REMOVED******REMOVED******REMOVED***onRowHovered,
***REMOVED******REMOVED******REMOVED******REMOVED***onRowExpanded,
***REMOVED******REMOVED******REMOVED******REMOVED***onRowsRendered,
***REMOVED******REMOVED******REMOVED******REMOVED***onRowHeightChange,
***REMOVED******REMOVED******REMOVED******REMOVED***scrollTo,
***REMOVED******REMOVED******REMOVED******REMOVED***scrollToLeft,
***REMOVED******REMOVED******REMOVED******REMOVED***scrollToTop,
***REMOVED******REMOVED******REMOVED******REMOVED***scrollToRow,
***REMOVED******REMOVED******REMOVED******REMOVED***onScroll,
***REMOVED******REMOVED******REMOVED******REMOVED***onVerticalScroll
***REMOVED******REMOVED***};
}

export***REMOVED***{***REMOVED***useTable***REMOVED***};
//#***REMOVED***sourceMappingURL=use-table.mjs.map
