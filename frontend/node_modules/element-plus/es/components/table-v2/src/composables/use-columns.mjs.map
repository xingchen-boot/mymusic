{"version":3,"file":"use-columns.mjs","sources":["../../../../../../../packages/components/table-v2/src/composables/use-columns.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***computed,***REMOVED***unref***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{***REMOVED***isObject***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\nimport***REMOVED***{***REMOVED***SortOrder,***REMOVED***oppositeOrderMap***REMOVED***}***REMOVED***from***REMOVED***'../constants'\nimport***REMOVED***{***REMOVED***placeholderSign***REMOVED***}***REMOVED***from***REMOVED***'../private'\nimport***REMOVED***{***REMOVED***calcColumnStyle***REMOVED***}***REMOVED***from***REMOVED***'./utils'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***CSSProperties,***REMOVED***Ref***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***type***REMOVED***{***REMOVED***TableV2Props***REMOVED***}***REMOVED***from***REMOVED***'../table'\nimport***REMOVED***type***REMOVED***{***REMOVED***AnyColumns,***REMOVED***Column,***REMOVED***KeyType***REMOVED***}***REMOVED***from***REMOVED***'../types'\n\nfunction***REMOVED***useColumns(\n***REMOVED******REMOVED***props:***REMOVED***TableV2Props,\n***REMOVED******REMOVED***columns:***REMOVED***Ref<AnyColumns>,\n***REMOVED******REMOVED***fixed:***REMOVED***Ref<boolean>\n)***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***_columns***REMOVED***=***REMOVED***computed(()***REMOVED***=>\n***REMOVED******REMOVED******REMOVED******REMOVED***unref(columns).map((column,***REMOVED***index)***REMOVED***=>***REMOVED***({\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***...column,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***key:***REMOVED***column.key***REMOVED***??***REMOVED***column.dataKey***REMOVED***??***REMOVED***index,\n***REMOVED******REMOVED******REMOVED******REMOVED***}))\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***const***REMOVED***visibleColumns***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***unref(_columns).filter((column)***REMOVED***=>***REMOVED***!column.hidden)\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***const***REMOVED***fixedColumnsOnLeft***REMOVED***=***REMOVED***computed(()***REMOVED***=>\n***REMOVED******REMOVED******REMOVED******REMOVED***unref(visibleColumns).filter(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(column)***REMOVED***=>***REMOVED***column.fixed***REMOVED***===***REMOVED***'left'***REMOVED***||***REMOVED***column.fixed***REMOVED***===***REMOVED***true\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***const***REMOVED***fixedColumnsOnRight***REMOVED***=***REMOVED***computed(()***REMOVED***=>\n***REMOVED******REMOVED******REMOVED******REMOVED***unref(visibleColumns).filter((column)***REMOVED***=>***REMOVED***column.fixed***REMOVED***===***REMOVED***'right')\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***const***REMOVED***normalColumns***REMOVED***=***REMOVED***computed(()***REMOVED***=>\n***REMOVED******REMOVED******REMOVED******REMOVED***unref(visibleColumns).filter((column)***REMOVED***=>***REMOVED***!column.fixed)\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***const***REMOVED***mainColumns***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***ret:***REMOVED***AnyColumns***REMOVED***=***REMOVED***[]\n\n***REMOVED******REMOVED******REMOVED******REMOVED***unref(fixedColumnsOnLeft).forEach((column)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ret.push({\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***...column,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***placeholderSign,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED***})\n\n***REMOVED******REMOVED******REMOVED******REMOVED***unref(normalColumns).forEach((column)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ret.push(column)\n***REMOVED******REMOVED******REMOVED******REMOVED***})\n\n***REMOVED******REMOVED******REMOVED******REMOVED***unref(fixedColumnsOnRight).forEach((column)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ret.push({\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***...column,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***placeholderSign,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED***})\n\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***ret\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***const***REMOVED***hasFixedColumns***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***unref(fixedColumnsOnLeft).length***REMOVED***||***REMOVED***unref(fixedColumnsOnRight).length\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***const***REMOVED***columnsStyles***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***unref(_columns).reduce<Record<KeyType,***REMOVED***CSSProperties>>(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(style,***REMOVED***column)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***style[column.key]***REMOVED***=***REMOVED***calcColumnStyle(column,***REMOVED***unref(fixed),***REMOVED***props.fixed)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***style\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***{}\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***const***REMOVED***columnsTotalWidth***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***unref(visibleColumns).reduce(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(width,***REMOVED***column)***REMOVED***=>***REMOVED***width***REMOVED***+***REMOVED***column.width,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***0\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***const***REMOVED***getColumn***REMOVED***=***REMOVED***(key:***REMOVED***KeyType)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***unref(_columns).find((column)***REMOVED***=>***REMOVED***column.key***REMOVED***===***REMOVED***key)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***getColumnStyle***REMOVED***=***REMOVED***(key:***REMOVED***KeyType)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***unref(columnsStyles)[key]\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***updateColumnWidth***REMOVED***=***REMOVED***(column:***REMOVED***Column<any>,***REMOVED***width:***REMOVED***number)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***column.width***REMOVED***=***REMOVED***width\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***onColumnSorted(e:***REMOVED***MouseEvent)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***key***REMOVED***}***REMOVED***=***REMOVED***(e.currentTarget***REMOVED***as***REMOVED***HTMLElement).dataset\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!key)***REMOVED***return\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***sortState,***REMOVED***sortBy***REMOVED***}***REMOVED***=***REMOVED***props\n\n***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***order***REMOVED***=***REMOVED***SortOrder.ASC\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isObject(sortState))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***order***REMOVED***=***REMOVED***oppositeOrderMap[sortState[key]]\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***order***REMOVED***=***REMOVED***oppositeOrderMap[sortBy.order]\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***props.onColumnSort?.({***REMOVED***column:***REMOVED***getColumn(key)!,***REMOVED***key,***REMOVED***order***REMOVED***})\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***columns:***REMOVED***_columns,\n***REMOVED******REMOVED******REMOVED******REMOVED***columnsStyles,\n***REMOVED******REMOVED******REMOVED******REMOVED***columnsTotalWidth,\n***REMOVED******REMOVED******REMOVED******REMOVED***fixedColumnsOnLeft,\n***REMOVED******REMOVED******REMOVED******REMOVED***fixedColumnsOnRight,\n***REMOVED******REMOVED******REMOVED******REMOVED***hasFixedColumns,\n***REMOVED******REMOVED******REMOVED******REMOVED***mainColumns,\n***REMOVED******REMOVED******REMOVED******REMOVED***normalColumns,\n***REMOVED******REMOVED******REMOVED******REMOVED***visibleColumns,\n\n***REMOVED******REMOVED******REMOVED******REMOVED***getColumn,\n***REMOVED******REMOVED******REMOVED******REMOVED***getColumnStyle,\n***REMOVED******REMOVED******REMOVED******REMOVED***updateColumnWidth,\n***REMOVED******REMOVED******REMOVED******REMOVED***onColumnSorted,\n***REMOVED******REMOVED***}\n}\n\nexport***REMOVED***{***REMOVED***useColumns***REMOVED***}\nexport***REMOVED***type***REMOVED***UseColumnsReturn***REMOVED***=***REMOVED***ReturnType<typeof***REMOVED***useColumns>\n"],"names":[],"mappings":"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"}