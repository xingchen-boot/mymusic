import***REMOVED***{***REMOVED***ref,***REMOVED***computed,***REMOVED***unref,***REMOVED***watch***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***isArray***REMOVED***}***REMOVED***from***REMOVED***'@vue/shared';

const***REMOVED***useData***REMOVED***=***REMOVED***(props,***REMOVED***{***REMOVED***expandedRowKeys,***REMOVED***lastRenderedRowIndex,***REMOVED***resetAfterIndex***REMOVED***})***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***depthMap***REMOVED***=***REMOVED***ref({});
***REMOVED******REMOVED***const***REMOVED***flattenedData***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***depths***REMOVED***=***REMOVED***{};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***data:***REMOVED***data2,***REMOVED***rowKey***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***_expandedRowKeys***REMOVED***=***REMOVED***unref(expandedRowKeys);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!_expandedRowKeys***REMOVED***||***REMOVED***!_expandedRowKeys.length)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***data2;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***array***REMOVED***=***REMOVED***[];
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***keysSet***REMOVED***=***REMOVED***/****REMOVED***@__PURE__***REMOVED****/***REMOVED***new***REMOVED***Set();
***REMOVED******REMOVED******REMOVED******REMOVED***_expandedRowKeys.forEach((x)***REMOVED***=>***REMOVED***keysSet.add(x));
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***copy***REMOVED***=***REMOVED***data2.slice();
***REMOVED******REMOVED******REMOVED******REMOVED***copy.forEach((x)***REMOVED***=>***REMOVED***depths[x[rowKey]]***REMOVED***=***REMOVED***0);
***REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***(copy.length***REMOVED***>***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***item***REMOVED***=***REMOVED***copy.shift();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***array.push(item);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(keysSet.has(item[rowKey])***REMOVED***&&***REMOVED***isArray(item.children)***REMOVED***&&***REMOVED***item.children.length***REMOVED***>***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***copy***REMOVED***=***REMOVED***[...item.children,***REMOVED***...copy];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***item.children.forEach((child)***REMOVED***=>***REMOVED***depths[child[rowKey]]***REMOVED***=***REMOVED***depths[item[rowKey]]***REMOVED***+***REMOVED***1);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***depthMap.value***REMOVED***=***REMOVED***depths;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***array;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***data***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***data:***REMOVED***data2,***REMOVED***expandColumnKey***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***expandColumnKey***REMOVED***?***REMOVED***unref(flattenedData)***REMOVED***:***REMOVED***data2;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***watch(data,***REMOVED***(val,***REMOVED***prev)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(val***REMOVED***!==***REMOVED***prev)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***lastRenderedRowIndex.value***REMOVED***=***REMOVED***-1;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***resetAfterIndex(0,***REMOVED***true);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***});
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***data,
***REMOVED******REMOVED******REMOVED******REMOVED***depthMap
***REMOVED******REMOVED***};
};

export***REMOVED***{***REMOVED***useData***REMOVED***};
//#***REMOVED***sourceMappingURL=use-data.mjs.map
