import***REMOVED***{***REMOVED***shallowRef,***REMOVED***ref,***REMOVED***computed,***REMOVED***nextTick***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***useFormItem***REMOVED***}***REMOVED***from***REMOVED***'../../../form/src/hooks/use-form-item.mjs';
import***REMOVED***{***REMOVED***UPDATE_MODEL_EVENT,***REMOVED***INPUT_EVENT,***REMOVED***CHANGE_EVENT***REMOVED***}***REMOVED***from***REMOVED***'../../../../constants/event.mjs';

const***REMOVED***useSlide***REMOVED***=***REMOVED***(props,***REMOVED***initData,***REMOVED***emit)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***form:***REMOVED***elForm,***REMOVED***formItem:***REMOVED***elFormItem***REMOVED***}***REMOVED***=***REMOVED***useFormItem();
***REMOVED******REMOVED***const***REMOVED***slider***REMOVED***=***REMOVED***shallowRef();
***REMOVED******REMOVED***const***REMOVED***firstButton***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***secondButton***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***buttonRefs***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***firstButton,
***REMOVED******REMOVED******REMOVED******REMOVED***secondButton
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***sliderDisabled***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.disabled***REMOVED***||***REMOVED***(elForm***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***elForm.disabled)***REMOVED***||***REMOVED***false;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***minValue***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***Math.min(initData.firstValue,***REMOVED***initData.secondValue);
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***maxValue***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***Math.max(initData.firstValue,***REMOVED***initData.secondValue);
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***barSize***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.range***REMOVED***?***REMOVED***`${100***REMOVED*******REMOVED***(maxValue.value***REMOVED***-***REMOVED***minValue.value)***REMOVED***/***REMOVED***(props.max***REMOVED***-***REMOVED***props.min)}%`***REMOVED***:***REMOVED***`${100***REMOVED*******REMOVED***(initData.firstValue***REMOVED***-***REMOVED***props.min)***REMOVED***/***REMOVED***(props.max***REMOVED***-***REMOVED***props.min)}%`;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***barStart***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.range***REMOVED***?***REMOVED***`${100***REMOVED*******REMOVED***(minValue.value***REMOVED***-***REMOVED***props.min)***REMOVED***/***REMOVED***(props.max***REMOVED***-***REMOVED***props.min)}%`***REMOVED***:***REMOVED***"0%";
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***runwayStyle***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.vertical***REMOVED***?***REMOVED***{***REMOVED***height:***REMOVED***props.height***REMOVED***}***REMOVED***:***REMOVED***{};
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***barStyle***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.vertical***REMOVED***?***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***height:***REMOVED***barSize.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***bottom:***REMOVED***barStart.value
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***width:***REMOVED***barSize.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***left:***REMOVED***barStart.value
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***resetSize***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(slider.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rect***REMOVED***=***REMOVED***slider.value.getBoundingClientRect();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***initData.sliderSize***REMOVED***=***REMOVED***rect[props.vertical***REMOVED***?***REMOVED***"height"***REMOVED***:***REMOVED***"width"];
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***getButtonRefByPercent***REMOVED***=***REMOVED***(percent)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***targetValue***REMOVED***=***REMOVED***props.min***REMOVED***+***REMOVED***percent***REMOVED*******REMOVED***(props.max***REMOVED***-***REMOVED***props.min)***REMOVED***/***REMOVED***100;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.range)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***firstButton;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***buttonRefName;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(Math.abs(minValue.value***REMOVED***-***REMOVED***targetValue)***REMOVED***<***REMOVED***Math.abs(maxValue.value***REMOVED***-***REMOVED***targetValue))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***buttonRefName***REMOVED***=***REMOVED***initData.firstValue***REMOVED***<***REMOVED***initData.secondValue***REMOVED***?***REMOVED***"firstButton"***REMOVED***:***REMOVED***"secondButton";
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***buttonRefName***REMOVED***=***REMOVED***initData.firstValue***REMOVED***>***REMOVED***initData.secondValue***REMOVED***?***REMOVED***"firstButton"***REMOVED***:***REMOVED***"secondButton";
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***buttonRefs[buttonRefName];
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***setPosition***REMOVED***=***REMOVED***(percent)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***buttonRef***REMOVED***=***REMOVED***getButtonRefByPercent(percent);
***REMOVED******REMOVED******REMOVED******REMOVED***buttonRef.value.setPosition(percent);
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***buttonRef;
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***setFirstValue***REMOVED***=***REMOVED***(firstValue)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***initData.firstValue***REMOVED***=***REMOVED***firstValue***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***firstValue***REMOVED***:***REMOVED***props.min;
***REMOVED******REMOVED******REMOVED******REMOVED***_emit(props.range***REMOVED***?***REMOVED***[minValue.value,***REMOVED***maxValue.value]***REMOVED***:***REMOVED***firstValue***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***firstValue***REMOVED***:***REMOVED***props.min);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***setSecondValue***REMOVED***=***REMOVED***(secondValue)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***initData.secondValue***REMOVED***=***REMOVED***secondValue;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.range)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***_emit([minValue.value,***REMOVED***maxValue.value]);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***_emit***REMOVED***=***REMOVED***(val)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***emit(UPDATE_MODEL_EVENT,***REMOVED***val);
***REMOVED******REMOVED******REMOVED******REMOVED***emit(INPUT_EVENT,***REMOVED***val);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***emitChange***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***nextTick();
***REMOVED******REMOVED******REMOVED******REMOVED***emit(CHANGE_EVENT,***REMOVED***props.range***REMOVED***?***REMOVED***[minValue.value,***REMOVED***maxValue.value]***REMOVED***:***REMOVED***props.modelValue);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handleSliderPointerEvent***REMOVED***=***REMOVED***(event)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b,***REMOVED***_c,***REMOVED***_d,***REMOVED***_e,***REMOVED***_f;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(sliderDisabled.value***REMOVED***||***REMOVED***initData.dragging)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***resetSize();
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***newPercent***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.vertical)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***clientY***REMOVED***=***REMOVED***(_c***REMOVED***=***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***event.touches)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.item(0))***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_b.clientY)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_c***REMOVED***:***REMOVED***event.clientY;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***sliderOffsetBottom***REMOVED***=***REMOVED***slider.value.getBoundingClientRect().bottom;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***newPercent***REMOVED***=***REMOVED***(sliderOffsetBottom***REMOVED***-***REMOVED***clientY)***REMOVED***/***REMOVED***initData.sliderSize***REMOVED*******REMOVED***100;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***clientX***REMOVED***=***REMOVED***(_f***REMOVED***=***REMOVED***(_e***REMOVED***=***REMOVED***(_d***REMOVED***=***REMOVED***event.touches)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_d.item(0))***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_e.clientX)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_f***REMOVED***:***REMOVED***event.clientX;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***sliderOffsetLeft***REMOVED***=***REMOVED***slider.value.getBoundingClientRect().left;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***newPercent***REMOVED***=***REMOVED***(clientX***REMOVED***-***REMOVED***sliderOffsetLeft)***REMOVED***/***REMOVED***initData.sliderSize***REMOVED*******REMOVED***100;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(newPercent***REMOVED***<***REMOVED***0***REMOVED***||***REMOVED***newPercent***REMOVED***>***REMOVED***100)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***setPosition(newPercent);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***onSliderWrapperPrevent***REMOVED***=***REMOVED***(event)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(((_a***REMOVED***=***REMOVED***buttonRefs["firstButton"].value)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.dragging)***REMOVED***||***REMOVED***((_b***REMOVED***=***REMOVED***buttonRefs["secondButton"].value)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_b.dragging))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***event.preventDefault();
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***onSliderDown***REMOVED***=***REMOVED***async***REMOVED***(event)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***buttonRef***REMOVED***=***REMOVED***handleSliderPointerEvent(event);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(buttonRef)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***nextTick();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***buttonRef.value.onButtonDown(event);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***onSliderClick***REMOVED***=***REMOVED***(event)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***buttonRef***REMOVED***=***REMOVED***handleSliderPointerEvent(event);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(buttonRef)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emitChange();
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***onSliderMarkerDown***REMOVED***=***REMOVED***(position)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(sliderDisabled.value***REMOVED***||***REMOVED***initData.dragging)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***buttonRef***REMOVED***=***REMOVED***setPosition(position);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(buttonRef)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emitChange();
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***elFormItem,
***REMOVED******REMOVED******REMOVED******REMOVED***slider,
***REMOVED******REMOVED******REMOVED******REMOVED***firstButton,
***REMOVED******REMOVED******REMOVED******REMOVED***secondButton,
***REMOVED******REMOVED******REMOVED******REMOVED***sliderDisabled,
***REMOVED******REMOVED******REMOVED******REMOVED***minValue,
***REMOVED******REMOVED******REMOVED******REMOVED***maxValue,
***REMOVED******REMOVED******REMOVED******REMOVED***runwayStyle,
***REMOVED******REMOVED******REMOVED******REMOVED***barStyle,
***REMOVED******REMOVED******REMOVED******REMOVED***resetSize,
***REMOVED******REMOVED******REMOVED******REMOVED***setPosition,
***REMOVED******REMOVED******REMOVED******REMOVED***emitChange,
***REMOVED******REMOVED******REMOVED******REMOVED***onSliderWrapperPrevent,
***REMOVED******REMOVED******REMOVED******REMOVED***onSliderClick,
***REMOVED******REMOVED******REMOVED******REMOVED***onSliderDown,
***REMOVED******REMOVED******REMOVED******REMOVED***onSliderMarkerDown,
***REMOVED******REMOVED******REMOVED******REMOVED***setFirstValue,
***REMOVED******REMOVED******REMOVED******REMOVED***setSecondValue
***REMOVED******REMOVED***};
};

export***REMOVED***{***REMOVED***useSlide***REMOVED***};
//#***REMOVED***sourceMappingURL=use-slide.mjs.map
