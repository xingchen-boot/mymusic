import***REMOVED***{***REMOVED***nextTick***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***throttle***REMOVED***}***REMOVED***from***REMOVED***'lodash-unified';
import***REMOVED***{***REMOVED***isFunction***REMOVED***}***REMOVED***from***REMOVED***'@vue/shared';
import***REMOVED***{***REMOVED***throwError***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/error.mjs';
import***REMOVED***{***REMOVED***getScrollContainer***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/dom/scroll.mjs';
import***REMOVED***{***REMOVED***getOffsetTopDistance***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/dom/position.mjs';

const***REMOVED***SCOPE***REMOVED***=***REMOVED***"ElInfiniteScroll";
const***REMOVED***CHECK_INTERVAL***REMOVED***=***REMOVED***50;
const***REMOVED***DEFAULT_DELAY***REMOVED***=***REMOVED***200;
const***REMOVED***DEFAULT_DISTANCE***REMOVED***=***REMOVED***0;
const***REMOVED***attributes***REMOVED***=***REMOVED***{
***REMOVED******REMOVED***delay:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***type:***REMOVED***Number,
***REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***DEFAULT_DELAY
***REMOVED******REMOVED***},
***REMOVED******REMOVED***distance:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***type:***REMOVED***Number,
***REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***DEFAULT_DISTANCE
***REMOVED******REMOVED***},
***REMOVED******REMOVED***disabled:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***type:***REMOVED***Boolean,
***REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***false
***REMOVED******REMOVED***},
***REMOVED******REMOVED***immediate:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***type:***REMOVED***Boolean,
***REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***true
***REMOVED******REMOVED***}
};
const***REMOVED***getScrollOptions***REMOVED***=***REMOVED***(el,***REMOVED***instance)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***return***REMOVED***Object.entries(attributes).reduce((acm,***REMOVED***[name,***REMOVED***option])***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***type,***REMOVED***default:***REMOVED***defaultValue***REMOVED***}***REMOVED***=***REMOVED***option;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***attrVal***REMOVED***=***REMOVED***el.getAttribute(`infinite-scroll-${name}`);
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***value***REMOVED***=***REMOVED***(_b***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***instance[attrVal])***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_a***REMOVED***:***REMOVED***attrVal)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_b***REMOVED***:***REMOVED***defaultValue;
***REMOVED******REMOVED******REMOVED******REMOVED***value***REMOVED***=***REMOVED***value***REMOVED***===***REMOVED***"false"***REMOVED***?***REMOVED***false***REMOVED***:***REMOVED***value;
***REMOVED******REMOVED******REMOVED******REMOVED***value***REMOVED***=***REMOVED***type(value);
***REMOVED******REMOVED******REMOVED******REMOVED***acm[name]***REMOVED***=***REMOVED***Number.isNaN(value)***REMOVED***?***REMOVED***defaultValue***REMOVED***:***REMOVED***value;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***acm;
***REMOVED******REMOVED***},***REMOVED***{});
};
const***REMOVED***destroyObserver***REMOVED***=***REMOVED***(el)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***observer***REMOVED***}***REMOVED***=***REMOVED***el[SCOPE];
***REMOVED******REMOVED***if***REMOVED***(observer)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***observer.disconnect();
***REMOVED******REMOVED******REMOVED******REMOVED***delete***REMOVED***el[SCOPE].observer;
***REMOVED******REMOVED***}
};
const***REMOVED***handleScroll***REMOVED***=***REMOVED***(el,***REMOVED***cb)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***container,***REMOVED***containerEl,***REMOVED***instance,***REMOVED***observer,***REMOVED***lastScrollTop***REMOVED***}***REMOVED***=***REMOVED***el[SCOPE];
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***disabled,***REMOVED***distance***REMOVED***}***REMOVED***=***REMOVED***getScrollOptions(el,***REMOVED***instance);
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***clientHeight,***REMOVED***scrollHeight,***REMOVED***scrollTop***REMOVED***}***REMOVED***=***REMOVED***containerEl;
***REMOVED******REMOVED***const***REMOVED***delta***REMOVED***=***REMOVED***scrollTop***REMOVED***-***REMOVED***lastScrollTop;
***REMOVED******REMOVED***el[SCOPE].lastScrollTop***REMOVED***=***REMOVED***scrollTop;
***REMOVED******REMOVED***if***REMOVED***(observer***REMOVED***||***REMOVED***disabled***REMOVED***||***REMOVED***delta***REMOVED***<***REMOVED***0)
***REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED***let***REMOVED***shouldTrigger***REMOVED***=***REMOVED***false;
***REMOVED******REMOVED***if***REMOVED***(container***REMOVED***===***REMOVED***el)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***shouldTrigger***REMOVED***=***REMOVED***scrollHeight***REMOVED***-***REMOVED***(clientHeight***REMOVED***+***REMOVED***scrollTop)***REMOVED***<=***REMOVED***distance;
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***clientTop,***REMOVED***scrollHeight:***REMOVED***height***REMOVED***}***REMOVED***=***REMOVED***el;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***offsetTop***REMOVED***=***REMOVED***getOffsetTopDistance(el,***REMOVED***containerEl);
***REMOVED******REMOVED******REMOVED******REMOVED***shouldTrigger***REMOVED***=***REMOVED***scrollTop***REMOVED***+***REMOVED***clientHeight***REMOVED***>=***REMOVED***offsetTop***REMOVED***+***REMOVED***clientTop***REMOVED***+***REMOVED***height***REMOVED***-***REMOVED***distance;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***if***REMOVED***(shouldTrigger)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***cb.call(instance);
***REMOVED******REMOVED***}
};
function***REMOVED***checkFull(el,***REMOVED***cb)***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***containerEl,***REMOVED***instance***REMOVED***}***REMOVED***=***REMOVED***el[SCOPE];
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***disabled***REMOVED***}***REMOVED***=***REMOVED***getScrollOptions(el,***REMOVED***instance);
***REMOVED******REMOVED***if***REMOVED***(disabled***REMOVED***||***REMOVED***containerEl.clientHeight***REMOVED***===***REMOVED***0)
***REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED***if***REMOVED***(containerEl.scrollHeight***REMOVED***<=***REMOVED***containerEl.clientHeight)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***cb.call(instance);
***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***destroyObserver(el);
***REMOVED******REMOVED***}
}
const***REMOVED***InfiniteScroll***REMOVED***=***REMOVED***{
***REMOVED******REMOVED***async***REMOVED***mounted(el,***REMOVED***binding)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***instance,***REMOVED***value:***REMOVED***cb***REMOVED***}***REMOVED***=***REMOVED***binding;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!isFunction(cb))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throwError(SCOPE,***REMOVED***"'v-infinite-scroll'***REMOVED***binding***REMOVED***value***REMOVED***must***REMOVED***be***REMOVED***a***REMOVED***function");
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***nextTick();
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***delay,***REMOVED***immediate***REMOVED***}***REMOVED***=***REMOVED***getScrollOptions(el,***REMOVED***instance);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***container***REMOVED***=***REMOVED***getScrollContainer(el,***REMOVED***true);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***containerEl***REMOVED***=***REMOVED***container***REMOVED***===***REMOVED***window***REMOVED***?***REMOVED***document.documentElement***REMOVED***:***REMOVED***container;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***onScroll***REMOVED***=***REMOVED***throttle(handleScroll.bind(null,***REMOVED***el,***REMOVED***cb),***REMOVED***delay);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!container)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***el[SCOPE]***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***instance,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***container,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***containerEl,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***delay,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cb,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onScroll,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***lastScrollTop:***REMOVED***containerEl.scrollTop
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(immediate)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***observer***REMOVED***=***REMOVED***new***REMOVED***MutationObserver(throttle(checkFull.bind(null,***REMOVED***el,***REMOVED***cb),***REMOVED***CHECK_INTERVAL));
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***el[SCOPE].observer***REMOVED***=***REMOVED***observer;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***observer.observe(el,***REMOVED***{***REMOVED***childList:***REMOVED***true,***REMOVED***subtree:***REMOVED***true***REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***checkFull(el,***REMOVED***cb);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***container.addEventListener("scroll",***REMOVED***onScroll);
***REMOVED******REMOVED***},
***REMOVED******REMOVED***unmounted(el)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!el[SCOPE])
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***container,***REMOVED***onScroll***REMOVED***}***REMOVED***=***REMOVED***el[SCOPE];
***REMOVED******REMOVED******REMOVED******REMOVED***container***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***container.removeEventListener("scroll",***REMOVED***onScroll);
***REMOVED******REMOVED******REMOVED******REMOVED***destroyObserver(el);
***REMOVED******REMOVED***},
***REMOVED******REMOVED***async***REMOVED***updated(el)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!el[SCOPE])***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***nextTick();
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***containerEl,***REMOVED***cb,***REMOVED***observer***REMOVED***}***REMOVED***=***REMOVED***el[SCOPE];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(containerEl.clientHeight***REMOVED***&&***REMOVED***observer)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***checkFull(el,***REMOVED***cb);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
};

export***REMOVED***{***REMOVED***CHECK_INTERVAL,***REMOVED***DEFAULT_DELAY,***REMOVED***DEFAULT_DISTANCE,***REMOVED***SCOPE,***REMOVED***InfiniteScroll***REMOVED***as***REMOVED***default***REMOVED***};
//#***REMOVED***sourceMappingURL=index.mjs.map
