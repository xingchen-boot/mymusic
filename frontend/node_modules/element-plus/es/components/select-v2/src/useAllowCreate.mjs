import***REMOVED***{***REMOVED***ref,***REMOVED***computed,***REMOVED***watch***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***useProps***REMOVED***}***REMOVED***from***REMOVED***'./useProps.mjs';

function***REMOVED***useAllowCreate(props,***REMOVED***states)***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***aliasProps,***REMOVED***getLabel,***REMOVED***getValue***REMOVED***}***REMOVED***=***REMOVED***useProps(props);
***REMOVED******REMOVED***const***REMOVED***createOptionCount***REMOVED***=***REMOVED***ref(0);
***REMOVED******REMOVED***const***REMOVED***cachedSelectedOption***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***enableAllowCreateMode***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.allowCreate***REMOVED***&&***REMOVED***props.filterable;
***REMOVED******REMOVED***});
***REMOVED******REMOVED***watch(()***REMOVED***=>***REMOVED***props.options,***REMOVED***(options)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***optionLabelsSet***REMOVED***=***REMOVED***new***REMOVED***Set(options.map((option)***REMOVED***=>***REMOVED***getLabel(option)));
***REMOVED******REMOVED******REMOVED******REMOVED***states.createdOptions***REMOVED***=***REMOVED***states.createdOptions.filter((createdOption)***REMOVED***=>***REMOVED***!optionLabelsSet.has(getLabel(createdOption)));
***REMOVED******REMOVED***});
***REMOVED******REMOVED***function***REMOVED***hasExistingOption(query)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***hasOption***REMOVED***=***REMOVED***(option)***REMOVED***=>***REMOVED***getLabel(option)***REMOVED***===***REMOVED***query;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.options***REMOVED***&&***REMOVED***props.options.some(hasOption)***REMOVED***||***REMOVED***states.createdOptions.some(hasOption);
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***selectNewOption(option)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!enableAllowCreateMode.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.multiple***REMOVED***&&***REMOVED***option.created)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***createOptionCount.value++;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cachedSelectedOption.value***REMOVED***=***REMOVED***option;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***createNewOption(query)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(enableAllowCreateMode.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(query***REMOVED***&&***REMOVED***query.length***REMOVED***>***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(hasExistingOption(query))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***states.createdOptions***REMOVED***=***REMOVED***states.createdOptions.filter((createdOption)***REMOVED***=>***REMOVED***getLabel(createdOption)***REMOVED***!==***REMOVED***states.previousQuery);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***newOption***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***[aliasProps.value.value]:***REMOVED***query,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***[aliasProps.value.label]:***REMOVED***query,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***created:***REMOVED***true,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***[aliasProps.value.disabled]:***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(states.createdOptions.length***REMOVED***>=***REMOVED***createOptionCount.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***states.createdOptions[createOptionCount.value]***REMOVED***=***REMOVED***newOption;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***states.createdOptions.push(newOption);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.multiple)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***states.createdOptions.length***REMOVED***=***REMOVED***createOptionCount.value;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***selectedOption***REMOVED***=***REMOVED***cachedSelectedOption.value;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***states.createdOptions.length***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(selectedOption***REMOVED***&&***REMOVED***selectedOption.created)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***states.createdOptions.push(selectedOption);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***removeNewOption(option)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!enableAllowCreateMode.value***REMOVED***||***REMOVED***!option***REMOVED***||***REMOVED***!option.created***REMOVED***||***REMOVED***option.created***REMOVED***&&***REMOVED***props.reserveKeyword***REMOVED***&&***REMOVED***states.inputValue***REMOVED***===***REMOVED***getLabel(option))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***idx***REMOVED***=***REMOVED***states.createdOptions.findIndex((it)***REMOVED***=>***REMOVED***getValue(it)***REMOVED***===***REMOVED***getValue(option));
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(~idx)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***states.createdOptions.splice(idx,***REMOVED***1);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***createOptionCount.value--;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***clearAllNewOption()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(enableAllowCreateMode.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***states.createdOptions.length***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***createOptionCount.value***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***createNewOption,
***REMOVED******REMOVED******REMOVED******REMOVED***removeNewOption,
***REMOVED******REMOVED******REMOVED******REMOVED***selectNewOption,
***REMOVED******REMOVED******REMOVED******REMOVED***clearAllNewOption
***REMOVED******REMOVED***};
}

export***REMOVED***{***REMOVED***useAllowCreate***REMOVED***};
//#***REMOVED***sourceMappingURL=useAllowCreate.mjs.map
