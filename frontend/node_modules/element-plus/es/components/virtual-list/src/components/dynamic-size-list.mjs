import***REMOVED***createList***REMOVED***from***REMOVED***'../builders/build-list.mjs';
import***REMOVED***{***REMOVED***isHorizontal***REMOVED***}***REMOVED***from***REMOVED***'../utils.mjs';
import***REMOVED***{***REMOVED***AUTO_ALIGNMENT,***REMOVED***CENTERED_ALIGNMENT,***REMOVED***END_ALIGNMENT,***REMOVED***START_ALIGNMENT,***REMOVED***DEFAULT_DYNAMIC_LIST_ITEM_SIZE,***REMOVED***SMART_ALIGNMENT***REMOVED***}***REMOVED***from***REMOVED***'../defaults.mjs';

const***REMOVED***getItemFromCache***REMOVED***=***REMOVED***(props,***REMOVED***index,***REMOVED***listCache)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***itemSize***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***items,***REMOVED***lastVisitedIndex***REMOVED***}***REMOVED***=***REMOVED***listCache;
***REMOVED******REMOVED***if***REMOVED***(index***REMOVED***>***REMOVED***lastVisitedIndex)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***offset***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(lastVisitedIndex***REMOVED***>=***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***item***REMOVED***=***REMOVED***items[lastVisitedIndex];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***offset***REMOVED***=***REMOVED***item.offset***REMOVED***+***REMOVED***item.size;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(let***REMOVED***i***REMOVED***=***REMOVED***lastVisitedIndex***REMOVED***+***REMOVED***1;***REMOVED***i***REMOVED***<=***REMOVED***index;***REMOVED***i++)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***size***REMOVED***=***REMOVED***itemSize(i);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***items[i]***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***offset,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***size
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***offset***REMOVED***+=***REMOVED***size;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***listCache.lastVisitedIndex***REMOVED***=***REMOVED***index;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***return***REMOVED***items[index];
};
const***REMOVED***findItem***REMOVED***=***REMOVED***(props,***REMOVED***listCache,***REMOVED***offset)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***items,***REMOVED***lastVisitedIndex***REMOVED***}***REMOVED***=***REMOVED***listCache;
***REMOVED******REMOVED***const***REMOVED***lastVisitedOffset***REMOVED***=***REMOVED***lastVisitedIndex***REMOVED***>***REMOVED***0***REMOVED***?***REMOVED***items[lastVisitedIndex].offset***REMOVED***:***REMOVED***0;
***REMOVED******REMOVED***if***REMOVED***(lastVisitedOffset***REMOVED***>=***REMOVED***offset)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***bs(props,***REMOVED***listCache,***REMOVED***0,***REMOVED***lastVisitedIndex,***REMOVED***offset);
***REMOVED******REMOVED***}
***REMOVED******REMOVED***return***REMOVED***es(props,***REMOVED***listCache,***REMOVED***Math.max(0,***REMOVED***lastVisitedIndex),***REMOVED***offset);
};
const***REMOVED***bs***REMOVED***=***REMOVED***(props,***REMOVED***listCache,***REMOVED***low,***REMOVED***high,***REMOVED***offset)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***while***REMOVED***(low***REMOVED***<=***REMOVED***high)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***mid***REMOVED***=***REMOVED***low***REMOVED***+***REMOVED***Math.floor((high***REMOVED***-***REMOVED***low)***REMOVED***/***REMOVED***2);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentOffset***REMOVED***=***REMOVED***getItemFromCache(props,***REMOVED***mid,***REMOVED***listCache).offset;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(currentOffset***REMOVED***===***REMOVED***offset)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***mid;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(currentOffset***REMOVED***<***REMOVED***offset)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***low***REMOVED***=***REMOVED***mid***REMOVED***+***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(currentOffset***REMOVED***>***REMOVED***offset)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***high***REMOVED***=***REMOVED***mid***REMOVED***-***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***return***REMOVED***Math.max(0,***REMOVED***low***REMOVED***-***REMOVED***1);
};
const***REMOVED***es***REMOVED***=***REMOVED***(props,***REMOVED***listCache,***REMOVED***index,***REMOVED***offset)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***total***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED***let***REMOVED***exponent***REMOVED***=***REMOVED***1;
***REMOVED******REMOVED***while***REMOVED***(index***REMOVED***<***REMOVED***total***REMOVED***&&***REMOVED***getItemFromCache(props,***REMOVED***index,***REMOVED***listCache).offset***REMOVED***<***REMOVED***offset)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***index***REMOVED***+=***REMOVED***exponent;
***REMOVED******REMOVED******REMOVED******REMOVED***exponent***REMOVED****=***REMOVED***2;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***return***REMOVED***bs(props,***REMOVED***listCache,***REMOVED***Math.floor(index***REMOVED***/***REMOVED***2),***REMOVED***Math.min(index,***REMOVED***total***REMOVED***-***REMOVED***1),***REMOVED***offset);
};
const***REMOVED***getEstimatedTotalSize***REMOVED***=***REMOVED***({***REMOVED***total***REMOVED***},***REMOVED***{***REMOVED***items,***REMOVED***estimatedItemSize,***REMOVED***lastVisitedIndex***REMOVED***})***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***let***REMOVED***totalSizeOfMeasuredItems***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED***if***REMOVED***(lastVisitedIndex***REMOVED***>=***REMOVED***total)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***lastVisitedIndex***REMOVED***=***REMOVED***total***REMOVED***-***REMOVED***1;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***if***REMOVED***(lastVisitedIndex***REMOVED***>=***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***item***REMOVED***=***REMOVED***items[lastVisitedIndex];
***REMOVED******REMOVED******REMOVED******REMOVED***totalSizeOfMeasuredItems***REMOVED***=***REMOVED***item.offset***REMOVED***+***REMOVED***item.size;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***const***REMOVED***numUnmeasuredItems***REMOVED***=***REMOVED***total***REMOVED***-***REMOVED***lastVisitedIndex***REMOVED***-***REMOVED***1;
***REMOVED******REMOVED***const***REMOVED***totalSizeOfUnmeasuredItems***REMOVED***=***REMOVED***numUnmeasuredItems***REMOVED*******REMOVED***estimatedItemSize;
***REMOVED******REMOVED***return***REMOVED***totalSizeOfMeasuredItems***REMOVED***+***REMOVED***totalSizeOfUnmeasuredItems;
};
const***REMOVED***DynamicSizeList***REMOVED***=***REMOVED***createList({
***REMOVED******REMOVED***name:***REMOVED***"ElDynamicSizeList",
***REMOVED******REMOVED***getItemOffset:***REMOVED***(props,***REMOVED***index,***REMOVED***listCache)***REMOVED***=>***REMOVED***getItemFromCache(props,***REMOVED***index,***REMOVED***listCache).offset,
***REMOVED******REMOVED***getItemSize:***REMOVED***(_,***REMOVED***index,***REMOVED***{***REMOVED***items***REMOVED***})***REMOVED***=>***REMOVED***items[index].size,
***REMOVED******REMOVED***getEstimatedTotalSize,
***REMOVED******REMOVED***getOffset:***REMOVED***(props,***REMOVED***index,***REMOVED***alignment,***REMOVED***scrollOffset,***REMOVED***listCache)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***height,***REMOVED***layout,***REMOVED***width***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***size***REMOVED***=***REMOVED***isHorizontal(layout)***REMOVED***?***REMOVED***width***REMOVED***:***REMOVED***height;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***item***REMOVED***=***REMOVED***getItemFromCache(props,***REMOVED***index,***REMOVED***listCache);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***estimatedTotalSize***REMOVED***=***REMOVED***getEstimatedTotalSize(props,***REMOVED***listCache);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***maxOffset***REMOVED***=***REMOVED***Math.max(0,***REMOVED***Math.min(estimatedTotalSize***REMOVED***-***REMOVED***size,***REMOVED***item.offset));
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***minOffset***REMOVED***=***REMOVED***Math.max(0,***REMOVED***item.offset***REMOVED***-***REMOVED***size***REMOVED***+***REMOVED***item.size);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(alignment***REMOVED***===***REMOVED***SMART_ALIGNMENT)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(scrollOffset***REMOVED***>=***REMOVED***minOffset***REMOVED***-***REMOVED***size***REMOVED***&&***REMOVED***scrollOffset***REMOVED***<=***REMOVED***maxOffset***REMOVED***+***REMOVED***size)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***alignment***REMOVED***=***REMOVED***AUTO_ALIGNMENT;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***alignment***REMOVED***=***REMOVED***CENTERED_ALIGNMENT;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***switch***REMOVED***(alignment)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***START_ALIGNMENT:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***maxOffset;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***END_ALIGNMENT:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***minOffset;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***CENTERED_ALIGNMENT:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***Math.round(minOffset***REMOVED***+***REMOVED***(maxOffset***REMOVED***-***REMOVED***minOffset)***REMOVED***/***REMOVED***2);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***AUTO_ALIGNMENT:
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(scrollOffset***REMOVED***>=***REMOVED***minOffset***REMOVED***&&***REMOVED***scrollOffset***REMOVED***<=***REMOVED***maxOffset)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***scrollOffset;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(scrollOffset***REMOVED***<***REMOVED***minOffset)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***minOffset;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***maxOffset;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***},
***REMOVED******REMOVED***getStartIndexForOffset:***REMOVED***(props,***REMOVED***offset,***REMOVED***listCache)***REMOVED***=>***REMOVED***findItem(props,***REMOVED***listCache,***REMOVED***offset),
***REMOVED******REMOVED***getStopIndexForStartIndex:***REMOVED***(props,***REMOVED***startIndex,***REMOVED***scrollOffset,***REMOVED***listCache)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***height,***REMOVED***total,***REMOVED***layout,***REMOVED***width***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***size***REMOVED***=***REMOVED***isHorizontal(layout)***REMOVED***?***REMOVED***width***REMOVED***:***REMOVED***height;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***item***REMOVED***=***REMOVED***getItemFromCache(props,***REMOVED***startIndex,***REMOVED***listCache);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***maxOffset***REMOVED***=***REMOVED***scrollOffset***REMOVED***+***REMOVED***size;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***offset***REMOVED***=***REMOVED***item.offset***REMOVED***+***REMOVED***item.size;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***stopIndex***REMOVED***=***REMOVED***startIndex;
***REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***(stopIndex***REMOVED***<***REMOVED***total***REMOVED***-***REMOVED***1***REMOVED***&&***REMOVED***offset***REMOVED***<***REMOVED***maxOffset)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***stopIndex++;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***offset***REMOVED***+=***REMOVED***getItemFromCache(props,***REMOVED***stopIndex,***REMOVED***listCache).size;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***stopIndex;
***REMOVED******REMOVED***},
***REMOVED******REMOVED***initCache({***REMOVED***estimatedItemSize***REMOVED***=***REMOVED***DEFAULT_DYNAMIC_LIST_ITEM_SIZE***REMOVED***},***REMOVED***instance)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cache***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***items:***REMOVED***{},
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***estimatedItemSize,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***lastVisitedIndex:***REMOVED***-1
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***cache.clearCacheAfterIndex***REMOVED***=***REMOVED***(index,***REMOVED***forceUpdate***REMOVED***=***REMOVED***true)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cache.lastVisitedIndex***REMOVED***=***REMOVED***Math.min(cache.lastVisitedIndex,***REMOVED***index***REMOVED***-***REMOVED***1);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(_a***REMOVED***=***REMOVED***instance.exposed)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.getItemStyleCache(-1);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(forceUpdate)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(_b***REMOVED***=***REMOVED***instance.proxy)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_b.$forceUpdate();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***cache;
***REMOVED******REMOVED***},
***REMOVED******REMOVED***clearCache:***REMOVED***false,
***REMOVED******REMOVED***validateProps:***REMOVED***({***REMOVED***itemSize***REMOVED***})***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***}
});

export***REMOVED***{***REMOVED***DynamicSizeList***REMOVED***as***REMOVED***default***REMOVED***};
//#***REMOVED***sourceMappingURL=dynamic-size-list.mjs.map
