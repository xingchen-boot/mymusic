{"version":3,"file":"utils.mjs","sources":["../../../../../../packages/components/form/src/utils.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***computed,***REMOVED***ref***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{***REMOVED***debugWarn,***REMOVED***ensureArray,***REMOVED***isArray***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***Arrayable***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\nimport***REMOVED***type***REMOVED***{***REMOVED***FormItemContext***REMOVED***}***REMOVED***from***REMOVED***'./types'\nimport***REMOVED***type***REMOVED***{***REMOVED***FormItemProp***REMOVED***}***REMOVED***from***REMOVED***'./form-item'\n\nconst***REMOVED***SCOPE***REMOVED***=***REMOVED***'ElForm'\n\nexport***REMOVED***function***REMOVED***useFormLabelWidth()***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***potentialLabelWidthArr***REMOVED***=***REMOVED***ref<number[]>([])\n\n***REMOVED******REMOVED***const***REMOVED***autoLabelWidth***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!potentialLabelWidthArr.value.length)***REMOVED***return***REMOVED***'0'\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***max***REMOVED***=***REMOVED***Math.max(...potentialLabelWidthArr.value)\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***max***REMOVED***?***REMOVED***`${max}px`***REMOVED***:***REMOVED***''\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***function***REMOVED***getLabelWidthIndex(width:***REMOVED***number)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***index***REMOVED***=***REMOVED***potentialLabelWidthArr.value.indexOf(width)\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(index***REMOVED***===***REMOVED***-1***REMOVED***&&***REMOVED***autoLabelWidth.value***REMOVED***===***REMOVED***'0')***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***debugWarn(SCOPE,***REMOVED***`unexpected***REMOVED***width***REMOVED***${width}`)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***index\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***registerLabelWidth(val:***REMOVED***number,***REMOVED***oldVal:***REMOVED***number)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(val***REMOVED***&&***REMOVED***oldVal)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***index***REMOVED***=***REMOVED***getLabelWidthIndex(oldVal)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***potentialLabelWidthArr.value.splice(index,***REMOVED***1,***REMOVED***val)\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(val)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***potentialLabelWidthArr.value.push(val)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***function***REMOVED***deregisterLabelWidth(val:***REMOVED***number)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***index***REMOVED***=***REMOVED***getLabelWidthIndex(val)\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(index***REMOVED***>***REMOVED***-1)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***potentialLabelWidthArr.value.splice(index,***REMOVED***1)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***autoLabelWidth,\n***REMOVED******REMOVED******REMOVED******REMOVED***registerLabelWidth,\n***REMOVED******REMOVED******REMOVED******REMOVED***deregisterLabelWidth,\n***REMOVED******REMOVED***}\n}\n\nexport***REMOVED***const***REMOVED***filterFields***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***fields:***REMOVED***FormItemContext[],\n***REMOVED******REMOVED***props:***REMOVED***Arrayable<FormItemProp>\n)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***normalized***REMOVED***=***REMOVED***ensureArray(props).map((prop)***REMOVED***=>\n***REMOVED******REMOVED******REMOVED******REMOVED***isArray(prop)***REMOVED***?***REMOVED***prop.join('.')***REMOVED***:***REMOVED***prop\n***REMOVED******REMOVED***)\n***REMOVED******REMOVED***return***REMOVED***normalized.length***REMOVED***>***REMOVED***0\n***REMOVED******REMOVED******REMOVED******REMOVED***?***REMOVED***fields.filter(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(field)***REMOVED***=>***REMOVED***field.propString***REMOVED***&&***REMOVED***normalized.includes(field.propString)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***fields\n}\n"],"names":["ensureArray"],"mappings":";;;;AAGO,SAAS,iBAAiB,GAAG;AACpC,EAAE,MAAM,sBAAsB,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC;AACzC,EAAE,MAAM,cAAc,GAAG,QAAQ,CAAC,MAAM;AACxC,IAAI,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,MAAM;AAC5C,MAAM,OAAO,GAAG,CAAC;AACjB,IAAI,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,sBAAsB,CAAC,KAAK,CAAC,CAAC;AAC1D,IAAI,OAAO,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;AACjC,GAAG,CAAC,CAAC;AACL,EAAE,SAAS,kBAAkB,CAAC,KAAK,EAAE;AACrC,IAAI,MAAM,KAAK,GAAG,sBAAsB,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAC9D,IAAI,IAAI,KAAK,KAAK,CAAC,CAAC,IAAI,cAAc,CAAC,KAAK,KAAK,GAAG,EAAE,CAEjD;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,GAAG;AACH,EAAE,SAAS,kBAAkB,CAAC,GAAG,EAAE,MAAM,EAAE;AAC3C,IAAI,IAAI,GAAG,IAAI,MAAM,EAAE;AACvB,MAAM,MAAM,KAAK,GAAG,kBAAkB,CAAC,MAAM,CAAC,CAAC;AAC/C,MAAM,sBAAsB,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;AACzD,KAAK,MAAM,IAAI,GAAG,EAAE;AACpB,MAAM,sBAAsB,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC7C,KAAK;AACL,GAAG;AACH,EAAE,SAAS,oBAAoB,CAAC,GAAG,EAAE;AACrC,IAAI,MAAM,KAAK,GAAG,kBAAkB,CAAC,GAAG,CAAC,CAAC;AAC1C,IAAI,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;AACpB,MAAM,sBAAsB,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AACpD,KAAK;AACL,GAAG;AACH,EAAE,OAAO;AACT,IAAI,cAAc;AAClB,IAAI,kBAAkB;AACtB,IAAI,oBAAoB;AACxB,GAAG,CAAC;AACJ,CAAC;AACW,MAAC,YAAY,GAAG,CAAC,MAAM,EAAE,KAAK,KAAK;AAC/C,EAAE,MAAM,UAAU,GAAGA,SAAW,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC;AAC7F,EAAE,OAAO,UAAU,CAAC,MAAM,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,UAAU,IAAI,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,GAAG,MAAM,CAAC;AAC9H;;;;"}