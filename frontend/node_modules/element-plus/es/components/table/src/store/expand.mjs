import***REMOVED***{***REMOVED***getCurrentInstance,***REMOVED***ref***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***getKeysMap,***REMOVED***getRowIdentity,***REMOVED***toggleRowStatus***REMOVED***}***REMOVED***from***REMOVED***'../util.mjs';

function***REMOVED***useExpand(watcherData)***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***instance***REMOVED***=***REMOVED***getCurrentInstance();
***REMOVED******REMOVED***const***REMOVED***defaultExpandAll***REMOVED***=***REMOVED***ref(false);
***REMOVED******REMOVED***const***REMOVED***expandRows***REMOVED***=***REMOVED***ref([]);
***REMOVED******REMOVED***const***REMOVED***updateExpandRows***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***data***REMOVED***=***REMOVED***watcherData.data.value***REMOVED***||***REMOVED***[];
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rowKey***REMOVED***=***REMOVED***watcherData.rowKey.value;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(defaultExpandAll.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***expandRows.value***REMOVED***=***REMOVED***data.slice();
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(rowKey)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***expandRowsMap***REMOVED***=***REMOVED***getKeysMap(expandRows.value,***REMOVED***rowKey);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***expandRows.value***REMOVED***=***REMOVED***data.reduce((prev,***REMOVED***row)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rowId***REMOVED***=***REMOVED***getRowIdentity(row,***REMOVED***rowKey);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rowInfo***REMOVED***=***REMOVED***expandRowsMap[rowId];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(rowInfo)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prev.push(row);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***prev;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},***REMOVED***[]);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***expandRows.value***REMOVED***=***REMOVED***[];
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***toggleRowExpansion***REMOVED***=***REMOVED***(row,***REMOVED***expanded)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***changed***REMOVED***=***REMOVED***toggleRowStatus(expandRows.value,***REMOVED***row,***REMOVED***expanded,***REMOVED***void***REMOVED***0,***REMOVED***void***REMOVED***0,***REMOVED***void***REMOVED***0,***REMOVED***watcherData.rowKey.value);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(changed)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***instance.emit("expand-change",***REMOVED***row,***REMOVED***expandRows.value.slice());
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***setExpandRowKeys***REMOVED***=***REMOVED***(rowKeys)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***instance.store.assertRowKey();
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***data***REMOVED***=***REMOVED***watcherData.data.value***REMOVED***||***REMOVED***[];
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rowKey***REMOVED***=***REMOVED***watcherData.rowKey.value;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***keysMap***REMOVED***=***REMOVED***getKeysMap(data,***REMOVED***rowKey);
***REMOVED******REMOVED******REMOVED******REMOVED***expandRows.value***REMOVED***=***REMOVED***rowKeys.reduce((prev,***REMOVED***cur)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***info***REMOVED***=***REMOVED***keysMap[cur];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(info)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***prev.push(info.row);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***prev;
***REMOVED******REMOVED******REMOVED******REMOVED***},***REMOVED***[]);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***isRowExpanded***REMOVED***=***REMOVED***(row)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rowKey***REMOVED***=***REMOVED***watcherData.rowKey.value;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(rowKey)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***expandMap***REMOVED***=***REMOVED***getKeysMap(expandRows.value,***REMOVED***rowKey);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***!!expandMap[getRowIdentity(row,***REMOVED***rowKey)];
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***expandRows.value.includes(row);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***updateExpandRows,
***REMOVED******REMOVED******REMOVED******REMOVED***toggleRowExpansion,
***REMOVED******REMOVED******REMOVED******REMOVED***setExpandRowKeys,
***REMOVED******REMOVED******REMOVED******REMOVED***isRowExpanded,
***REMOVED******REMOVED******REMOVED******REMOVED***states:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***expandRows,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***defaultExpandAll
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
}

export***REMOVED***{***REMOVED***useExpand***REMOVED***as***REMOVED***default***REMOVED***};
//#***REMOVED***sourceMappingURL=expand.mjs.map
