import***REMOVED***{***REMOVED***getCurrentInstance,***REMOVED***ref,***REMOVED***unref***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***isNull***REMOVED***}***REMOVED***from***REMOVED***'lodash-unified';
import***REMOVED***{***REMOVED***getRowIdentity***REMOVED***}***REMOVED***from***REMOVED***'../util.mjs';

function***REMOVED***useCurrent(watcherData)***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***instance***REMOVED***=***REMOVED***getCurrentInstance();
***REMOVED******REMOVED***const***REMOVED***_currentRowKey***REMOVED***=***REMOVED***ref(null);
***REMOVED******REMOVED***const***REMOVED***currentRow***REMOVED***=***REMOVED***ref(null);
***REMOVED******REMOVED***const***REMOVED***setCurrentRowKey***REMOVED***=***REMOVED***(key)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***instance.store.assertRowKey();
***REMOVED******REMOVED******REMOVED******REMOVED***_currentRowKey.value***REMOVED***=***REMOVED***key;
***REMOVED******REMOVED******REMOVED******REMOVED***setCurrentRowByKey(key);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***restoreCurrentRowKey***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***_currentRowKey.value***REMOVED***=***REMOVED***null;
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***setCurrentRowByKey***REMOVED***=***REMOVED***(key)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***data,***REMOVED***rowKey***REMOVED***}***REMOVED***=***REMOVED***watcherData;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***_currentRow***REMOVED***=***REMOVED***null;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(rowKey.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***_currentRow***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***(unref(data)***REMOVED***||***REMOVED***[]).find((item)***REMOVED***=>***REMOVED***getRowIdentity(item,***REMOVED***rowKey.value)***REMOVED***===***REMOVED***key))***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_a***REMOVED***:***REMOVED***null;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***currentRow.value***REMOVED***=***REMOVED***_currentRow***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_currentRow***REMOVED***:***REMOVED***null;
***REMOVED******REMOVED******REMOVED******REMOVED***instance.emit("current-change",***REMOVED***currentRow.value,***REMOVED***null);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***updateCurrentRow***REMOVED***=***REMOVED***(_currentRow)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***oldCurrentRow***REMOVED***=***REMOVED***currentRow.value;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(_currentRow***REMOVED***&&***REMOVED***_currentRow***REMOVED***!==***REMOVED***oldCurrentRow)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***currentRow.value***REMOVED***=***REMOVED***_currentRow;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***instance.emit("current-change",***REMOVED***currentRow.value,***REMOVED***oldCurrentRow);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!_currentRow***REMOVED***&&***REMOVED***oldCurrentRow)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***currentRow.value***REMOVED***=***REMOVED***null;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***instance.emit("current-change",***REMOVED***null,***REMOVED***oldCurrentRow);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***updateCurrentRowData***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rowKey***REMOVED***=***REMOVED***watcherData.rowKey.value;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***data***REMOVED***=***REMOVED***watcherData.data.value***REMOVED***||***REMOVED***[];
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***oldCurrentRow***REMOVED***=***REMOVED***currentRow.value;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(oldCurrentRow***REMOVED***&&***REMOVED***!data.includes(oldCurrentRow))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(rowKey)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentRowKey***REMOVED***=***REMOVED***getRowIdentity(oldCurrentRow,***REMOVED***rowKey);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***setCurrentRowByKey(currentRowKey);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***currentRow.value***REMOVED***=***REMOVED***null;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isNull(currentRow.value))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***instance.emit("current-change",***REMOVED***null,***REMOVED***oldCurrentRow);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(_currentRowKey.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***setCurrentRowByKey(_currentRowKey.value);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***restoreCurrentRowKey();
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***setCurrentRowKey,
***REMOVED******REMOVED******REMOVED******REMOVED***restoreCurrentRowKey,
***REMOVED******REMOVED******REMOVED******REMOVED***setCurrentRowByKey,
***REMOVED******REMOVED******REMOVED******REMOVED***updateCurrentRow,
***REMOVED******REMOVED******REMOVED******REMOVED***updateCurrentRowData,
***REMOVED******REMOVED******REMOVED******REMOVED***states:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***_currentRowKey,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***currentRow
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
}

export***REMOVED***{***REMOVED***useCurrent***REMOVED***as***REMOVED***default***REMOVED***};
//#***REMOVED***sourceMappingURL=current.mjs.map
