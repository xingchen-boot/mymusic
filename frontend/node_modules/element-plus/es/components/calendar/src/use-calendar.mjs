import***REMOVED***{***REMOVED***ref,***REMOVED***computed***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***dayjs***REMOVED***from***REMOVED***'dayjs';
import***REMOVED***{***REMOVED***useLocale***REMOVED***}***REMOVED***from***REMOVED***'../../../hooks/use-locale/index.mjs';
import***REMOVED***{***REMOVED***INPUT_EVENT,***REMOVED***UPDATE_MODEL_EVENT***REMOVED***}***REMOVED***from***REMOVED***'../../../constants/event.mjs';
import***REMOVED***{***REMOVED***isArray,***REMOVED***isDate***REMOVED***}***REMOVED***from***REMOVED***'@vue/shared';

const***REMOVED***adjacentMonth***REMOVED***=***REMOVED***(start,***REMOVED***end)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***firstMonthLastDay***REMOVED***=***REMOVED***start.endOf("month");
***REMOVED******REMOVED***const***REMOVED***lastMonthFirstDay***REMOVED***=***REMOVED***end.startOf("month");
***REMOVED******REMOVED***const***REMOVED***isSameWeek***REMOVED***=***REMOVED***firstMonthLastDay.isSame(lastMonthFirstDay,***REMOVED***"week");
***REMOVED******REMOVED***const***REMOVED***lastMonthStartDay***REMOVED***=***REMOVED***isSameWeek***REMOVED***?***REMOVED***lastMonthFirstDay.add(1,***REMOVED***"week")***REMOVED***:***REMOVED***lastMonthFirstDay;
***REMOVED******REMOVED***return***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED***[start,***REMOVED***firstMonthLastDay],
***REMOVED******REMOVED******REMOVED******REMOVED***[lastMonthStartDay.startOf("week"),***REMOVED***end]
***REMOVED******REMOVED***];
};
const***REMOVED***threeConsecutiveMonth***REMOVED***=***REMOVED***(start,***REMOVED***end)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***firstMonthLastDay***REMOVED***=***REMOVED***start.endOf("month");
***REMOVED******REMOVED***const***REMOVED***secondMonthFirstDay***REMOVED***=***REMOVED***start.add(1,***REMOVED***"month").startOf("month");
***REMOVED******REMOVED***const***REMOVED***secondMonthStartDay***REMOVED***=***REMOVED***firstMonthLastDay.isSame(secondMonthFirstDay,***REMOVED***"week")***REMOVED***?***REMOVED***secondMonthFirstDay.add(1,***REMOVED***"week")***REMOVED***:***REMOVED***secondMonthFirstDay;
***REMOVED******REMOVED***const***REMOVED***secondMonthLastDay***REMOVED***=***REMOVED***secondMonthStartDay.endOf("month");
***REMOVED******REMOVED***const***REMOVED***lastMonthFirstDay***REMOVED***=***REMOVED***end.startOf("month");
***REMOVED******REMOVED***const***REMOVED***lastMonthStartDay***REMOVED***=***REMOVED***secondMonthLastDay.isSame(lastMonthFirstDay,***REMOVED***"week")***REMOVED***?***REMOVED***lastMonthFirstDay.add(1,***REMOVED***"week")***REMOVED***:***REMOVED***lastMonthFirstDay;
***REMOVED******REMOVED***return***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED***[start,***REMOVED***firstMonthLastDay],
***REMOVED******REMOVED******REMOVED******REMOVED***[secondMonthStartDay.startOf("week"),***REMOVED***secondMonthLastDay],
***REMOVED******REMOVED******REMOVED******REMOVED***[lastMonthStartDay.startOf("week"),***REMOVED***end]
***REMOVED******REMOVED***];
};
const***REMOVED***useCalendar***REMOVED***=***REMOVED***(props,***REMOVED***emit,***REMOVED***componentName)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***lang***REMOVED***}***REMOVED***=***REMOVED***useLocale();
***REMOVED******REMOVED***const***REMOVED***selectedDay***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***now***REMOVED***=***REMOVED***dayjs().locale(lang.value);
***REMOVED******REMOVED***const***REMOVED***realSelectedDay***REMOVED***=***REMOVED***computed({
***REMOVED******REMOVED******REMOVED******REMOVED***get()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.modelValue)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***selectedDay.value;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***date.value;
***REMOVED******REMOVED******REMOVED******REMOVED***},
***REMOVED******REMOVED******REMOVED******REMOVED***set(val)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!val)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***selectedDay.value***REMOVED***=***REMOVED***val;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***val.toDate();
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(INPUT_EVENT,***REMOVED***result);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emit(UPDATE_MODEL_EVENT,***REMOVED***result);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***validatedRange***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.range***REMOVED***||***REMOVED***!isArray(props.range)***REMOVED***||***REMOVED***props.range.length***REMOVED***!==***REMOVED***2***REMOVED***||***REMOVED***props.range.some((item)***REMOVED***=>***REMOVED***!isDate(item)))
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[];
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rangeArrDayjs***REMOVED***=***REMOVED***props.range.map((_)***REMOVED***=>***REMOVED***dayjs(_).locale(lang.value));
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***[startDayjs,***REMOVED***endDayjs]***REMOVED***=***REMOVED***rangeArrDayjs;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(startDayjs.isAfter(endDayjs))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[];
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(startDayjs.isSame(endDayjs,***REMOVED***"month"))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***calculateValidatedDateRange(startDayjs,***REMOVED***endDayjs);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(startDayjs.add(1,***REMOVED***"month").month()***REMOVED***!==***REMOVED***endDayjs.month())***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***calculateValidatedDateRange(startDayjs,***REMOVED***endDayjs);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***date***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!props.modelValue)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***realSelectedDay.value***REMOVED***||***REMOVED***(validatedRange.value.length***REMOVED***?***REMOVED***validatedRange.value[0][0]***REMOVED***:***REMOVED***now);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***dayjs(props.modelValue).locale(lang.value);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***});
***REMOVED******REMOVED***const***REMOVED***prevMonthDayjs***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***date.value.subtract(1,***REMOVED***"month").date(1));
***REMOVED******REMOVED***const***REMOVED***nextMonthDayjs***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***date.value.add(1,***REMOVED***"month").date(1));
***REMOVED******REMOVED***const***REMOVED***prevYearDayjs***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***date.value.subtract(1,***REMOVED***"year").date(1));
***REMOVED******REMOVED***const***REMOVED***nextYearDayjs***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***date.value.add(1,***REMOVED***"year").date(1));
***REMOVED******REMOVED***const***REMOVED***calculateValidatedDateRange***REMOVED***=***REMOVED***(startDayjs,***REMOVED***endDayjs)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***firstDay***REMOVED***=***REMOVED***startDayjs.startOf("week");
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***lastDay***REMOVED***=***REMOVED***endDayjs.endOf("week");
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***firstMonth***REMOVED***=***REMOVED***firstDay.get("month");
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***lastMonth***REMOVED***=***REMOVED***lastDay.get("month");
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(firstMonth***REMOVED***===***REMOVED***lastMonth)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[[firstDay,***REMOVED***lastDay]];
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***((firstMonth***REMOVED***+***REMOVED***1)***REMOVED***%***REMOVED***12***REMOVED***===***REMOVED***lastMonth)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***adjacentMonth(firstDay,***REMOVED***lastDay);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(firstMonth***REMOVED***+***REMOVED***2***REMOVED***===***REMOVED***lastMonth***REMOVED***||***REMOVED***(firstMonth***REMOVED***+***REMOVED***1)***REMOVED***%***REMOVED***11***REMOVED***===***REMOVED***lastMonth)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***threeConsecutiveMonth(firstDay,***REMOVED***lastDay);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***[];
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***pickDay***REMOVED***=***REMOVED***(day)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***realSelectedDay.value***REMOVED***=***REMOVED***day;
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***selectDate***REMOVED***=***REMOVED***(type)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***dateMap***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***"prev-month":***REMOVED***prevMonthDayjs.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***"next-month":***REMOVED***nextMonthDayjs.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***"prev-year":***REMOVED***prevYearDayjs.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***"next-year":***REMOVED***nextYearDayjs.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***today:***REMOVED***now
***REMOVED******REMOVED******REMOVED******REMOVED***};
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***day***REMOVED***=***REMOVED***dateMap[type];
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!day.isSame(date.value,***REMOVED***"day"))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***pickDay(day);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***calculateValidatedDateRange,
***REMOVED******REMOVED******REMOVED******REMOVED***date,
***REMOVED******REMOVED******REMOVED******REMOVED***realSelectedDay,
***REMOVED******REMOVED******REMOVED******REMOVED***pickDay,
***REMOVED******REMOVED******REMOVED******REMOVED***selectDate,
***REMOVED******REMOVED******REMOVED******REMOVED***validatedRange
***REMOVED******REMOVED***};
};

export***REMOVED***{***REMOVED***useCalendar***REMOVED***};
//#***REMOVED***sourceMappingURL=use-calendar.mjs.map
