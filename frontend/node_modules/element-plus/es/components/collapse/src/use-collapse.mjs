import***REMOVED***{***REMOVED***ref,***REMOVED***watch,***REMOVED***provide,***REMOVED***computed***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***collapseContextKey***REMOVED***}***REMOVED***from***REMOVED***'./constants.mjs';
import***REMOVED***{***REMOVED***castArray***REMOVED***}***REMOVED***from***REMOVED***'lodash-unified';
import***REMOVED***{***REMOVED***UPDATE_MODEL_EVENT,***REMOVED***CHANGE_EVENT***REMOVED***}***REMOVED***from***REMOVED***'../../../constants/event.mjs';
import***REMOVED***{***REMOVED***useNamespace***REMOVED***}***REMOVED***from***REMOVED***'../../../hooks/use-namespace/index.mjs';
import***REMOVED***{***REMOVED***isPromise***REMOVED***}***REMOVED***from***REMOVED***'@vue/shared';
import***REMOVED***{***REMOVED***isBoolean***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/types.mjs';
import***REMOVED***{***REMOVED***throwError***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/error.mjs';

const***REMOVED***SCOPE***REMOVED***=***REMOVED***"ElCollapse";
const***REMOVED***useCollapse***REMOVED***=***REMOVED***(props,***REMOVED***emit)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***activeNames***REMOVED***=***REMOVED***ref(castArray(props.modelValue));
***REMOVED******REMOVED***const***REMOVED***setActiveNames***REMOVED***=***REMOVED***(_activeNames)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***activeNames.value***REMOVED***=***REMOVED***_activeNames;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***value***REMOVED***=***REMOVED***props.accordion***REMOVED***?***REMOVED***activeNames.value[0]***REMOVED***:***REMOVED***activeNames.value;
***REMOVED******REMOVED******REMOVED******REMOVED***emit(UPDATE_MODEL_EVENT,***REMOVED***value);
***REMOVED******REMOVED******REMOVED******REMOVED***emit(CHANGE_EVENT,***REMOVED***value);
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handleChange***REMOVED***=***REMOVED***(name)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.accordion)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***setActiveNames([activeNames.value[0]***REMOVED***===***REMOVED***name***REMOVED***?***REMOVED***""***REMOVED***:***REMOVED***name]);
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***_activeNames***REMOVED***=***REMOVED***[...activeNames.value];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***index***REMOVED***=***REMOVED***_activeNames.indexOf(name);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(index***REMOVED***>***REMOVED***-1)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***_activeNames.splice(index,***REMOVED***1);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***_activeNames.push(name);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***setActiveNames(_activeNames);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***const***REMOVED***handleItemClick***REMOVED***=***REMOVED***async***REMOVED***(name)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***beforeCollapse***REMOVED***}***REMOVED***=***REMOVED***props;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!beforeCollapse)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleChange(name);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***shouldChange***REMOVED***=***REMOVED***beforeCollapse(name);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isPromiseOrBool***REMOVED***=***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPromise(shouldChange),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isBoolean(shouldChange)
***REMOVED******REMOVED******REMOVED******REMOVED***].includes(true);
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!isPromiseOrBool)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throwError(SCOPE,***REMOVED***"beforeCollapse***REMOVED***must***REMOVED***return***REMOVED***type***REMOVED***`Promise<boolean>`***REMOVED***or***REMOVED***`boolean`");
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isPromise(shouldChange))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***shouldChange.then((result)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(result***REMOVED***!==***REMOVED***false)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleChange(name);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}).catch((e)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***});
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(shouldChange)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleChange(name);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***watch(()***REMOVED***=>***REMOVED***props.modelValue,***REMOVED***()***REMOVED***=>***REMOVED***activeNames.value***REMOVED***=***REMOVED***castArray(props.modelValue),***REMOVED***{***REMOVED***deep:***REMOVED***true***REMOVED***});
***REMOVED******REMOVED***provide(collapseContextKey,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***activeNames,
***REMOVED******REMOVED******REMOVED******REMOVED***handleItemClick
***REMOVED******REMOVED***});
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***activeNames,
***REMOVED******REMOVED******REMOVED******REMOVED***setActiveNames
***REMOVED******REMOVED***};
};
const***REMOVED***useCollapseDOM***REMOVED***=***REMOVED***(props)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***ns***REMOVED***=***REMOVED***useNamespace("collapse");
***REMOVED******REMOVED***const***REMOVED***rootKls***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***[
***REMOVED******REMOVED******REMOVED******REMOVED***ns.b(),
***REMOVED******REMOVED******REMOVED******REMOVED***ns.b(`icon-position-${props.expandIconPosition}`)
***REMOVED******REMOVED***]);
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***rootKls
***REMOVED******REMOVED***};
};

export***REMOVED***{***REMOVED***useCollapse,***REMOVED***useCollapseDOM***REMOVED***};
//#***REMOVED***sourceMappingURL=use-collapse.mjs.map
