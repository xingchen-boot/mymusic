import***REMOVED***{***REMOVED***inject,***REMOVED***getCurrentInstance,***REMOVED***ref,***REMOVED***unref,***REMOVED***reactive,***REMOVED***onBeforeUnmount***REMOVED***}***REMOVED***from***REMOVED***'vue';
import***REMOVED***{***REMOVED***carouselContextKey***REMOVED***}***REMOVED***from***REMOVED***'./constants.mjs';
import***REMOVED***{***REMOVED***isUndefined***REMOVED***}***REMOVED***from***REMOVED***'../../../utils/types.mjs';

const***REMOVED***useCarouselItem***REMOVED***=***REMOVED***(props)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***const***REMOVED***carouselContext***REMOVED***=***REMOVED***inject(carouselContextKey);
***REMOVED******REMOVED***const***REMOVED***instance***REMOVED***=***REMOVED***getCurrentInstance();
***REMOVED******REMOVED***const***REMOVED***carouselItemRef***REMOVED***=***REMOVED***ref();
***REMOVED******REMOVED***const***REMOVED***hover***REMOVED***=***REMOVED***ref(false);
***REMOVED******REMOVED***const***REMOVED***translate***REMOVED***=***REMOVED***ref(0);
***REMOVED******REMOVED***const***REMOVED***scale***REMOVED***=***REMOVED***ref(1);
***REMOVED******REMOVED***const***REMOVED***active***REMOVED***=***REMOVED***ref(false);
***REMOVED******REMOVED***const***REMOVED***ready***REMOVED***=***REMOVED***ref(false);
***REMOVED******REMOVED***const***REMOVED***inStage***REMOVED***=***REMOVED***ref(false);
***REMOVED******REMOVED***const***REMOVED***animating***REMOVED***=***REMOVED***ref(false);
***REMOVED******REMOVED***const***REMOVED***{***REMOVED***isCardType,***REMOVED***isVertical,***REMOVED***cardScale***REMOVED***}***REMOVED***=***REMOVED***carouselContext;
***REMOVED******REMOVED***function***REMOVED***processIndex(index,***REMOVED***activeIndex,***REMOVED***length)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***lastItemIndex***REMOVED***=***REMOVED***length***REMOVED***-***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***prevItemIndex***REMOVED***=***REMOVED***activeIndex***REMOVED***-***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***nextItemIndex***REMOVED***=***REMOVED***activeIndex***REMOVED***+***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***halfItemIndex***REMOVED***=***REMOVED***length***REMOVED***/***REMOVED***2;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(activeIndex***REMOVED***===***REMOVED***0***REMOVED***&&***REMOVED***index***REMOVED***===***REMOVED***lastItemIndex)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***-1;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(activeIndex***REMOVED***===***REMOVED***lastItemIndex***REMOVED***&&***REMOVED***index***REMOVED***===***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***length;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(index***REMOVED***<***REMOVED***prevItemIndex***REMOVED***&&***REMOVED***activeIndex***REMOVED***-***REMOVED***index***REMOVED***>=***REMOVED***halfItemIndex)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***length***REMOVED***+***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(index***REMOVED***>***REMOVED***nextItemIndex***REMOVED***&&***REMOVED***index***REMOVED***-***REMOVED***activeIndex***REMOVED***>=***REMOVED***halfItemIndex)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***-2;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***index;
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***calcCardTranslate(index,***REMOVED***activeIndex)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a,***REMOVED***_b;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***parentWidth***REMOVED***=***REMOVED***unref(isVertical)***REMOVED***?***REMOVED***((_a***REMOVED***=***REMOVED***carouselContext.root.value)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_a.offsetHeight)***REMOVED***||***REMOVED***0***REMOVED***:***REMOVED***((_b***REMOVED***=***REMOVED***carouselContext.root.value)***REMOVED***==***REMOVED***null***REMOVED***?***REMOVED***void***REMOVED***0***REMOVED***:***REMOVED***_b.offsetWidth)***REMOVED***||***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(inStage.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***parentWidth***REMOVED*******REMOVED***((2***REMOVED***-***REMOVED***cardScale)***REMOVED*******REMOVED***(index***REMOVED***-***REMOVED***activeIndex)***REMOVED***+***REMOVED***1)***REMOVED***/***REMOVED***4;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(index***REMOVED***<***REMOVED***activeIndex)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***-(1***REMOVED***+***REMOVED***cardScale)***REMOVED*******REMOVED***parentWidth***REMOVED***/***REMOVED***4;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(3***REMOVED***+***REMOVED***cardScale)***REMOVED*******REMOVED***parentWidth***REMOVED***/***REMOVED***4;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***function***REMOVED***calcTranslate(index,***REMOVED***activeIndex,***REMOVED***isVertical2)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***rootEl***REMOVED***=***REMOVED***carouselContext.root.value;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!rootEl)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***distance***REMOVED***=***REMOVED***(isVertical2***REMOVED***?***REMOVED***rootEl.offsetHeight***REMOVED***:***REMOVED***rootEl.offsetWidth)***REMOVED***||***REMOVED***0;
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***distance***REMOVED*******REMOVED***(index***REMOVED***-***REMOVED***activeIndex);
***REMOVED******REMOVED***}
***REMOVED******REMOVED***const***REMOVED***translateItem***REMOVED***=***REMOVED***(index,***REMOVED***activeIndex,***REMOVED***oldIndex)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***var***REMOVED***_a;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***_isCardType***REMOVED***=***REMOVED***unref(isCardType);
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***carouselItemLength***REMOVED***=***REMOVED***(_a***REMOVED***=***REMOVED***carouselContext.items.value.length)***REMOVED***!=***REMOVED***null***REMOVED***?***REMOVED***_a***REMOVED***:***REMOVED***Number.NaN;
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isActive***REMOVED***=***REMOVED***index***REMOVED***===***REMOVED***activeIndex;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!_isCardType***REMOVED***&&***REMOVED***!isUndefined(oldIndex))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***animating.value***REMOVED***=***REMOVED***isActive***REMOVED***||***REMOVED***index***REMOVED***===***REMOVED***oldIndex;
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!isActive***REMOVED***&&***REMOVED***carouselItemLength***REMOVED***>***REMOVED***2***REMOVED***&&***REMOVED***carouselContext.loop)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***index***REMOVED***=***REMOVED***processIndex(index,***REMOVED***activeIndex,***REMOVED***carouselItemLength);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***_isVertical***REMOVED***=***REMOVED***unref(isVertical);
***REMOVED******REMOVED******REMOVED******REMOVED***active.value***REMOVED***=***REMOVED***isActive;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(_isCardType)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***inStage.value***REMOVED***=***REMOVED***Math.round(Math.abs(index***REMOVED***-***REMOVED***activeIndex))***REMOVED***<=***REMOVED***1;
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***translate.value***REMOVED***=***REMOVED***calcCardTranslate(index,***REMOVED***activeIndex);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***scale.value***REMOVED***=***REMOVED***unref(active)***REMOVED***?***REMOVED***1***REMOVED***:***REMOVED***cardScale;
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***translate.value***REMOVED***=***REMOVED***calcTranslate(index,***REMOVED***activeIndex,***REMOVED***_isVertical);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***ready.value***REMOVED***=***REMOVED***true;
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isActive***REMOVED***&&***REMOVED***carouselItemRef.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***carouselContext.setContainerHeight(carouselItemRef.value.offsetHeight);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***};
***REMOVED******REMOVED***function***REMOVED***handleItemClick()***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(carouselContext***REMOVED***&&***REMOVED***unref(isCardType))***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***index***REMOVED***=***REMOVED***carouselContext.items.value.findIndex(({***REMOVED***uid***REMOVED***})***REMOVED***=>***REMOVED***uid***REMOVED***===***REMOVED***instance.uid);
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***carouselContext.setActiveItem(index);
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***const***REMOVED***carouselItemContext***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***props,
***REMOVED******REMOVED******REMOVED******REMOVED***states:***REMOVED***reactive({
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***hover,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***translate,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***scale,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***active,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ready,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***inStage,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***animating
***REMOVED******REMOVED******REMOVED******REMOVED***}),
***REMOVED******REMOVED******REMOVED******REMOVED***uid:***REMOVED***instance.uid,
***REMOVED******REMOVED******REMOVED******REMOVED***getVnode:***REMOVED***()***REMOVED***=>***REMOVED***instance.vnode,
***REMOVED******REMOVED******REMOVED******REMOVED***translateItem
***REMOVED******REMOVED***};
***REMOVED******REMOVED***carouselContext.addItem(carouselItemContext);
***REMOVED******REMOVED***onBeforeUnmount(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***carouselContext.removeItem(carouselItemContext);
***REMOVED******REMOVED***});
***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***carouselItemRef,
***REMOVED******REMOVED******REMOVED******REMOVED***active,
***REMOVED******REMOVED******REMOVED******REMOVED***animating,
***REMOVED******REMOVED******REMOVED******REMOVED***hover,
***REMOVED******REMOVED******REMOVED******REMOVED***inStage,
***REMOVED******REMOVED******REMOVED******REMOVED***isVertical,
***REMOVED******REMOVED******REMOVED******REMOVED***translate,
***REMOVED******REMOVED******REMOVED******REMOVED***isCardType,
***REMOVED******REMOVED******REMOVED******REMOVED***scale,
***REMOVED******REMOVED******REMOVED******REMOVED***ready,
***REMOVED******REMOVED******REMOVED******REMOVED***handleItemClick
***REMOVED******REMOVED***};
};

export***REMOVED***{***REMOVED***useCarouselItem***REMOVED***};
//#***REMOVED***sourceMappingURL=use-carousel-item.mjs.map
