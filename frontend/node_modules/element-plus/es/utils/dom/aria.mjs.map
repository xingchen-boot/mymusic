{"version":3,"file":"aria.mjs","sources":["../../../../../packages/utils/dom/aria.ts"],"sourcesContent":["const***REMOVED***FOCUSABLE_ELEMENT_SELECTORS***REMOVED***=***REMOVED***`a[href],button:not([disabled]),button:not([hidden]),:not([tabindex=\"-1\"]),input:not([disabled]),input:not([type=\"hidden\"]),select:not([disabled]),textarea:not([disabled])`\n\nconst***REMOVED***isHTMLElement***REMOVED***=***REMOVED***(e:***REMOVED***unknown):***REMOVED***e***REMOVED***is***REMOVED***Element***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(typeof***REMOVED***Element***REMOVED***===***REMOVED***'undefined')***REMOVED***return***REMOVED***false\n***REMOVED******REMOVED***return***REMOVED***e***REMOVED***instanceof***REMOVED***Element\n}\n\n/**\n***REMOVED*******REMOVED***Determine***REMOVED***if***REMOVED***the***REMOVED***testing***REMOVED***element***REMOVED***is***REMOVED***visible***REMOVED***on***REMOVED***screen***REMOVED***no***REMOVED***matter***REMOVED***if***REMOVED***its***REMOVED***on***REMOVED***the***REMOVED***viewport***REMOVED***or***REMOVED***not\n***REMOVED****/\nexport***REMOVED***const***REMOVED***isVisible***REMOVED***=***REMOVED***(element:***REMOVED***HTMLElement)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(process.env.NODE_ENV***REMOVED***===***REMOVED***'test')***REMOVED***return***REMOVED***true\n***REMOVED******REMOVED***const***REMOVED***computed***REMOVED***=***REMOVED***getComputedStyle(element)\n***REMOVED******REMOVED***//***REMOVED***element.offsetParent***REMOVED***won't***REMOVED***work***REMOVED***on***REMOVED***fix***REMOVED***positioned\n***REMOVED******REMOVED***//***REMOVED***WARNING:***REMOVED***potential***REMOVED***issue***REMOVED***here,***REMOVED***going***REMOVED***to***REMOVED***need***REMOVED***some***REMOVED***expert***REMOVED***advices***REMOVED***on***REMOVED***this***REMOVED***issue\n***REMOVED******REMOVED***return***REMOVED***computed.position***REMOVED***===***REMOVED***'fixed'***REMOVED***?***REMOVED***false***REMOVED***:***REMOVED***element.offsetParent***REMOVED***!==***REMOVED***null\n}\n\nexport***REMOVED***const***REMOVED***obtainAllFocusableElements***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***element:***REMOVED***HTMLElement\n):***REMOVED***HTMLElement[]***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***return***REMOVED***Array.from(\n***REMOVED******REMOVED******REMOVED******REMOVED***element.querySelectorAll<HTMLElement>(FOCUSABLE_ELEMENT_SELECTORS)\n***REMOVED******REMOVED***).filter((item:***REMOVED***HTMLElement)***REMOVED***=>***REMOVED***isFocusable(item)***REMOVED***&&***REMOVED***isVisible(item))\n}\n\n/**\n***REMOVED*******REMOVED***@desc***REMOVED***Determine***REMOVED***if***REMOVED***target***REMOVED***element***REMOVED***is***REMOVED***focusable\n***REMOVED*******REMOVED***@param***REMOVED***element***REMOVED***{HTMLElement}\n***REMOVED*******REMOVED***@returns***REMOVED***{Boolean}***REMOVED***true***REMOVED***if***REMOVED***it***REMOVED***is***REMOVED***focusable\n***REMOVED****/\nexport***REMOVED***const***REMOVED***isFocusable***REMOVED***=***REMOVED***(element:***REMOVED***HTMLElement):***REMOVED***boolean***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED***element.tabIndex***REMOVED***>***REMOVED***0***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED***(element.tabIndex***REMOVED***===***REMOVED***0***REMOVED***&&***REMOVED***element.getAttribute('tabIndex')***REMOVED***!==***REMOVED***null)\n***REMOVED******REMOVED***)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***true\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***if***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED***element.tabIndex***REMOVED***<***REMOVED***0***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED***element.hasAttribute('disabled')***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED***element.getAttribute('aria-disabled')***REMOVED***===***REMOVED***'true'\n***REMOVED******REMOVED***)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***false\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***switch***REMOVED***(element.nodeName)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'A':***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***casting***REMOVED***current***REMOVED***element***REMOVED***to***REMOVED***Specific***REMOVED***HTMLElement***REMOVED***in***REMOVED***order***REMOVED***to***REMOVED***be***REMOVED***more***REMOVED***type***REMOVED***precise\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***!!(element***REMOVED***as***REMOVED***HTMLAnchorElement).href***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(element***REMOVED***as***REMOVED***HTMLAnchorElement).rel***REMOVED***!==***REMOVED***'ignore'\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'INPUT':***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***!(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(element***REMOVED***as***REMOVED***HTMLInputElement).type***REMOVED***===***REMOVED***'hidden'***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(element***REMOVED***as***REMOVED***HTMLInputElement).type***REMOVED***===***REMOVED***'file'\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'BUTTON':\n***REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'SELECT':\n***REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'TEXTAREA':***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***true\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***false\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}\n}\n\n/**\n***REMOVED*******REMOVED***Trigger***REMOVED***an***REMOVED***event\n***REMOVED*******REMOVED***mouseenter,***REMOVED***mouseleave,***REMOVED***mouseover,***REMOVED***keyup,***REMOVED***change,***REMOVED***click,***REMOVED***etc.\n***REMOVED*******REMOVED***@param***REMOVED******REMOVED***{HTMLElement}***REMOVED***elm\n***REMOVED*******REMOVED***@param***REMOVED******REMOVED***{String}***REMOVED***name\n***REMOVED*******REMOVED***@param***REMOVED******REMOVED***{*}***REMOVED***opts\n***REMOVED****/\nexport***REMOVED***const***REMOVED***triggerEvent***REMOVED***=***REMOVED***function***REMOVED***(\n***REMOVED******REMOVED***elm:***REMOVED***HTMLElement,\n***REMOVED******REMOVED***name:***REMOVED***string,\n***REMOVED******REMOVED***...opts:***REMOVED***Array<boolean>\n):***REMOVED***HTMLElement***REMOVED***{\n***REMOVED******REMOVED***let***REMOVED***eventName:***REMOVED***string\n\n***REMOVED******REMOVED***if***REMOVED***(name.includes('mouse')***REMOVED***||***REMOVED***name.includes('click'))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***eventName***REMOVED***=***REMOVED***'MouseEvents'\n***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(name.includes('key'))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***eventName***REMOVED***=***REMOVED***'KeyboardEvent'\n***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***eventName***REMOVED***=***REMOVED***'HTMLEvents'\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***const***REMOVED***evt***REMOVED***=***REMOVED***document.createEvent(eventName)\n\n***REMOVED******REMOVED***evt.initEvent(name,***REMOVED***...opts)\n***REMOVED******REMOVED***elm.dispatchEvent(evt)\n***REMOVED******REMOVED***return***REMOVED***elm\n}\n\nexport***REMOVED***const***REMOVED***isLeaf***REMOVED***=***REMOVED***(el:***REMOVED***HTMLElement)***REMOVED***=>***REMOVED***!el.getAttribute('aria-owns')\n\nexport***REMOVED***const***REMOVED***getSibling***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***el:***REMOVED***HTMLElement,\n***REMOVED******REMOVED***distance:***REMOVED***number,\n***REMOVED******REMOVED***elClass:***REMOVED***string\n)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***{***REMOVED***parentNode***REMOVED***}***REMOVED***=***REMOVED***el\n***REMOVED******REMOVED***if***REMOVED***(!parentNode)***REMOVED***return***REMOVED***null\n***REMOVED******REMOVED***const***REMOVED***siblings***REMOVED***=***REMOVED***parentNode.querySelectorAll(elClass)\n***REMOVED******REMOVED***const***REMOVED***index***REMOVED***=***REMOVED***Array.prototype.indexOf.call(siblings,***REMOVED***el)\n***REMOVED******REMOVED***return***REMOVED***siblings[index***REMOVED***+***REMOVED***distance]***REMOVED***||***REMOVED***null\n}\n\nexport***REMOVED***const***REMOVED***focusElement***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***el?:***REMOVED***HTMLElement***REMOVED***|***REMOVED***{***REMOVED***focus:***REMOVED***()***REMOVED***=>***REMOVED***void***REMOVED***}***REMOVED***|***REMOVED***null,\n***REMOVED******REMOVED***options?:***REMOVED***FocusOptions\n)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(!el***REMOVED***||***REMOVED***!el.focus)***REMOVED***return\n***REMOVED******REMOVED***let***REMOVED***cleanup:***REMOVED***boolean***REMOVED***=***REMOVED***false\n\n***REMOVED******REMOVED***if***REMOVED***(isHTMLElement(el)***REMOVED***&&***REMOVED***!isFocusable(el)***REMOVED***&&***REMOVED***!el.getAttribute('tabindex'))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***el.setAttribute('tabindex',***REMOVED***'-1')\n***REMOVED******REMOVED******REMOVED******REMOVED***cleanup***REMOVED***=***REMOVED***true\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***el.focus(options)\n\n***REMOVED******REMOVED***if***REMOVED***(isHTMLElement(el)***REMOVED***&&***REMOVED***cleanup)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***el.removeAttribute('tabindex')\n***REMOVED******REMOVED***}\n}\n\nexport***REMOVED***const***REMOVED***focusNode***REMOVED***=***REMOVED***(el:***REMOVED***HTMLElement)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(!el)***REMOVED***return\n***REMOVED******REMOVED***focusElement(el)\n***REMOVED******REMOVED***!isLeaf(el)***REMOVED***&&***REMOVED***el.click()\n}\n"],"names":[],"mappings":"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"}