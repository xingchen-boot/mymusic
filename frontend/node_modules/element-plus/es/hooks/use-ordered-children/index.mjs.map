{"version":3,"file":"index.mjs","sources":["../../../../../packages/hooks/use-ordered-children/index.ts"],"sourcesContent":["import***REMOVED***{\n***REMOVED******REMOVED***defineComponent,\n***REMOVED******REMOVED***h,\n***REMOVED******REMOVED***isVNode,\n***REMOVED******REMOVED***onMounted,\n***REMOVED******REMOVED***shallowRef,\n***REMOVED******REMOVED***triggerRef,\n}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{***REMOVED***flattedChildren***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***Component,***REMOVED***ComponentInternalInstance,***REMOVED***VNode***REMOVED***}***REMOVED***from***REMOVED***'vue'\n\ntype***REMOVED***ChildEssential***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED***uid:***REMOVED***number\n***REMOVED******REMOVED***getVnode:***REMOVED***()***REMOVED***=>***REMOVED***VNode\n}\n\nconst***REMOVED***getOrderedChildren***REMOVED***=***REMOVED***<T>(\n***REMOVED******REMOVED***vm:***REMOVED***ComponentInternalInstance,\n***REMOVED******REMOVED***childComponentName:***REMOVED***string,\n***REMOVED******REMOVED***children:***REMOVED***Record<number,***REMOVED***T>\n):***REMOVED***T[]***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***nodes***REMOVED***=***REMOVED***flattedChildren(vm.subTree).filter(\n***REMOVED******REMOVED******REMOVED******REMOVED***(n):***REMOVED***n***REMOVED***is***REMOVED***VNode***REMOVED***=>\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isVNode(n)***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(n.type***REMOVED***as***REMOVED***Component)?.name***REMOVED***===***REMOVED***childComponentName***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***!!n.component\n***REMOVED******REMOVED***)\n***REMOVED******REMOVED***const***REMOVED***uids***REMOVED***=***REMOVED***nodes.map((n)***REMOVED***=>***REMOVED***n.component!.uid)\n***REMOVED******REMOVED***return***REMOVED***uids.map((uid)***REMOVED***=>***REMOVED***children[uid]).filter((p)***REMOVED***=>***REMOVED***!!p)\n}\n\nexport***REMOVED***const***REMOVED***useOrderedChildren***REMOVED***=***REMOVED***<T***REMOVED***extends***REMOVED***ChildEssential>(\n***REMOVED******REMOVED***vm:***REMOVED***ComponentInternalInstance,\n***REMOVED******REMOVED***childComponentName:***REMOVED***string\n)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***children***REMOVED***=***REMOVED***shallowRef<Record<number,***REMOVED***T>>({})\n***REMOVED******REMOVED***const***REMOVED***orderedChildren***REMOVED***=***REMOVED***shallowRef<T[]>([])\n***REMOVED******REMOVED***const***REMOVED***nodesMap***REMOVED***=***REMOVED***new***REMOVED***WeakMap<ParentNode,***REMOVED***Node[]>()\n\n***REMOVED******REMOVED***const***REMOVED***addChild***REMOVED***=***REMOVED***(child:***REMOVED***T)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***children.value[child.uid]***REMOVED***=***REMOVED***child\n***REMOVED******REMOVED******REMOVED******REMOVED***triggerRef(children)\n\n***REMOVED******REMOVED******REMOVED******REMOVED***onMounted(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***childNode***REMOVED***=***REMOVED***child.getVnode().el!***REMOVED***as***REMOVED***Node\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***parentNode***REMOVED***=***REMOVED***childNode.parentNode!\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!nodesMap.has(parentNode))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***nodesMap.set(parentNode,***REMOVED***[])\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***originalFn***REMOVED***=***REMOVED***parentNode.insertBefore.bind(parentNode)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***parentNode.insertBefore***REMOVED***=***REMOVED***<T***REMOVED***extends***REMOVED***Node>(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***node:***REMOVED***T,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***anchor:***REMOVED***Node***REMOVED***|***REMOVED***null\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Schedule***REMOVED***a***REMOVED***job***REMOVED***to***REMOVED***update***REMOVED***`orderedChildren`***REMOVED***if***REMOVED***the***REMOVED***root***REMOVED***element***REMOVED***of***REMOVED***child***REMOVED***components***REMOVED***is***REMOVED***moved\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***shouldSortChildren***REMOVED***=***REMOVED***nodesMap\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.get(parentNode)!\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.some((el)***REMOVED***=>***REMOVED***node***REMOVED***===***REMOVED***el***REMOVED***||***REMOVED***anchor***REMOVED***===***REMOVED***el)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(shouldSortChildren)***REMOVED***triggerRef(children)\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***originalFn(node,***REMOVED***anchor)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***nodesMap.get(parentNode)!.push(childNode)\n***REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***removeChild***REMOVED***=***REMOVED***(child:***REMOVED***T)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***delete***REMOVED***children.value[child.uid]\n***REMOVED******REMOVED******REMOVED******REMOVED***triggerRef(children)\n\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***childNode***REMOVED***=***REMOVED***child.getVnode().el!***REMOVED***as***REMOVED***Node\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***parentNode***REMOVED***=***REMOVED***childNode.parentNode!\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***childNodes***REMOVED***=***REMOVED***nodesMap.get(parentNode)!\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***index***REMOVED***=***REMOVED***childNodes.indexOf(childNode)\n***REMOVED******REMOVED******REMOVED******REMOVED***childNodes.splice(index,***REMOVED***1)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***sortChildren***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***orderedChildren.value***REMOVED***=***REMOVED***getOrderedChildren(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***vm,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***childComponentName,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***children.value\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***IsolatedRenderer***REMOVED***=***REMOVED***(props:***REMOVED***{***REMOVED***render:***REMOVED***()***REMOVED***=>***REMOVED***VNode[]***REMOVED***})***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***props.render()\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***//***REMOVED***TODO:***REMOVED***Refactor***REMOVED***`el-description`***REMOVED***before***REMOVED***converting***REMOVED***this***REMOVED***to***REMOVED***a***REMOVED***functional***REMOVED***component\n***REMOVED******REMOVED***const***REMOVED***ChildrenSorter***REMOVED***=***REMOVED***defineComponent({\n***REMOVED******REMOVED******REMOVED******REMOVED***setup(_,***REMOVED***{***REMOVED***slots***REMOVED***})***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***sortChildren()\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***slots.default\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***?***REMOVED***//***REMOVED***Create***REMOVED***a***REMOVED***new***REMOVED***`ReactiveEffect`***REMOVED***to***REMOVED***ensure***REMOVED***`ChildrenSorter`***REMOVED***doesn't***REMOVED***track***REMOVED***any***REMOVED***extra***REMOVED***dependencies\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***@ts-ignore***REMOVED***TODO:***REMOVED***Remove***REMOVED***this***REMOVED***after***REMOVED***Vue***REMOVED***is***REMOVED***upgraded\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***h(IsolatedRenderer,***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***render:***REMOVED***slots.default,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***null\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***},\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***children:***REMOVED***orderedChildren,\n***REMOVED******REMOVED******REMOVED******REMOVED***addChild,\n***REMOVED******REMOVED******REMOVED******REMOVED***removeChild,\n***REMOVED******REMOVED******REMOVED******REMOVED***ChildrenSorter,\n***REMOVED******REMOVED***}\n}\n"],"names":[],"mappings":"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"}