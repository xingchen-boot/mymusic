{"version":3,"file":"index.js","sources":["../../../../../packages/hooks/use-focus-controller/index.ts"],"sourcesContent":["import***REMOVED***{\n***REMOVED******REMOVED***getCurrentInstance,\n***REMOVED******REMOVED***onMounted,\n***REMOVED******REMOVED***ref,\n***REMOVED******REMOVED***shallowRef,\n***REMOVED******REMOVED***unref,\n***REMOVED******REMOVED***watch,\n}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{***REMOVED***useEventListener***REMOVED***}***REMOVED***from***REMOVED***'@vueuse/core'\nimport***REMOVED***{***REMOVED***isElement,***REMOVED***isFocusable,***REMOVED***isFunction***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***ShallowRef***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***type***REMOVED***{***REMOVED***MaybeRef***REMOVED***}***REMOVED***from***REMOVED***'@vueuse/core'\n\ninterface***REMOVED***UseFocusControllerOptions***REMOVED***{\n***REMOVED******REMOVED***disabled?:***REMOVED***MaybeRef<boolean>\n***REMOVED******REMOVED***/**\n***REMOVED******REMOVED******REMOVED*******REMOVED***return***REMOVED***true***REMOVED***to***REMOVED***cancel***REMOVED***focus\n***REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***event***REMOVED***FocusEvent\n***REMOVED******REMOVED******REMOVED****/\n***REMOVED******REMOVED***beforeFocus?:***REMOVED***(event:***REMOVED***FocusEvent)***REMOVED***=>***REMOVED***boolean***REMOVED***|***REMOVED***undefined\n***REMOVED******REMOVED***afterFocus?:***REMOVED***()***REMOVED***=>***REMOVED***void\n***REMOVED******REMOVED***/**\n***REMOVED******REMOVED******REMOVED*******REMOVED***return***REMOVED***true***REMOVED***to***REMOVED***cancel***REMOVED***blur\n***REMOVED******REMOVED******REMOVED*******REMOVED***@param***REMOVED***event***REMOVED***FocusEvent\n***REMOVED******REMOVED******REMOVED****/\n***REMOVED******REMOVED***beforeBlur?:***REMOVED***(event:***REMOVED***FocusEvent)***REMOVED***=>***REMOVED***boolean***REMOVED***|***REMOVED***undefined\n***REMOVED******REMOVED***afterBlur?:***REMOVED***()***REMOVED***=>***REMOVED***void\n}\n\nexport***REMOVED***function***REMOVED***useFocusController<T***REMOVED***extends***REMOVED***{***REMOVED***focus:***REMOVED***()***REMOVED***=>***REMOVED***void***REMOVED***}>(\n***REMOVED******REMOVED***target:***REMOVED***ShallowRef<T***REMOVED***|***REMOVED***undefined>,\n***REMOVED******REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***disabled,\n***REMOVED******REMOVED******REMOVED******REMOVED***beforeFocus,\n***REMOVED******REMOVED******REMOVED******REMOVED***afterFocus,\n***REMOVED******REMOVED******REMOVED******REMOVED***beforeBlur,\n***REMOVED******REMOVED******REMOVED******REMOVED***afterBlur,\n***REMOVED******REMOVED***}:***REMOVED***UseFocusControllerOptions***REMOVED***=***REMOVED***{}\n)***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***instance***REMOVED***=***REMOVED***getCurrentInstance()!\n***REMOVED******REMOVED***const***REMOVED***{***REMOVED***emit***REMOVED***}***REMOVED***=***REMOVED***instance\n***REMOVED******REMOVED***const***REMOVED***wrapperRef***REMOVED***=***REMOVED***shallowRef<HTMLElement>()\n***REMOVED******REMOVED***const***REMOVED***isFocused***REMOVED***=***REMOVED***ref(false)\n\n***REMOVED******REMOVED***const***REMOVED***handleFocus***REMOVED***=***REMOVED***(event:***REMOVED***FocusEvent)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cancelFocus***REMOVED***=***REMOVED***isFunction(beforeFocus)***REMOVED***?***REMOVED***beforeFocus(event)***REMOVED***:***REMOVED***false\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(unref(disabled)***REMOVED***||***REMOVED***isFocused.value***REMOVED***||***REMOVED***cancelFocus)***REMOVED***return\n\n***REMOVED******REMOVED******REMOVED******REMOVED***isFocused.value***REMOVED***=***REMOVED***true\n***REMOVED******REMOVED******REMOVED******REMOVED***emit('focus',***REMOVED***event)\n***REMOVED******REMOVED******REMOVED******REMOVED***afterFocus?.()\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***handleBlur***REMOVED***=***REMOVED***(event:***REMOVED***FocusEvent)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cancelBlur***REMOVED***=***REMOVED***isFunction(beforeBlur)***REMOVED***?***REMOVED***beforeBlur(event)***REMOVED***:***REMOVED***false\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***unref(disabled)***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(event.relatedTarget***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***wrapperRef.value?.contains(event.relatedTarget***REMOVED***as***REMOVED***Node))***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cancelBlur\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return\n\n***REMOVED******REMOVED******REMOVED******REMOVED***isFocused.value***REMOVED***=***REMOVED***false\n***REMOVED******REMOVED******REMOVED******REMOVED***emit('blur',***REMOVED***event)\n***REMOVED******REMOVED******REMOVED******REMOVED***afterBlur?.()\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***handleClick***REMOVED***=***REMOVED***(event:***REMOVED***Event)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***unref(disabled)***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isFocusable(event.target***REMOVED***as***REMOVED***HTMLElement)***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(wrapperRef.value?.contains(document.activeElement)***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***wrapperRef.value***REMOVED***!==***REMOVED***document.activeElement)\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return\n\n***REMOVED******REMOVED******REMOVED******REMOVED***target.value?.focus()\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***watch([wrapperRef,***REMOVED***()***REMOVED***=>***REMOVED***unref(disabled)],***REMOVED***([el,***REMOVED***disabled])***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!el)***REMOVED***return\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(disabled)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***el.removeAttribute('tabindex')\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***el.setAttribute('tabindex',***REMOVED***'-1')\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***useEventListener(wrapperRef,***REMOVED***'focus',***REMOVED***handleFocus,***REMOVED***true)\n***REMOVED******REMOVED***useEventListener(wrapperRef,***REMOVED***'blur',***REMOVED***handleBlur,***REMOVED***true)\n***REMOVED******REMOVED***useEventListener(wrapperRef,***REMOVED***'click',***REMOVED***handleClick,***REMOVED***true)\n\n***REMOVED******REMOVED***//***REMOVED***only***REMOVED***for***REMOVED***test\n***REMOVED******REMOVED***if***REMOVED***(process.env.NODE_ENV***REMOVED***===***REMOVED***'test')***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***onMounted(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***targetEl***REMOVED***=***REMOVED***isElement(target.value)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***?***REMOVED***target.value\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***document.querySelector('input,textarea')\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(targetEl)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***useEventListener(targetEl,***REMOVED***'focus',***REMOVED***handleFocus,***REMOVED***true)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***useEventListener(targetEl,***REMOVED***'blur',***REMOVED***handleBlur,***REMOVED***true)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***isFocused,\n***REMOVED******REMOVED******REMOVED******REMOVED***/*****REMOVED***Avoid***REMOVED***using***REMOVED***wrapperRef***REMOVED***and***REMOVED***handleFocus/handleBlur***REMOVED***together***REMOVED****/\n***REMOVED******REMOVED******REMOVED******REMOVED***wrapperRef,\n***REMOVED******REMOVED******REMOVED******REMOVED***handleFocus,\n***REMOVED******REMOVED******REMOVED******REMOVED***handleBlur,\n***REMOVED******REMOVED***}\n}\n"],"names":["getCurrentInstance","shallowRef","ref","isFunction","unref","isFocusable","watch","useEventListener"],"mappings":"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"}