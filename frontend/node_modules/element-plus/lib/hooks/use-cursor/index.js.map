{"version":3,"file":"index.js","sources":["../../../../../packages/hooks/use-cursor/index.ts"],"sourcesContent":["import***REMOVED***type***REMOVED***{***REMOVED***ShallowRef***REMOVED***}***REMOVED***from***REMOVED***'vue'\n\ninterface***REMOVED***SelectionInfo***REMOVED***{\n***REMOVED******REMOVED***selectionStart?:***REMOVED***number\n***REMOVED******REMOVED***selectionEnd?:***REMOVED***number\n***REMOVED******REMOVED***value?:***REMOVED***string\n***REMOVED******REMOVED***beforeTxt?:***REMOVED***string\n***REMOVED******REMOVED***afterTxt?:***REMOVED***string\n}\n\n//***REMOVED***Keep***REMOVED***input***REMOVED***cursor***REMOVED***in***REMOVED***the***REMOVED***correct***REMOVED***position***REMOVED***when***REMOVED***we***REMOVED***use***REMOVED***formatter.\nexport***REMOVED***function***REMOVED***useCursor(\n***REMOVED******REMOVED***input:***REMOVED***ShallowRef<HTMLInputElement***REMOVED***|***REMOVED***undefined>\n):***REMOVED***[()***REMOVED***=>***REMOVED***void,***REMOVED***()***REMOVED***=>***REMOVED***void]***REMOVED***{\n***REMOVED******REMOVED***let***REMOVED***selectionInfo:***REMOVED***SelectionInfo\n***REMOVED******REMOVED***function***REMOVED***recordCursor()***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(input.value***REMOVED***==***REMOVED***undefined)***REMOVED***return\n\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***selectionStart,***REMOVED***selectionEnd,***REMOVED***value***REMOVED***}***REMOVED***=***REMOVED***input.value\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(selectionStart***REMOVED***==***REMOVED***null***REMOVED***||***REMOVED***selectionEnd***REMOVED***==***REMOVED***null)***REMOVED***return\n\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***beforeTxt***REMOVED***=***REMOVED***value.slice(0,***REMOVED***Math.max(0,***REMOVED***selectionStart))\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***afterTxt***REMOVED***=***REMOVED***value.slice(Math.max(0,***REMOVED***selectionEnd))\n\n***REMOVED******REMOVED******REMOVED******REMOVED***selectionInfo***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***selectionStart,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***selectionEnd,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***value,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***beforeTxt,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***afterTxt,\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***function***REMOVED***setCursor()***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(input.value***REMOVED***==***REMOVED***undefined***REMOVED***||***REMOVED***selectionInfo***REMOVED***==***REMOVED***undefined)***REMOVED***return\n\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***value***REMOVED***}***REMOVED***=***REMOVED***input.value\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***beforeTxt,***REMOVED***afterTxt,***REMOVED***selectionStart***REMOVED***}***REMOVED***=***REMOVED***selectionInfo\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***beforeTxt***REMOVED***==***REMOVED***undefined***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***afterTxt***REMOVED***==***REMOVED***undefined***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***selectionStart***REMOVED***==***REMOVED***undefined\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return\n\n***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***startPos***REMOVED***=***REMOVED***value.length\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(value.endsWith(afterTxt))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***startPos***REMOVED***=***REMOVED***value.length***REMOVED***-***REMOVED***afterTxt.length\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(value.startsWith(beforeTxt))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***startPos***REMOVED***=***REMOVED***beforeTxt.length\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***beforeLastChar***REMOVED***=***REMOVED***beforeTxt[selectionStart***REMOVED***-***REMOVED***1]\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***newIndex***REMOVED***=***REMOVED***value.indexOf(beforeLastChar,***REMOVED***selectionStart***REMOVED***-***REMOVED***1)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(newIndex***REMOVED***!==***REMOVED***-1)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***startPos***REMOVED***=***REMOVED***newIndex***REMOVED***+***REMOVED***1\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***input.value.setSelectionRange(startPos,***REMOVED***startPos)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***return***REMOVED***[recordCursor,***REMOVED***setCursor]\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,SAAS,CAAC,KAAK,EAAE;AACjC,EAAE,IAAI,aAAa,CAAC;AACpB,EAAE,SAAS,YAAY,GAAG;AAC1B,IAAI,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC;AAC7B,MAAM,OAAO;AACb,IAAI,MAAM,EAAE,cAAc,EAAE,YAAY,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC;AAChE,IAAI,IAAI,cAAc,IAAI,IAAI,IAAI,YAAY,IAAI,IAAI;AACtD,MAAM,OAAO;AACb,IAAI,MAAM,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC;AAClE,IAAI,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC;AAC5D,IAAI,aAAa,GAAG;AACpB,MAAM,cAAc;AACpB,MAAM,YAAY;AAClB,MAAM,KAAK;AACX,MAAM,SAAS;AACf,MAAM,QAAQ;AACd,KAAK,CAAC;AACN,GAAG;AACH,EAAE,SAAS,SAAS,GAAG;AACvB,IAAI,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,aAAa,IAAI,KAAK,CAAC;AACxD,MAAM,OAAO;AACb,IAAI,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC;AAClC,IAAI,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,cAAc,EAAE,GAAG,aAAa,CAAC;AAClE,IAAI,IAAI,SAAS,IAAI,KAAK,CAAC,IAAI,QAAQ,IAAI,KAAK,CAAC,IAAI,cAAc,IAAI,KAAK,CAAC;AAC7E,MAAM,OAAO;AACb,IAAI,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC;AAChC,IAAI,IAAI,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;AAClC,MAAM,QAAQ,GAAG,KAAK,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;AAChD,KAAK,MAAM,IAAI,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE;AAC5C,MAAM,QAAQ,GAAG,SAAS,CAAC,MAAM,CAAC;AAClC,KAAK,MAAM;AACX,MAAM,MAAM,cAAc,GAAG,SAAS,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC;AAC3D,MAAM,MAAM,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,cAAc,EAAE,cAAc,GAAG,CAAC,CAAC,CAAC;AACzE,MAAM,IAAI,QAAQ,KAAK,CAAC,CAAC,EAAE;AAC3B,QAAQ,QAAQ,GAAG,QAAQ,GAAG,CAAC,CAAC;AAChC,OAAO;AACP,KAAK;AACL,IAAI,KAAK,CAAC,KAAK,CAAC,iBAAiB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AACtD,GAAG;AACH,EAAE,OAAO,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;AACnC;;;;"}