{"version":3,"file":"index.js","sources":["../../../../../packages/directives/click-outside/index.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***isArray,***REMOVED***isClient,***REMOVED***isElement***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\n\nimport***REMOVED***type***REMOVED***{\n***REMOVED******REMOVED***ComponentPublicInstance,\n***REMOVED******REMOVED***DirectiveBinding,\n***REMOVED******REMOVED***ObjectDirective,\n}***REMOVED***from***REMOVED***'vue'\n\ntype***REMOVED***DocumentHandler***REMOVED***=***REMOVED***<T***REMOVED***extends***REMOVED***MouseEvent>(mouseup:***REMOVED***T,***REMOVED***mousedown:***REMOVED***T)***REMOVED***=>***REMOVED***void\ntype***REMOVED***FlushList***REMOVED***=***REMOVED***Map<\n***REMOVED******REMOVED***HTMLElement,\n***REMOVED******REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***documentHandler:***REMOVED***DocumentHandler\n***REMOVED******REMOVED******REMOVED******REMOVED***bindingFn:***REMOVED***(...args:***REMOVED***unknown[])***REMOVED***=>***REMOVED***unknown\n***REMOVED******REMOVED***}[]\n>\n\nconst***REMOVED***nodeList:***REMOVED***FlushList***REMOVED***=***REMOVED***new***REMOVED***Map()\n\nif***REMOVED***(isClient)***REMOVED***{\n***REMOVED******REMOVED***let***REMOVED***startClick:***REMOVED***MouseEvent***REMOVED***|***REMOVED***undefined\n***REMOVED******REMOVED***document.addEventListener('mousedown',***REMOVED***(e:***REMOVED***MouseEvent)***REMOVED***=>***REMOVED***(startClick***REMOVED***=***REMOVED***e))\n***REMOVED******REMOVED***document.addEventListener('mouseup',***REMOVED***(e:***REMOVED***MouseEvent)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(startClick)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(const***REMOVED***handlers***REMOVED***of***REMOVED***nodeList.values())***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***for***REMOVED***(const***REMOVED***{***REMOVED***documentHandler***REMOVED***}***REMOVED***of***REMOVED***handlers)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***documentHandler(e***REMOVED***as***REMOVED***MouseEvent,***REMOVED***startClick)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***startClick***REMOVED***=***REMOVED***undefined\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***})\n}\n\nfunction***REMOVED***createDocumentHandler(\n***REMOVED******REMOVED***el:***REMOVED***HTMLElement,\n***REMOVED******REMOVED***binding:***REMOVED***DirectiveBinding\n):***REMOVED***DocumentHandler***REMOVED***{\n***REMOVED******REMOVED***let***REMOVED***excludes:***REMOVED***HTMLElement[]***REMOVED***=***REMOVED***[]\n***REMOVED******REMOVED***if***REMOVED***(isArray(binding.arg))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***excludes***REMOVED***=***REMOVED***binding.arg\n***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(isElement(binding.arg))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***due***REMOVED***to***REMOVED***current***REMOVED***implementation***REMOVED***on***REMOVED***binding***REMOVED***type***REMOVED***is***REMOVED***wrong***REMOVED***the***REMOVED***type***REMOVED***casting***REMOVED***is***REMOVED***necessary***REMOVED***here\n***REMOVED******REMOVED******REMOVED******REMOVED***excludes.push(binding.arg***REMOVED***as***REMOVED***unknown***REMOVED***as***REMOVED***HTMLElement)\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***return***REMOVED***function***REMOVED***(mouseup,***REMOVED***mousedown)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***popperRef***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***binding.instance***REMOVED***as***REMOVED***ComponentPublicInstance<{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***popperRef:***REMOVED***HTMLElement\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}>\n***REMOVED******REMOVED******REMOVED******REMOVED***).popperRef\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***mouseUpTarget***REMOVED***=***REMOVED***mouseup.target***REMOVED***as***REMOVED***Node\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***mouseDownTarget***REMOVED***=***REMOVED***mousedown?.target***REMOVED***as***REMOVED***Node\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isBound***REMOVED***=***REMOVED***!binding***REMOVED***||***REMOVED***!binding.instance\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isTargetExists***REMOVED***=***REMOVED***!mouseUpTarget***REMOVED***||***REMOVED***!mouseDownTarget\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isContainedByEl***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***el.contains(mouseUpTarget)***REMOVED***||***REMOVED***el.contains(mouseDownTarget)\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isSelf***REMOVED***=***REMOVED***el***REMOVED***===***REMOVED***mouseUpTarget\n\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isTargetExcluded***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(excludes.length***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***excludes.some((item)***REMOVED***=>***REMOVED***item?.contains(mouseUpTarget)))***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(excludes.length***REMOVED***&&***REMOVED***excludes.includes(mouseDownTarget***REMOVED***as***REMOVED***HTMLElement))\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isContainedByPopper***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***popperRef***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(popperRef.contains(mouseUpTarget)***REMOVED***||***REMOVED***popperRef.contains(mouseDownTarget))\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isBound***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isTargetExists***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isContainedByEl***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isSelf***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isTargetExcluded***REMOVED***||\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isContainedByPopper\n***REMOVED******REMOVED******REMOVED******REMOVED***)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED***binding.value(mouseup,***REMOVED***mousedown)\n***REMOVED******REMOVED***}\n}\n\nconst***REMOVED***ClickOutside:***REMOVED***ObjectDirective***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED***beforeMount(el:***REMOVED***HTMLElement,***REMOVED***binding:***REMOVED***DirectiveBinding)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***there***REMOVED***could***REMOVED***be***REMOVED***multiple***REMOVED***handlers***REMOVED***on***REMOVED***the***REMOVED***element\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!nodeList.has(el))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***nodeList.set(el,***REMOVED***[])\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***nodeList.get(el)!.push({\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***documentHandler:***REMOVED***createDocumentHandler(el,***REMOVED***binding),\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***bindingFn:***REMOVED***binding.value,\n***REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED***},\n***REMOVED******REMOVED***updated(el:***REMOVED***HTMLElement,***REMOVED***binding:***REMOVED***DirectiveBinding)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!nodeList.has(el))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***nodeList.set(el,***REMOVED***[])\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***handlers***REMOVED***=***REMOVED***nodeList.get(el)!\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***oldHandlerIndex***REMOVED***=***REMOVED***handlers.findIndex(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(item)***REMOVED***=>***REMOVED***item.bindingFn***REMOVED***===***REMOVED***binding.oldValue\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***newHandler***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***documentHandler:***REMOVED***createDocumentHandler(el,***REMOVED***binding),\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***bindingFn:***REMOVED***binding.value,\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(oldHandlerIndex***REMOVED***>=***REMOVED***0)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***replace***REMOVED***the***REMOVED***old***REMOVED***handler***REMOVED***to***REMOVED***the***REMOVED***new***REMOVED***handler\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handlers.splice(oldHandlerIndex,***REMOVED***1,***REMOVED***newHandler)\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handlers.push(newHandler)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***},\n***REMOVED******REMOVED***unmounted(el:***REMOVED***HTMLElement)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***remove***REMOVED***all***REMOVED***listeners***REMOVED***when***REMOVED***a***REMOVED***component***REMOVED***unmounted\n***REMOVED******REMOVED******REMOVED******REMOVED***nodeList.delete(el)\n***REMOVED******REMOVED***},\n}\n\nexport***REMOVED***default***REMOVED***ClickOutside\n"],"names":["isClient","isArray","isElement"],"mappings":"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"}