{"version":3,"file":"use-collapse.js","sources":["../../../../../../packages/components/collapse/src/use-collapse.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***computed,***REMOVED***provide,***REMOVED***ref,***REMOVED***watch***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{\n***REMOVED******REMOVED***debugWarn,\n***REMOVED******REMOVED***ensureArray,\n***REMOVED******REMOVED***isBoolean,\n***REMOVED******REMOVED***isPromise,\n***REMOVED******REMOVED***throwError,\n}***REMOVED***from***REMOVED***'@element-plus/utils'\nimport***REMOVED***{***REMOVED***useNamespace***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/hooks'\nimport***REMOVED***{***REMOVED***CHANGE_EVENT,***REMOVED***UPDATE_MODEL_EVENT***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/constants'\nimport***REMOVED***{***REMOVED***collapseContextKey***REMOVED***}***REMOVED***from***REMOVED***'./constants'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***SetupContext***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***type***REMOVED***{\n***REMOVED******REMOVED***CollapseActiveName,\n***REMOVED******REMOVED***CollapseEmits,\n***REMOVED******REMOVED***CollapseProps,\n}***REMOVED***from***REMOVED***'./collapse'\n\nconst***REMOVED***SCOPE***REMOVED***=***REMOVED***'ElCollapse'\nexport***REMOVED***const***REMOVED***useCollapse***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***props:***REMOVED***CollapseProps,\n***REMOVED******REMOVED***emit:***REMOVED***SetupContext<CollapseEmits>['emit']\n)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***activeNames***REMOVED***=***REMOVED***ref(ensureArray(props.modelValue))\n\n***REMOVED******REMOVED***const***REMOVED***setActiveNames***REMOVED***=***REMOVED***(_activeNames:***REMOVED***CollapseActiveName[])***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***activeNames.value***REMOVED***=***REMOVED***_activeNames\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***value***REMOVED***=***REMOVED***props.accordion***REMOVED***?***REMOVED***activeNames.value[0]***REMOVED***:***REMOVED***activeNames.value\n***REMOVED******REMOVED******REMOVED******REMOVED***emit(UPDATE_MODEL_EVENT,***REMOVED***value)\n***REMOVED******REMOVED******REMOVED******REMOVED***emit(CHANGE_EVENT,***REMOVED***value)\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***handleChange***REMOVED***=***REMOVED***(name:***REMOVED***CollapseActiveName)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(props.accordion)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***setActiveNames([activeNames.value[0]***REMOVED***===***REMOVED***name***REMOVED***?***REMOVED***''***REMOVED***:***REMOVED***name])\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***_activeNames***REMOVED***=***REMOVED***[...activeNames.value]\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***index***REMOVED***=***REMOVED***_activeNames.indexOf(name)\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(index***REMOVED***>***REMOVED***-1)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***_activeNames.splice(index,***REMOVED***1)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***_activeNames.push(name)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***setActiveNames(_activeNames)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***handleItemClick***REMOVED***=***REMOVED***async***REMOVED***(name:***REMOVED***CollapseActiveName)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***beforeCollapse***REMOVED***}***REMOVED***=***REMOVED***props\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!beforeCollapse)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleChange(name)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***shouldChange***REMOVED***=***REMOVED***beforeCollapse(name)\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***isPromiseOrBool***REMOVED***=***REMOVED***[\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPromise(shouldChange),\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isBoolean(shouldChange),\n***REMOVED******REMOVED******REMOVED******REMOVED***].includes(true)\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!isPromiseOrBool)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throwError(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***SCOPE,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'beforeCollapse***REMOVED***must***REMOVED***return***REMOVED***type***REMOVED***`Promise<boolean>`***REMOVED***or***REMOVED***`boolean`'\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isPromise(shouldChange))***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***shouldChange\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.then((result)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(result***REMOVED***!==***REMOVED***false)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleChange(name)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***.catch((e)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***debugWarn(SCOPE,***REMOVED***`some***REMOVED***error***REMOVED***occurred:***REMOVED***${e}`)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(shouldChange)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***handleChange(name)\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***watch(\n***REMOVED******REMOVED******REMOVED******REMOVED***()***REMOVED***=>***REMOVED***props.modelValue,\n***REMOVED******REMOVED******REMOVED******REMOVED***()***REMOVED***=>***REMOVED***(activeNames.value***REMOVED***=***REMOVED***ensureArray(props.modelValue)),\n***REMOVED******REMOVED******REMOVED******REMOVED***{***REMOVED***deep:***REMOVED***true***REMOVED***}\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***provide(collapseContextKey,***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***activeNames,\n***REMOVED******REMOVED******REMOVED******REMOVED***handleItemClick,\n***REMOVED******REMOVED***})\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***activeNames,\n***REMOVED******REMOVED******REMOVED******REMOVED***setActiveNames,\n***REMOVED******REMOVED***}\n}\n\nexport***REMOVED***const***REMOVED***useCollapseDOM***REMOVED***=***REMOVED***(props:***REMOVED***CollapseProps)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***ns***REMOVED***=***REMOVED***useNamespace('collapse')\n\n***REMOVED******REMOVED***const***REMOVED***rootKls***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***[\n***REMOVED******REMOVED******REMOVED******REMOVED***ns.b(),\n***REMOVED******REMOVED******REMOVED******REMOVED***ns.b(`icon-position-${props.expandIconPosition}`),\n***REMOVED******REMOVED***])\n\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***rootKls,\n***REMOVED******REMOVED***}\n}\n"],"names":["ref","ensureArray","UPDATE_MODEL_EVENT","CHANGE_EVENT","isPromise","isBoolean","throwError","watch","provide","collapseContextKey","useNamespace","computed"],"mappings":";;;;;;;;;;;;;AAWA,MAAM,KAAK,GAAG,YAAY,CAAC;AACf,MAAC,WAAW,GAAG,CAAC,KAAK,EAAE,IAAI,KAAK;AAC5C,EAAE,MAAM,WAAW,GAAGA,OAAG,CAACC,uBAAW,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;AACzD,EAAE,MAAM,cAAc,GAAG,CAAC,YAAY,KAAK;AAC3C,IAAI,WAAW,CAAC,KAAK,GAAG,YAAY,CAAC;AACrC,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,SAAS,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,KAAK,CAAC;AAC7E,IAAI,IAAI,CAACC,wBAAkB,EAAE,KAAK,CAAC,CAAC;AACpC,IAAI,IAAI,CAACC,kBAAY,EAAE,KAAK,CAAC,CAAC;AAC9B,GAAG,CAAC;AACJ,EAAE,MAAM,YAAY,GAAG,CAAC,IAAI,KAAK;AACjC,IAAI,IAAI,KAAK,CAAC,SAAS,EAAE;AACzB,MAAM,cAAc,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC;AAClE,KAAK,MAAM;AACX,MAAM,MAAM,YAAY,GAAG,CAAC,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;AAClD,MAAM,MAAM,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAC/C,MAAM,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;AACtB,QAAQ,YAAY,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AACtC,OAAO,MAAM;AACb,QAAQ,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChC,OAAO;AACP,MAAM,cAAc,CAAC,YAAY,CAAC,CAAC;AACnC,KAAK;AACL,GAAG,CAAC;AACJ,EAAE,MAAM,eAAe,GAAG,OAAO,IAAI,KAAK;AAC1C,IAAI,MAAM,EAAE,cAAc,EAAE,GAAG,KAAK,CAAC;AACrC,IAAI,IAAI,CAAC,cAAc,EAAE;AACzB,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC;AACzB,MAAM,OAAO;AACb,KAAK;AACL,IAAI,MAAM,YAAY,GAAG,cAAc,CAAC,IAAI,CAAC,CAAC;AAC9C,IAAI,MAAM,eAAe,GAAG;AAC5B,MAAMC,gBAAS,CAAC,YAAY,CAAC;AAC7B,MAAMC,eAAS,CAAC,YAAY,CAAC;AAC7B,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACrB,IAAI,IAAI,CAAC,eAAe,EAAE;AAC1B,MAAMC,gBAAU,CAAC,KAAK,EAAE,iEAAiE,CAAC,CAAC;AAC3F,KAAK;AACL,IAAI,IAAIF,gBAAS,CAAC,YAAY,CAAC,EAAE;AACjC,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK;AACpC,QAAQ,IAAI,MAAM,KAAK,KAAK,EAAE;AAC9B,UAAU,YAAY,CAAC,IAAI,CAAC,CAAC;AAC7B,SAAS;AACT,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK;AAEtB,OAAO,CAAC,CAAC;AACT,KAAK,MAAM,IAAI,YAAY,EAAE;AAC7B,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC;AACzB,KAAK;AACL,GAAG,CAAC;AACJ,EAAEG,SAAK,CAAC,MAAM,KAAK,CAAC,UAAU,EAAE,MAAM,WAAW,CAAC,KAAK,GAAGN,uBAAW,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;AACzG,EAAEO,WAAO,CAACC,4BAAkB,EAAE;AAC9B,IAAI,WAAW;AACf,IAAI,eAAe;AACnB,GAAG,CAAC,CAAC;AACL,EAAE,OAAO;AACT,IAAI,WAAW;AACf,IAAI,cAAc;AAClB,GAAG,CAAC;AACJ,EAAE;AACU,MAAC,cAAc,GAAG,CAAC,KAAK,KAAK;AACzC,EAAE,MAAM,EAAE,GAAGC,kBAAY,CAAC,UAAU,CAAC,CAAC;AACtC,EAAE,MAAM,OAAO,GAAGC,YAAQ,CAAC,MAAM;AACjC,IAAI,EAAE,CAAC,CAAC,EAAE;AACV,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC;AACrD,GAAG,CAAC,CAAC;AACL,EAAE,OAAO;AACT,IAAI,OAAO;AACX,GAAG,CAAC;AACJ;;;;;"}