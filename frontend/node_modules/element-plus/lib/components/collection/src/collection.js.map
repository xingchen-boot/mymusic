{"version":3,"file":"collection.js","sources":["../../../../../../packages/components/collection/src/collection.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***inject,***REMOVED***onBeforeUnmount,***REMOVED***onMounted,***REMOVED***provide,***REMOVED***ref,***REMOVED***unref***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***Collection***REMOVED***from***REMOVED***'./collection.vue'\nimport***REMOVED***CollectionItem***REMOVED***from***REMOVED***'./collection-item.vue'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***InjectionKey,***REMOVED***SetupContext***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***type***REMOVED***{\n***REMOVED******REMOVED***ElCollectionInjectionContext,\n***REMOVED******REMOVED***ElCollectionItemInjectionContext,\n}***REMOVED***from***REMOVED***'./tokens'\n\nexport***REMOVED***const***REMOVED***COLLECTION_ITEM_SIGN***REMOVED***=***REMOVED***`data-el-collection-item`\n\n//***REMOVED***Make***REMOVED***sure***REMOVED***the***REMOVED***first***REMOVED***letter***REMOVED***of***REMOVED***name***REMOVED***is***REMOVED***capitalized\nexport***REMOVED***const***REMOVED***createCollectionWithScope***REMOVED***=***REMOVED***(name:***REMOVED***string)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***COLLECTION_NAME***REMOVED***=***REMOVED***`El${name}Collection`\n***REMOVED******REMOVED***const***REMOVED***COLLECTION_ITEM_NAME***REMOVED***=***REMOVED***`${COLLECTION_NAME}Item`\n***REMOVED******REMOVED***const***REMOVED***COLLECTION_INJECTION_KEY:***REMOVED***InjectionKey<ElCollectionInjectionContext>***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED***Symbol(COLLECTION_NAME)\n***REMOVED******REMOVED***const***REMOVED***COLLECTION_ITEM_INJECTION_KEY:***REMOVED***InjectionKey<ElCollectionItemInjectionContext>***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED***Symbol(COLLECTION_ITEM_NAME)\n\n***REMOVED******REMOVED***const***REMOVED***ElCollection***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***...Collection,\n***REMOVED******REMOVED******REMOVED******REMOVED***name:***REMOVED***COLLECTION_NAME,\n***REMOVED******REMOVED******REMOVED******REMOVED***setup()***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***collectionRef***REMOVED***=***REMOVED***ref<HTMLElement>()\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***itemMap:***REMOVED***ElCollectionInjectionContext['itemMap']***REMOVED***=***REMOVED***new***REMOVED***Map()\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***getItems***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***collectionEl***REMOVED***=***REMOVED***unref(collectionRef)\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!collectionEl)***REMOVED***return***REMOVED***[]\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***orderedNodes***REMOVED***=***REMOVED***Array.from(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***collectionEl.querySelectorAll(`[${COLLECTION_ITEM_SIGN}]`)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***items***REMOVED***=***REMOVED***[...itemMap.values()]\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***items.sort(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***(a,***REMOVED***b)***REMOVED***=>***REMOVED***orderedNodes.indexOf(a.ref!)***REMOVED***-***REMOVED***orderedNodes.indexOf(b.ref!)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***provide(COLLECTION_INJECTION_KEY,***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***itemMap,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***getItems,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***collectionRef,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED***},\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***ElCollectionItem***REMOVED***=***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***...CollectionItem,\n***REMOVED******REMOVED******REMOVED******REMOVED***name:***REMOVED***COLLECTION_ITEM_NAME,\n***REMOVED******REMOVED******REMOVED******REMOVED***setup(_:***REMOVED***unknown,***REMOVED***{***REMOVED***attrs***REMOVED***}:***REMOVED***SetupContext)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***collectionItemRef***REMOVED***=***REMOVED***ref<HTMLElement>()\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***collectionInjection***REMOVED***=***REMOVED***inject(COLLECTION_INJECTION_KEY,***REMOVED***undefined)!\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***provide(COLLECTION_ITEM_INJECTION_KEY,***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***collectionItemRef,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onMounted(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***collectionItemEl***REMOVED***=***REMOVED***unref(collectionItemRef)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(collectionItemEl)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***collectionInjection.itemMap.set(collectionItemEl,***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ref:***REMOVED***collectionItemEl,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***...attrs,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***onBeforeUnmount(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***collectionItemEl***REMOVED***=***REMOVED***unref(collectionItemRef)!\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***collectionInjection.itemMap.delete(collectionItemEl)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})\n***REMOVED******REMOVED******REMOVED******REMOVED***},\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***COLLECTION_INJECTION_KEY,\n***REMOVED******REMOVED******REMOVED******REMOVED***COLLECTION_ITEM_INJECTION_KEY,\n***REMOVED******REMOVED******REMOVED******REMOVED***ElCollection,\n***REMOVED******REMOVED******REMOVED******REMOVED***ElCollectionItem,\n***REMOVED******REMOVED***}\n}\n"],"names":["Collection","ref","unref","provide","CollectionItem","inject","onMounted","onBeforeUnmount"],"mappings":"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"}