{"version":3,"file":"use-global-config.js","sources":["../../../../../../../packages/components/config-provider/src/hooks/use-global-config.ts"],"sourcesContent":["import***REMOVED***{***REMOVED***computed,***REMOVED***getCurrentInstance,***REMOVED***inject,***REMOVED***provide,***REMOVED***ref,***REMOVED***unref***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{***REMOVED***debugWarn,***REMOVED***keysOf***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\nimport***REMOVED***{\n***REMOVED******REMOVED***SIZE_INJECTION_KEY,\n***REMOVED******REMOVED***defaultInitialZIndex,\n***REMOVED******REMOVED***defaultNamespace,\n***REMOVED******REMOVED***emptyValuesContextKey,\n***REMOVED******REMOVED***localeContextKey,\n***REMOVED******REMOVED***namespaceContextKey,\n***REMOVED******REMOVED***useLocale,\n***REMOVED******REMOVED***useNamespace,\n***REMOVED******REMOVED***useZIndex,\n***REMOVED******REMOVED***zIndexContextKey,\n}***REMOVED***from***REMOVED***'@element-plus/hooks'\nimport***REMOVED***{***REMOVED***configProviderContextKey***REMOVED***}***REMOVED***from***REMOVED***'../constants'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***MaybeRef***REMOVED***}***REMOVED***from***REMOVED***'@vueuse/core'\nimport***REMOVED***type***REMOVED***{***REMOVED***App,***REMOVED***Ref***REMOVED***}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***type***REMOVED***{***REMOVED***ConfigProviderContext***REMOVED***}***REMOVED***from***REMOVED***'../constants'\n\n//***REMOVED***this***REMOVED***is***REMOVED***meant***REMOVED***to***REMOVED***fix***REMOVED***global***REMOVED***methods***REMOVED***like***REMOVED***`ElMessage(opts)`,***REMOVED***this***REMOVED***way***REMOVED***we***REMOVED***can***REMOVED***inject***REMOVED***current***REMOVED***locale\n//***REMOVED***into***REMOVED***the***REMOVED***component***REMOVED***as***REMOVED***default***REMOVED***injection***REMOVED***value.\n//***REMOVED***refer***REMOVED***to:***REMOVED***https://github.com/element-plus/element-plus/issues/2610#issuecomment-887965266\nconst***REMOVED***globalConfig***REMOVED***=***REMOVED***ref<ConfigProviderContext>()\n\nexport***REMOVED***function***REMOVED***useGlobalConfig<\n***REMOVED******REMOVED***K***REMOVED***extends***REMOVED***keyof***REMOVED***ConfigProviderContext,\n***REMOVED******REMOVED***D***REMOVED***extends***REMOVED***ConfigProviderContext[K]\n>(\n***REMOVED******REMOVED***key:***REMOVED***K,\n***REMOVED******REMOVED***defaultValue?:***REMOVED***D\n):***REMOVED***Ref<Exclude<ConfigProviderContext[K],***REMOVED***undefined>***REMOVED***|***REMOVED***D>\nexport***REMOVED***function***REMOVED***useGlobalConfig():***REMOVED***Ref<ConfigProviderContext>\nexport***REMOVED***function***REMOVED***useGlobalConfig(\n***REMOVED******REMOVED***key?:***REMOVED***keyof***REMOVED***ConfigProviderContext,\n***REMOVED******REMOVED***defaultValue***REMOVED***=***REMOVED***undefined\n)***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***config***REMOVED***=***REMOVED***getCurrentInstance()\n***REMOVED******REMOVED******REMOVED******REMOVED***?***REMOVED***inject(configProviderContextKey,***REMOVED***globalConfig)\n***REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***globalConfig\n***REMOVED******REMOVED***if***REMOVED***(key)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***computed(()***REMOVED***=>***REMOVED***config.value?.[key]***REMOVED***??***REMOVED***defaultValue)\n***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***config\n***REMOVED******REMOVED***}\n}\n\n//***REMOVED***for***REMOVED***components***REMOVED***like***REMOVED***`ElMessage`***REMOVED***`ElNotification`***REMOVED***`ElMessageBox`.\nexport***REMOVED***function***REMOVED***useGlobalComponentSettings(\n***REMOVED******REMOVED***block:***REMOVED***string,\n***REMOVED******REMOVED***sizeFallback?:***REMOVED***MaybeRef<ConfigProviderContext['size']>\n)***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***config***REMOVED***=***REMOVED***useGlobalConfig()\n\n***REMOVED******REMOVED***const***REMOVED***ns***REMOVED***=***REMOVED***useNamespace(\n***REMOVED******REMOVED******REMOVED******REMOVED***block,\n***REMOVED******REMOVED******REMOVED******REMOVED***computed(()***REMOVED***=>***REMOVED***config.value?.namespace***REMOVED***||***REMOVED***defaultNamespace)\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***const***REMOVED***locale***REMOVED***=***REMOVED***useLocale(computed(()***REMOVED***=>***REMOVED***config.value?.locale))\n***REMOVED******REMOVED***const***REMOVED***zIndex***REMOVED***=***REMOVED***useZIndex(\n***REMOVED******REMOVED******REMOVED******REMOVED***computed(()***REMOVED***=>***REMOVED***config.value?.zIndex***REMOVED***||***REMOVED***defaultInitialZIndex)\n***REMOVED******REMOVED***)\n***REMOVED******REMOVED***const***REMOVED***size***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***unref(sizeFallback)***REMOVED***||***REMOVED***config.value?.size***REMOVED***||***REMOVED***'')\n***REMOVED******REMOVED***provideGlobalConfig(computed(()***REMOVED***=>***REMOVED***unref(config)***REMOVED***||***REMOVED***{}))\n\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***ns,\n***REMOVED******REMOVED******REMOVED******REMOVED***locale,\n***REMOVED******REMOVED******REMOVED******REMOVED***zIndex,\n***REMOVED******REMOVED******REMOVED******REMOVED***size,\n***REMOVED******REMOVED***}\n}\n\nexport***REMOVED***const***REMOVED***provideGlobalConfig***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***config:***REMOVED***MaybeRef<ConfigProviderContext>,\n***REMOVED******REMOVED***app?:***REMOVED***App,\n***REMOVED******REMOVED***global***REMOVED***=***REMOVED***false\n)***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***inSetup***REMOVED***=***REMOVED***!!getCurrentInstance()\n***REMOVED******REMOVED***const***REMOVED***oldConfig***REMOVED***=***REMOVED***inSetup***REMOVED***?***REMOVED***useGlobalConfig()***REMOVED***:***REMOVED***undefined\n\n***REMOVED******REMOVED***const***REMOVED***provideFn***REMOVED***=***REMOVED***app?.provide***REMOVED***??***REMOVED***(inSetup***REMOVED***?***REMOVED***provide***REMOVED***:***REMOVED***undefined)\n***REMOVED******REMOVED***if***REMOVED***(!provideFn)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***debugWarn(\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'provideGlobalConfig',\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'provideGlobalConfig()***REMOVED***can***REMOVED***only***REMOVED***be***REMOVED***used***REMOVED***inside***REMOVED***setup().'\n***REMOVED******REMOVED******REMOVED******REMOVED***)\n***REMOVED******REMOVED******REMOVED******REMOVED***return\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***const***REMOVED***context***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***cfg***REMOVED***=***REMOVED***unref(config)\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!oldConfig?.value)***REMOVED***return***REMOVED***cfg\n***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***mergeConfig(oldConfig.value,***REMOVED***cfg)\n***REMOVED******REMOVED***})\n***REMOVED******REMOVED***provideFn(configProviderContextKey,***REMOVED***context)\n***REMOVED******REMOVED***provideFn(\n***REMOVED******REMOVED******REMOVED******REMOVED***localeContextKey,\n***REMOVED******REMOVED******REMOVED******REMOVED***computed(()***REMOVED***=>***REMOVED***context.value.locale)\n***REMOVED******REMOVED***)\n***REMOVED******REMOVED***provideFn(\n***REMOVED******REMOVED******REMOVED******REMOVED***namespaceContextKey,\n***REMOVED******REMOVED******REMOVED******REMOVED***computed(()***REMOVED***=>***REMOVED***context.value.namespace)\n***REMOVED******REMOVED***)\n***REMOVED******REMOVED***provideFn(\n***REMOVED******REMOVED******REMOVED******REMOVED***zIndexContextKey,\n***REMOVED******REMOVED******REMOVED******REMOVED***computed(()***REMOVED***=>***REMOVED***context.value.zIndex)\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***provideFn(SIZE_INJECTION_KEY,***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***size:***REMOVED***computed(()***REMOVED***=>***REMOVED***context.value.size***REMOVED***||***REMOVED***''),\n***REMOVED******REMOVED***})\n\n***REMOVED******REMOVED***provideFn(\n***REMOVED******REMOVED******REMOVED******REMOVED***emptyValuesContextKey,\n***REMOVED******REMOVED******REMOVED******REMOVED***computed(()***REMOVED***=>***REMOVED***({\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***emptyValues:***REMOVED***context.value.emptyValues,\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***valueOnClear:***REMOVED***context.value.valueOnClear,\n***REMOVED******REMOVED******REMOVED******REMOVED***}))\n***REMOVED******REMOVED***)\n\n***REMOVED******REMOVED***if***REMOVED***(global***REMOVED***||***REMOVED***!globalConfig.value)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***globalConfig.value***REMOVED***=***REMOVED***context.value\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***return***REMOVED***context\n}\n\nconst***REMOVED***mergeConfig***REMOVED***=***REMOVED***(\n***REMOVED******REMOVED***a:***REMOVED***ConfigProviderContext,\n***REMOVED******REMOVED***b:***REMOVED***ConfigProviderContext\n):***REMOVED***ConfigProviderContext***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***const***REMOVED***keys***REMOVED***=***REMOVED***[...new***REMOVED***Set([...keysOf(a),***REMOVED***...keysOf(b)])]\n***REMOVED******REMOVED***const***REMOVED***obj:***REMOVED***Record<string,***REMOVED***any>***REMOVED***=***REMOVED***{}\n***REMOVED******REMOVED***for***REMOVED***(const***REMOVED***key***REMOVED***of***REMOVED***keys)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***obj[key]***REMOVED***=***REMOVED***b[key]***REMOVED***!==***REMOVED***undefined***REMOVED***?***REMOVED***b[key]***REMOVED***:***REMOVED***a[key]\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***return***REMOVED***obj\n}\n"],"names":["ref","getCurrentInstance","inject","configProviderContextKey","computed","useNamespace","defaultNamespace","useLocale","useZIndex","defaultInitialZIndex","unref","provide","localeContextKey","namespaceContextKey","zIndexContextKey","SIZE_INJECTION_KEY","emptyValuesContextKey","keysOf"],"mappings":"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"}