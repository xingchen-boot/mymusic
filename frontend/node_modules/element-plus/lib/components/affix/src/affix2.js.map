{"version":3,"file":"affix2.js","sources":["../../../../../../packages/components/affix/src/affix.vue"],"sourcesContent":["<template>\n***REMOVED******REMOVED***<div***REMOVED***ref=\"root\"***REMOVED***:class=\"ns.b()\"***REMOVED***:style=\"rootStyle\">\n***REMOVED******REMOVED******REMOVED******REMOVED***<div***REMOVED***:class=\"{***REMOVED***[ns.m('fixed')]:***REMOVED***fixed***REMOVED***}\"***REMOVED***:style=\"affixStyle\">\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***<slot***REMOVED***/>\n***REMOVED******REMOVED******REMOVED******REMOVED***</div>\n***REMOVED******REMOVED***</div>\n</template>\n\n<script***REMOVED***lang=\"ts\"***REMOVED***setup>\nimport***REMOVED***{\n***REMOVED******REMOVED***computed,\n***REMOVED******REMOVED***nextTick,\n***REMOVED******REMOVED***onMounted,\n***REMOVED******REMOVED***ref,\n***REMOVED******REMOVED***shallowRef,\n***REMOVED******REMOVED***watch,\n***REMOVED******REMOVED***watchEffect,\n}***REMOVED***from***REMOVED***'vue'\nimport***REMOVED***{\n***REMOVED******REMOVED***useElementBounding,\n***REMOVED******REMOVED***useEventListener,\n***REMOVED******REMOVED***useWindowSize,\n}***REMOVED***from***REMOVED***'@vueuse/core'\nimport***REMOVED***{***REMOVED***addUnit,***REMOVED***getScrollContainer,***REMOVED***throwError***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/utils'\nimport***REMOVED***{***REMOVED***useNamespace***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/hooks'\nimport***REMOVED***{***REMOVED***CHANGE_EVENT***REMOVED***}***REMOVED***from***REMOVED***'@element-plus/constants'\nimport***REMOVED***{***REMOVED***affixEmits,***REMOVED***affixProps***REMOVED***}***REMOVED***from***REMOVED***'./affix'\n\nimport***REMOVED***type***REMOVED***{***REMOVED***CSSProperties***REMOVED***}***REMOVED***from***REMOVED***'vue'\n\nconst***REMOVED***COMPONENT_NAME***REMOVED***=***REMOVED***'ElAffix'\ndefineOptions({\n***REMOVED******REMOVED***name:***REMOVED***COMPONENT_NAME,\n})\nconst***REMOVED***props***REMOVED***=***REMOVED***defineProps(affixProps)\nconst***REMOVED***emit***REMOVED***=***REMOVED***defineEmits(affixEmits)\n\nconst***REMOVED***ns***REMOVED***=***REMOVED***useNamespace('affix')\n\nconst***REMOVED***target***REMOVED***=***REMOVED***shallowRef<HTMLElement>()\nconst***REMOVED***root***REMOVED***=***REMOVED***shallowRef<HTMLDivElement>()\nconst***REMOVED***scrollContainer***REMOVED***=***REMOVED***shallowRef<HTMLElement***REMOVED***|***REMOVED***Window>()\nconst***REMOVED***{***REMOVED***height:***REMOVED***windowHeight***REMOVED***}***REMOVED***=***REMOVED***useWindowSize()\nconst***REMOVED***{\n***REMOVED******REMOVED***height:***REMOVED***rootHeight,\n***REMOVED******REMOVED***width:***REMOVED***rootWidth,\n***REMOVED******REMOVED***top:***REMOVED***rootTop,\n***REMOVED******REMOVED***bottom:***REMOVED***rootBottom,\n***REMOVED******REMOVED***update:***REMOVED***updateRoot,\n}***REMOVED***=***REMOVED***useElementBounding(root,***REMOVED***{***REMOVED***windowScroll:***REMOVED***false***REMOVED***})\nconst***REMOVED***targetRect***REMOVED***=***REMOVED***useElementBounding(target)\n\nconst***REMOVED***fixed***REMOVED***=***REMOVED***ref(false)\nconst***REMOVED***scrollTop***REMOVED***=***REMOVED***ref(0)\nconst***REMOVED***transform***REMOVED***=***REMOVED***ref(0)\n\nconst***REMOVED***rootStyle***REMOVED***=***REMOVED***computed<CSSProperties>(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***height:***REMOVED***fixed.value***REMOVED***?***REMOVED***`${rootHeight.value}px`***REMOVED***:***REMOVED***'',\n***REMOVED******REMOVED******REMOVED******REMOVED***width:***REMOVED***fixed.value***REMOVED***?***REMOVED***`${rootWidth.value}px`***REMOVED***:***REMOVED***'',\n***REMOVED******REMOVED***}\n})\n\nconst***REMOVED***affixStyle***REMOVED***=***REMOVED***computed<CSSProperties>(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(!fixed.value)***REMOVED***return***REMOVED***{}\n\n***REMOVED******REMOVED***const***REMOVED***offset***REMOVED***=***REMOVED***props.offset***REMOVED***?***REMOVED***addUnit(props.offset)***REMOVED***:***REMOVED***0\n***REMOVED******REMOVED***return***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***height:***REMOVED***`${rootHeight.value}px`,\n***REMOVED******REMOVED******REMOVED******REMOVED***width:***REMOVED***`${rootWidth.value}px`,\n***REMOVED******REMOVED******REMOVED******REMOVED***top:***REMOVED***props.position***REMOVED***===***REMOVED***'top'***REMOVED***?***REMOVED***offset***REMOVED***:***REMOVED***'',\n***REMOVED******REMOVED******REMOVED******REMOVED***bottom:***REMOVED***props.position***REMOVED***===***REMOVED***'bottom'***REMOVED***?***REMOVED***offset***REMOVED***:***REMOVED***'',\n***REMOVED******REMOVED******REMOVED******REMOVED***transform:***REMOVED***transform.value***REMOVED***?***REMOVED***`translateY(${transform.value}px)`***REMOVED***:***REMOVED***'',\n***REMOVED******REMOVED******REMOVED******REMOVED***zIndex:***REMOVED***props.zIndex,\n***REMOVED******REMOVED***}\n})\n\nconst***REMOVED***update***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(!scrollContainer.value)***REMOVED***return\n\n***REMOVED******REMOVED***scrollTop.value***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollContainer.value***REMOVED***instanceof***REMOVED***Window\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***?***REMOVED***document.documentElement.scrollTop\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***:***REMOVED***scrollContainer.value.scrollTop***REMOVED***||***REMOVED***0\n\n***REMOVED******REMOVED***const***REMOVED***{***REMOVED***position,***REMOVED***target,***REMOVED***offset***REMOVED***}***REMOVED***=***REMOVED***props\n***REMOVED******REMOVED***const***REMOVED***rootHeightOffset***REMOVED***=***REMOVED***offset***REMOVED***+***REMOVED***rootHeight.value\n\n***REMOVED******REMOVED***if***REMOVED***(position***REMOVED***===***REMOVED***'top')***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(target)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***difference***REMOVED***=***REMOVED***targetRect.bottom.value***REMOVED***-***REMOVED***rootHeightOffset\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fixed.value***REMOVED***=***REMOVED***offset***REMOVED***>***REMOVED***rootTop.value***REMOVED***&&***REMOVED***targetRect.bottom.value***REMOVED***>***REMOVED***0\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***transform.value***REMOVED***=***REMOVED***difference***REMOVED***<***REMOVED***0***REMOVED***?***REMOVED***difference***REMOVED***:***REMOVED***0\n***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***fixed.value***REMOVED***=***REMOVED***offset***REMOVED***>***REMOVED***rootTop.value\n***REMOVED******REMOVED******REMOVED******REMOVED***}\n***REMOVED******REMOVED***}***REMOVED***else***REMOVED***if***REMOVED***(target)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***difference***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***windowHeight.value***REMOVED***-***REMOVED***targetRect.top.value***REMOVED***-***REMOVED***rootHeightOffset\n***REMOVED******REMOVED******REMOVED******REMOVED***fixed.value***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***windowHeight.value***REMOVED***-***REMOVED***offset***REMOVED***<***REMOVED***rootBottom.value***REMOVED***&&\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***windowHeight.value***REMOVED***>***REMOVED***targetRect.top.value\n***REMOVED******REMOVED******REMOVED******REMOVED***transform.value***REMOVED***=***REMOVED***difference***REMOVED***<***REMOVED***0***REMOVED***?***REMOVED***-difference***REMOVED***:***REMOVED***0\n***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***fixed.value***REMOVED***=***REMOVED***windowHeight.value***REMOVED***-***REMOVED***offset***REMOVED***<***REMOVED***rootBottom.value\n***REMOVED******REMOVED***}\n}\n\nconst***REMOVED***updateRootRect***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(!fixed.value)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***updateRoot()\n***REMOVED******REMOVED******REMOVED******REMOVED***return\n***REMOVED******REMOVED***}\n\n***REMOVED******REMOVED***fixed.value***REMOVED***=***REMOVED***false\n***REMOVED******REMOVED***await***REMOVED***nextTick()\n***REMOVED******REMOVED***updateRoot()\n***REMOVED******REMOVED***fixed.value***REMOVED***=***REMOVED***true\n}\n\nconst***REMOVED***handleScroll***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***updateRoot()\n***REMOVED******REMOVED***await***REMOVED***nextTick()\n***REMOVED******REMOVED***emit('scroll',***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***scrollTop:***REMOVED***scrollTop.value,\n***REMOVED******REMOVED******REMOVED******REMOVED***fixed:***REMOVED***fixed.value,\n***REMOVED******REMOVED***})\n}\n\nwatch(fixed,***REMOVED***(val)***REMOVED***=>***REMOVED***emit(CHANGE_EVENT,***REMOVED***val))\n\nonMounted(()***REMOVED***=>***REMOVED***{\n***REMOVED******REMOVED***if***REMOVED***(props.target)***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***target.value***REMOVED***=\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***document.querySelector<HTMLElement>(props.target)***REMOVED***??***REMOVED***undefined\n***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!target.value)\n***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throwError(COMPONENT_NAME,***REMOVED***`Target***REMOVED***does***REMOVED***not***REMOVED***exist:***REMOVED***${props.target}`)\n***REMOVED******REMOVED***}***REMOVED***else***REMOVED***{\n***REMOVED******REMOVED******REMOVED******REMOVED***target.value***REMOVED***=***REMOVED***document.documentElement\n***REMOVED******REMOVED***}\n***REMOVED******REMOVED***scrollContainer.value***REMOVED***=***REMOVED***getScrollContainer(root.value!,***REMOVED***true)\n***REMOVED******REMOVED***updateRoot()\n})\n\nuseEventListener(scrollContainer,***REMOVED***'scroll',***REMOVED***handleScroll)\nwatchEffect(update)\n\ndefineExpose({\n***REMOVED******REMOVED***/*****REMOVED***@description***REMOVED***update***REMOVED***affix***REMOVED***status***REMOVED****/\n***REMOVED******REMOVED***update,\n***REMOVED******REMOVED***/*****REMOVED***@description***REMOVED***update***REMOVED***rootRect***REMOVED***info***REMOVED****/\n***REMOVED******REMOVED***updateRoot:***REMOVED***updateRootRect,\n})\n</script>\n"],"names":["useNamespace","shallowRef","useWindowSize","useElementBounding","ref","computed","addUnit","target","nextTick","watch","CHANGE_EVENT","onMounted","throwError","getScrollContainer","useEventListener","watchEffect"],"mappings":";;;;;;;;;;;;;;;uCA+Bc,CAAA;AAAA,EACZ,IAAM,EAAA,cAAA;AACR;;;;;;;AAIA,IAAM,MAAA,EAAA,GAAKA,mBAAa,OAAO,CAAA,CAAA;AAE/B,IAAA,MAAM,SAASC,cAAwB,EAAA,CAAA;AACvC,IAAA,MAAM,OAAOA,cAA2B,EAAA,CAAA;AACxC,IAAA,MAAM,kBAAkBA,cAAiC,EAAA,CAAA;AACzD,IAAA,MAAM,EAAE,MAAA,EAAQ,YAAa,EAAA,GAAIC,kBAAc,EAAA,CAAA;AAC/C,IAAM,MAAA;AAAA,MACJ,MAAQ,EAAA,UAAA;AAAA,MACR,KAAO,EAAA,SAAA;AAAA,MACP,GAAK,EAAA,OAAA;AAAA,MACL,MAAQ,EAAA,UAAA;AAAA,MACR,MAAQ,EAAA,UAAA;AAAA,QACNC,uBAAmB,CAAA,IAAA,EAAM,EAAE,YAAA,EAAc,OAAO,CAAA,CAAA;AACpD,IAAM,MAAA,UAAA,GAAaA,wBAAmB,MAAM,CAAA,CAAA;AAE5C,IAAM,MAAA,KAAA,GAAQC,QAAI,KAAK,CAAA,CAAA;AACvB,IAAM,MAAA,SAAA,GAAYA,QAAI,CAAC,CAAA,CAAA;AACvB,IAAM,MAAA,SAAA,GAAYA,QAAI,CAAC,CAAA,CAAA;AAEvB,IAAM,MAAA,SAAA,GAAYC,aAAwB,MAAM;AAC9C,MAAO,OAAA;AAAA,QACL,QAAQ,KAAM,CAAA,KAAA,GAAQ,CAAG,EAAA,UAAA,CAAW,KAAK,CAAO,EAAA,CAAA,GAAA,EAAA;AAAA,QAChD,OAAO,KAAM,CAAA,KAAA,GAAQ,CAAG,EAAA,SAAA,CAAU,KAAK,CAAO,EAAA,CAAA,GAAA,EAAA;AAAA,OAChD,CAAA;AAAA,KACD,CAAA,CAAA;AAED,IAAM,MAAA,UAAA,GAAaA,aAAwB,MAAM;AAC/C,MAAA,IAAI,CAAC,KAAA,CAAM,KAAO;AAElB,QAAA;AACA,MAAO,MAAA,MAAA,GAAA,KAAA,CAAA,MAAA,GAAAC,aAAA,CAAA,KAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA;AAAA,MACL,OAAA;AAA2B,QAC3B,MAAA,EAAU,CAAA,EAAA,UAAe,CAAA,KAAA,CAAA,EAAA,CAAA;AAAA,QACzB,KAAK,EAAA,CAAA,EAAA,SAAmB,CAAA,KAAA,CAAA,EAAA,CAAA;AAAiB,QACzC,GAAQ,EAAA,KAAA,CAAA,QAAmB,KAAA,KAAA,GAAA,MAAW,GAAS,EAAA;AAAA,QAC/C,aAAqB,CAAA,QAAA,KAAA,QAAsB,GAAA,MAAA,GAAA,EAAA;AAAuB,QAClE,SAAc,EAAA,SAAA,CAAA,KAAA,GAAA,CAAA,WAAA,EAAA,SAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA;AAAA,QAChB,MAAA,EAAA,KAAA,CAAA,MAAA;AAAA,OACD,CAAA;AAED,KAAA,CAAA,CAAA;AACE,IAAI,MAAA;AAEJ,MAAU,IAAA,CAAA;AAKV,QAAA,OAAQ;AACR,MAAM,SAAA,CAAA,KAAA,GAAA,gBAA4B,KAAW,YAAA,MAAA,GAAA,QAAA,CAAA,eAAA,CAAA,SAAA,GAAA,eAAA,CAAA,KAAA,CAAA,SAAA,IAAA,CAAA,CAAA;AAE7C,MAAA,kBAAwB,MAAA,EAAA,OAAA,EAAA,MAAA,EAAA,GAAA,KAAA,CAAA;AACtB,MAAA,MAAIC,gBAAQ,GAAA,MAAA,GAAA,UAAA,CAAA,KAAA,CAAA;AACV,MAAM,IAAA,QAAA,KAAA,KAAA,EAAwB;AAC9B,QAAA,IAAA;AACA,UAAU,MAAA,UAAA,GAAqB,UAAA,CAAA,MAAiB,CAAA,KAAA,GAAA,gBAAA,CAAA;AAAA,UAC3C,KAAA,CAAA,KAAA,GAAA,MAAA,GAAA,OAAA,CAAA,KAAA,IAAA,UAAA,CAAA,MAAA,CAAA,KAAA,GAAA,CAAA,CAAA;AACL,UAAM,SAAA,CAAA,kBAAyB,GAAA,CAAA,GAAA,UAAA,GAAA,CAAA,CAAA;AAAA,SACjC,MAAA;AAAA,qBACiB,GAAA,MAAA,GAAA,OAAA,CAAA,KAAA,CAAA;AACjB,SAAA;AAEA,OAAM,MAAA,IAAA;AAGN,QAAA,MAAA,UAAkB,GAAA,YAAa,CAAI,KAAc,GAAA,UAAA,CAAA,GAAA,CAAA,KAAA,GAAA,gBAAA,CAAA;AAAA,QAC5C,KAAA,CAAA,KAAA,GAAA,YAAA,CAAA,KAAA,GAAA,MAAA,GAAA,UAAA,CAAA,KAAA,IAAA,YAAA,CAAA,KAAA,GAAA,UAAA,CAAA,GAAA,CAAA,KAAA,CAAA;AACL,QAAA,SAAc,CAAA,KAAA,GAAA,UAAqB,GAAA,CAAA,GAAA,CAAA,UAAoB,GAAA,CAAA,CAAA;AAAA,OACzD,MAAA;AAAA,QACF,KAAA,CAAA,KAAA,GAAA,YAAA,CAAA,KAAA,GAAA,MAAA,GAAA,UAAA,CAAA,KAAA,CAAA;AAEA,OAAA;AACE,KAAI,CAAA;AACF,IAAW,MAAA,cAAA,GAAA,YAAA;AACX,MAAA,IAAA,CAAA,KAAA,CAAA,KAAA,EAAA;AAAA,QACF,UAAA,EAAA,CAAA;AAEA,QAAA,OAAc;AACd,OAAA;AACA,MAAW,KAAA,CAAA,KAAA,GAAA,KAAA,CAAA;AACX,MAAA,MAAMC,YAAQ,EAAA,CAAA;AAAA,MAChB,UAAA,EAAA,CAAA;AAEA,MAAA,mBAAqB;AACnB,KAAW,CAAA;AACX,IAAA,MAAA,YAAe,GAAA,YAAA;AACf,MAAA,UAAe,EAAA,CAAA;AAAA,MAAA,kBACQ,EAAA,CAAA;AAAA,MAAA,aACR,EAAA;AAAA,QACd,SAAA,EAAA,SAAA,CAAA,KAAA;AAAA,QACH,KAAA,EAAA,KAAA,CAAA,KAAA;AAEA,OAAA,CAAA,CAAA;AAEA,KAAA,CAAA;AACE,IAAAC,SAAA,CAAI,OAAc,CAAA,GAAA,KAAA,IAAA,CAAAC,kBAAA,EAAA,GAAA,CAAA,CAAA,CAAA;AAChB,IAAAC,aAAA,CAAA,MACE;AACF,MAAA,IAAA,EAAI,CAAC;AACH,MAAA,IAAA,KAAA,CAAA,MAA2B,EAAA;AAAwC,QAChE,MAAA,CAAA,KAAA,GAAA,CAAA,EAAA,GAAA,QAAA,CAAA,aAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,IAAA,GAAA,EAAA,GAAA,KAAA,CAAA,CAAA;AACL,QAAA,IAAA,CAAA,YAAwB;AAAA,UAC1BC,gBAAA,CAAA,cAAA,EAAA,CAAA,uBAAA,EAAA,KAAA,CAAA,MAAA,CAAA,CAAA,CAAA,CAAA;AACA,OAAA,MAAA;AACA,QAAW,MAAA,CAAA,KAAA,GAAA,QAAA,CAAA,eAAA,CAAA;AAAA,OACZ;AAED,MAAiB,eAAA,CAAA,KAAA,GAAAC,yBAA2B,CAAY,IAAA,CAAA,KAAA,EAAA,IAAA,CAAA,CAAA;AACxD,MAAA,UAAY,EAAM,CAAA;AAElB,KAAa,CAAA,CAAA;AAAA,IAAAC,qBAAA,CAAA,eAAA,EAAA,QAAA,EAAA,YAAA,CAAA,CAAA;AAAA,IAEXC,eAAA,CAAA,MAAA,CAAA,CAAA;AAAA,IAAA,MAAA,CAAA;AAAA,MAEA,MAAY;AAAA,MACb,UAAA,EAAA,cAAA;;;;;;;;;;;;;;;;;;;;;;;"}