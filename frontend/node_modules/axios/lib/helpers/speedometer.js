'use***REMOVED***strict';

/**
***REMOVED*******REMOVED***Calculate***REMOVED***data***REMOVED***maxRate
***REMOVED*******REMOVED***@param***REMOVED***{Number}***REMOVED***[samplesCount=***REMOVED***10]
***REMOVED*******REMOVED***@param***REMOVED***{Number}***REMOVED***[min=***REMOVED***1000]
***REMOVED*******REMOVED***@returns***REMOVED***{Function}
***REMOVED****/
function***REMOVED***speedometer(samplesCount,***REMOVED***min)***REMOVED***{
***REMOVED******REMOVED***samplesCount***REMOVED***=***REMOVED***samplesCount***REMOVED***||***REMOVED***10;
***REMOVED******REMOVED***const***REMOVED***bytes***REMOVED***=***REMOVED***new***REMOVED***Array(samplesCount);
***REMOVED******REMOVED***const***REMOVED***timestamps***REMOVED***=***REMOVED***new***REMOVED***Array(samplesCount);
***REMOVED******REMOVED***let***REMOVED***head***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED***let***REMOVED***tail***REMOVED***=***REMOVED***0;
***REMOVED******REMOVED***let***REMOVED***firstSampleTS;

***REMOVED******REMOVED***min***REMOVED***=***REMOVED***min***REMOVED***!==***REMOVED***undefined***REMOVED***?***REMOVED***min***REMOVED***:***REMOVED***1000;

***REMOVED******REMOVED***return***REMOVED***function***REMOVED***push(chunkLength)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***now***REMOVED***=***REMOVED***Date.now();

***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***startedAt***REMOVED***=***REMOVED***timestamps[tail];

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!firstSampleTS)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***firstSampleTS***REMOVED***=***REMOVED***now;
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***bytes[head]***REMOVED***=***REMOVED***chunkLength;
***REMOVED******REMOVED******REMOVED******REMOVED***timestamps[head]***REMOVED***=***REMOVED***now;

***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***i***REMOVED***=***REMOVED***tail;
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***bytesCount***REMOVED***=***REMOVED***0;

***REMOVED******REMOVED******REMOVED******REMOVED***while***REMOVED***(i***REMOVED***!==***REMOVED***head)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***bytesCount***REMOVED***+=***REMOVED***bytes[i++];
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***i***REMOVED***=***REMOVED***i***REMOVED***%***REMOVED***samplesCount;
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***head***REMOVED***=***REMOVED***(head***REMOVED***+***REMOVED***1)***REMOVED***%***REMOVED***samplesCount;

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(head***REMOVED***===***REMOVED***tail)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***tail***REMOVED***=***REMOVED***(tail***REMOVED***+***REMOVED***1)***REMOVED***%***REMOVED***samplesCount;
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(now***REMOVED***-***REMOVED***firstSampleTS***REMOVED***<***REMOVED***min)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return;
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***passed***REMOVED***=***REMOVED***startedAt***REMOVED***&&***REMOVED***now***REMOVED***-***REMOVED***startedAt;

***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***passed***REMOVED***?***REMOVED***Math.round(bytesCount***REMOVED*******REMOVED***1000***REMOVED***/***REMOVED***passed)***REMOVED***:***REMOVED***undefined;
***REMOVED******REMOVED***};
}

export***REMOVED***default***REMOVED***speedometer;
